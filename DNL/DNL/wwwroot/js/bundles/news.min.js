window.addEventListener("DOMContentLoaded",function(){var i=document.getElementById("image"),r=document.getElementById("FileInput"),u=$(".alert"),t=$("#modal"),f=document.getElementById("PictureSource"),n;$('[data-toggle="tooltip"]').tooltip();r.addEventListener("change",function(n){var e=n.target.files,s=function(n){r.value="";i.src=n;u.hide();t.modal("show")},f,o;e&&e.length>0&&(o=e[0],URL?s(URL.createObjectURL(o)):FileReader&&(f=new FileReader,f.onload=function(){s(f.result)},f.readAsDataURL(o)))});t.on("shown.bs.modal",function(){n=new Cropper(i,{aspectRatio:17/9,viewMode:4})}).on("hidden.bs.modal",function(){n.destroy();n=null});document.getElementById("crop").addEventListener("click",function(){var i;t.modal("hide");n&&(i=n.getCroppedCanvas({width:680,height:360}),f.value=i.toDataURL().replace(/^data:image\/(png|jpg|jpeg);base64,/,""))})});
/*!
 * Cropper.js v1.4.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2018-07-15T09:55:31.170Z
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Cropper=t()}(this,function(){"use strict";function n(n){return"number"==typeof n&&!vr(n)}function ni(n){return void 0===n}function w(n){return"object"===(void 0===n?"undefined":lr(n))&&null!==n}function k(n){if(!w(n))return!1;try{var t=n.constructor,i=t.prototype;return t&&i&&yr.call(i,"isPrototypeOf")}catch(n){return!1}}function f(n){return"function"==typeof n}function r(t,i){if(t&&f(i))if(Array.isArray(t)||n(t.length))for(var u=t.length,r=void 0,r=0;r<u&&!1!==i.call(t,t[r],r,t);r+=1);else w(t)&&Object.keys(t).forEach(function(n){i.call(t,t[n],n,t)});return t}function d(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e11;return pr.test(n)?Math.round(n*t)/t:n}function a(t,i){var u=t.style;r(i,function(t,i){wr.test(i)&&n(t)&&(t+="px");u[i]=t})}function u(t,i){if(i)if(n(t.length))r(t,function(n){u(n,i)});else if(t.classList)t.classList.add(i);else{var f=t.className.trim();f?f.indexOf(i)<0&&(t.className=f+" "+i):t.className=i}}function c(t,i){i&&(n(t.length)?r(t,function(n){c(n,i)}):t.classList?t.classList.remove(i):0<=t.className.indexOf(i)&&(t.className=t.className.replace(i,"")))}function g(t,i,f){i&&(n(t.length)?r(t,function(n){g(n,i,f)}):f?u(t,i):c(t,i))}function ti(n){return n.replace(br,"$1-$2").toLowerCase()}function ot(n,t){return w(n[t])?n[t]:n.dataset?n.dataset[t]:n.getAttribute("data-"+ti(t))}function nt(n,t,i){w(i)?n[t]=i:n.dataset?n.dataset[t]=i:n.setAttribute("data-"+ti(t),i)}function nr(n,t){if(w(n[t]))try{delete n[t]}catch(i){n[t]=void 0}else if(n.dataset)try{delete n.dataset[t]}catch(i){n.dataset[t]=void 0}else n.removeAttribute("data-"+ti(t))}function h(n,t,i){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=i;t.trim().split(tr).forEach(function(t){if(!ir){var f=n.listeners;f&&f[t]&&f[t][i]&&(r=f[t][i],delete f[t][i],0===Object.keys(f[t]).length&&delete f[t],0===Object.keys(f).length&&delete n.listeners)}n.removeEventListener(t,r,u)})}function o(n,t,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},u=i;t.trim().split(tr).forEach(function(t){if(r.once&&!ir){var e=n.listeners,f=void 0===e?{}:e;u=function(){for(var o=arguments.length,s=Array(o),e=0;e<o;e++)s[e]=arguments[e];delete f[t][i];n.removeEventListener(t,u,r);i.apply(n,s)};f[t]||(f[t]={});f[t][i]&&n.removeEventListener(t,f[t][i],r);f[t][i]=u;n.listeners=f}n.addEventListener(t,u,r)})}function tt(n,t,i){var r=void 0;return f(Event)&&f(CustomEvent)?r=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),n.dispatchEvent(r)}function rr(n){var t=n.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}function ur(n){var t=n.match(kr);return t&&(t[1]!==ii.protocol||t[2]!==ii.hostname||t[3]!==ii.port)}function fr(n){var t="timestamp="+(new Date).getTime();return n+(-1===n.indexOf("?")?"?":"&")+t}function st(t){var u=t.rotate,f=t.scaleX,e=t.scaleY,o=t.translateX,s=t.translateY,i=[],r;return n(o)&&0!==o&&i.push("translateX("+o+"px)"),n(s)&&0!==s&&i.push("translateY("+s+"px)"),n(u)&&0!==u&&i.push("rotate("+u+"deg)"),n(f)&&1!==f&&i.push("scaleX("+f+")"),n(e)&&1!==e&&i.push("scaleY("+e+")"),r=i.length?i.join(" "):"none",{WebkitTransform:r,msTransform:r,transform:r}}function lt(n,i){var r=n.pageX,u=n.pageY,f={endX:r,endY:u};return i?f:t({startX:r,startY:u},f)}function v(n){var r=n.aspectRatio,i=n.height,t=n.width,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"contain",u=function(n){return dr(n)&&0<n},f;return u(t)&&u(i)?(f=i*r,"contain"===e&&t<f||"cover"===e&&f<t?i=t/r:t=i*r):u(t)?i=t/r:u(i)&&(t=i*r),{width:t,height:i}}function nu(n){var t=new DataView(n),l=void 0,i=void 0,e=void 0,o=void 0,a,r,u,h,c;if(255===t.getUint8(0)&&216===t.getUint8(1))for(a=t.byteLength,r=2;r<a;){if(255===t.getUint8(r)&&225===t.getUint8(r+1)){e=r;break}r+=1}if(e&&(u=e+10,"Exif"===function(n,t,i){var u="",r=void 0;for(i+=t,r=t;r<i;r+=1)u+=ri(n.getUint8(r));return u}(t,e+4,4)&&(h=t.getUint16(u),((i=18761===h)||19789===h)&&42===t.getUint16(u+2,i)&&(c=t.getUint32(u+4,i),8<=c&&(o=u+c)))),o)for(var v=t.getUint16(o,i),f=void 0,s=void 0,s=0;s<v;s+=1)if(f=o+12*s+2,274===t.getUint16(f,i)){f+=8;l=t.getUint16(f,i);t.setUint16(f,1,i);break}return l}var ui="undefined"!=typeof window,s=ui?window:{},i="cropper",at="all",fi="crop",ei="move",oi="zoom",y="e",p="w",b="s",l="n",it="ne",rt="nw",ut="se",ft="sw",vt=i+"-crop",si=i+"-disabled",e=i+"-hidden",hi=i+"-hide",ht=i+"-modal",yt=i+"-move",et=i+"Action",ct=i+"Preview",pt="crop",ci="move",li="none",wt="crop",bt="cropend",kt="cropmove",dt="cropstart",ai="dblclick",vi=s.PointerEvent?"pointerdown":"touchstart mousedown",yi=s.PointerEvent?"pointermove":"touchmove mousemove",pi=s.PointerEvent?"pointerup pointercancel":"touchend touchcancel mouseup",wi="ready",bi="resize",ki="wheel mousewheel DOMMouseScroll",gt="zoom",or=/^(?:e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,sr=/^data:/,hr=/^data:image\/jpeg;base64,/,cr=/^(?:img|canvas)$/i,di={viewMode:0,dragMode:pt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ar=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),gi=function(n){if(Array.isArray(n)){for(var t=0,i=Array(n.length);t<n.length;t++)i[t]=n[t];return i}return Array.from(n)},vr=Number.isNaN||s.isNaN,yr=Object.prototype.hasOwnProperty,t=Object.assign||function(n){for(var i=arguments.length,r=Array(1<i?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return w(n)&&0<r.length&&r.forEach(function(t){w(t)&&Object.keys(t).forEach(function(i){n[i]=t[i]})}),n},pr=/\.\d*(?:0|9){12}\d*$/i,wr=/^(?:width|height|left|top|marginLeft|marginTop)$/,br=/([a-z\d])([A-Z])/g,tr=/\s\s*/,ir=function(){var n=!1;if(ui){var t=!1,i=function(){},r=Object.defineProperty({},"once",{get:function(){return n=!0,t},set:function(n){t=n}});s.addEventListener("test",i,r);s.removeEventListener("test",i,r)}return n}(),ii=s.location,kr=/^(https?:)\/\/([^:/?#]+):?(\d*)/i,dr=Number.isFinite||s.isFinite,ri=String.fromCharCode,gr=/^data:.*,/,tu={render:function(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();this.cropped&&this.renderCropBox()},initContainer:function(){var i=this.element,r=this.options,f=this.container,n=this.cropper,t;u(n,e);c(i,e);t={width:Math.max(f.offsetWidth,Number(r.minContainerWidth)||200),height:Math.max(f.offsetHeight,Number(r.minContainerHeight)||100)};a(n,{width:(this.containerData=t).width,height:t.height});u(i,e);c(n,e)},initCanvas:function(){var n=this.containerData,r=this.imageData,f=this.options.viewMode,s=Math.abs(r.rotate)%180==90,h=s?r.naturalHeight:r.naturalWidth,c=s?r.naturalWidth:r.naturalHeight,u=h/c,e=n.width,o=n.height,i;n.height*u>n.width?3===f?e=n.height*u:o=n.width/u:3===f?o=n.width/u:e=n.height*u;i={aspectRatio:u,naturalWidth:h,naturalHeight:c,width:e,height:o};i.left=(n.width-e)/2;i.top=(n.height-o)/2;i.oldLeft=i.left;i.oldTop=i.top;this.canvasData=i;this.limited=1===f||2===f;this.limitCanvas(!0,!0);this.initialImageData=t({},r);this.initialCanvasData=t({},i)},limitCanvas:function(n,t){var a=this.options,e=this.containerData,i=this.canvasData,f=this.cropBoxData,s=a.viewMode,o=i.aspectRatio,h=this.cropped&&f,r,u,y,c,l;n&&(r=Number(a.minCanvasWidth)||0,u=Number(a.minCanvasHeight)||0,1<s?(r=Math.max(r,e.width),u=Math.max(u,e.height),3===s&&(r<u*o?r=u*o:u=r/o)):0<s&&(r?r=Math.max(r,h?f.width:0):u?u=Math.max(u,h?f.height:0):h&&((r=f.width)<(u=f.height)*o?r=u*o:u=r/o)),y=v({aspectRatio:o,width:r,height:u}),r=y.width,u=y.height,i.minWidth=r,i.minHeight=u,i.maxWidth=1/0,i.maxHeight=1/0);t&&((h?0:1)<s?(c=e.width-i.width,l=e.height-i.height,i.minLeft=Math.min(0,c),i.minTop=Math.min(0,l),i.maxLeft=Math.max(0,c),i.maxTop=Math.max(0,l),h&&this.limited&&(i.minLeft=Math.min(f.left,f.left+(f.width-i.width)),i.minTop=Math.min(f.top,f.top+(f.height-i.height)),i.maxLeft=f.left,i.maxTop=f.top,2===s&&(i.width>=e.width&&(i.minLeft=Math.min(0,c),i.maxLeft=Math.max(0,c)),i.height>=e.height&&(i.minTop=Math.min(0,l),i.maxTop=Math.max(0,l))))):(i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=e.width,i.maxTop=e.height))},renderCanvas:function(n,i){var r=this.canvasData,u=this.imageData;if(i){var o=function(n){var i=n.width,r=n.height,t=n.degree;if(90==(t=Math.abs(t)%180))return{width:r,height:i};var u=t%90*Math.PI/180,f=Math.sin(u),e=Math.cos(u),o=i*e+r*f,s=i*f+r*e;return 90<t?{width:s,height:o}:{width:o,height:s}}({width:u.naturalWidth*Math.abs(u.scaleX||1),height:u.naturalHeight*Math.abs(u.scaleY||1),degree:u.rotate||0}),f=o.width,e=o.height,s=r.width*(f/r.naturalWidth),h=r.height*(e/r.naturalHeight);r.left-=(s-r.width)/2;r.top-=(h-r.height)/2;r.width=s;r.height=h;r.aspectRatio=f/e;r.naturalWidth=f;r.naturalHeight=e;this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft);(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop);r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth);r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight);this.limitCanvas(!1,!0);r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft);r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop);r.oldLeft=r.left;r.oldTop=r.top;a(this.canvas,t({width:r.width,height:r.height},st({translateX:r.left,translateY:r.top})));this.renderImage(n);this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(n){var r=this.canvasData,i=this.imageData,u=i.naturalWidth*(r.width/r.naturalWidth),f=i.naturalHeight*(r.height/r.naturalHeight);t(i,{width:u,height:f,left:(r.width-u)/2,top:(r.height-f)/2});a(this.image,t({width:i.width,height:i.height},st(t({translateX:i.left,translateY:i.top},i))));n&&this.output()},initCropBox:function(){var u=this.options,i=this.canvasData,r=u.aspectRatio||u.initialAspectRatio,f=Number(u.autoCropArea)||.8,n={width:i.width,height:i.height};r&&(i.height*r>i.width?n.height=n.width/r:n.width=n.height*r);this.cropBoxData=n;this.limitCropBox(!0,!0);n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth);n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight);n.width=Math.max(n.minWidth,n.width*f);n.height=Math.max(n.minHeight,n.height*f);n.left=i.left+(i.width-n.width)/2;n.top=i.top+(i.height-n.height)/2;n.oldLeft=n.left;n.oldTop=n.top;this.initialCropBoxData=t({},n)},limitCropBox:function(n,t){var c=this.options,u=this.containerData,r=this.canvasData,i=this.cropBoxData,l=this.limited,o=c.aspectRatio;if(n){var f=Number(c.minCropBoxWidth)||0,e=Number(c.minCropBoxHeight)||0,s=l?Math.min(u.width,r.width,r.width+r.left,u.width-r.left):u.width,h=l?Math.min(u.height,r.height,r.height+r.top,u.height-r.top):u.height;f=Math.min(f,u.width);e=Math.min(e,u.height);o&&(f&&e?f<e*o?e=f/o:f=e*o:f?e=f/o:e&&(f=e*o),s<h*o?h=s/o:s=h*o);i.minWidth=Math.min(f,s);i.minHeight=Math.min(e,h);i.maxWidth=s;i.maxHeight=h}t&&(l?(i.minLeft=Math.max(0,r.left),i.minTop=Math.max(0,r.top),i.maxLeft=Math.min(u.width,r.left+r.width)-i.width,i.maxTop=Math.min(u.height,r.top+r.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=u.width-i.width,i.maxTop=u.height-i.height))},renderCropBox:function(){var i=this.options,r=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft);(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop);n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth);n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight);this.limitCropBox(!1,!0);n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft);n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop);n.oldLeft=n.left;n.oldTop=n.top;i.movable&&i.cropBoxMovable&&nt(this.face,et,n.width>=r.width&&n.height>=r.height?ei:at);a(this.cropBox,t({width:n.width,height:n.height},st({translateX:n.left,translateY:n.top})));this.cropped&&this.limited&&this.limitCanvas(!0,!0);this.disabled||this.output()},output:function(){this.preview();tt(this.element,wt,this.getData())}},iu={initPreview:function(){var t=this.crossOrigin,n=this.options.preview,f=t?this.crossOriginUrl:this.url,i=document.createElement("img"),u;(t&&(i.crossOrigin=t),i.src=f,this.viewBox.appendChild(i),this.viewBoxImage=i,n)&&(u=n,"string"==typeof n?u=this.element.ownerDocument.querySelectorAll(n):n.querySelector&&(u=[n]),r(this.previews=u,function(n){var i=document.createElement("img");nt(n,ct,{width:n.offsetWidth,height:n.offsetHeight,html:n.innerHTML});t&&(i.crossOrigin=t);i.src=f;i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"';n.innerHTML="";n.appendChild(i)}))},resetPreview:function(){r(this.previews,function(n){var t=ot(n,ct);a(n,{width:t.width,height:t.height});n.innerHTML=t.html;nr(n,ct)})},preview:function(){var n=this.imageData,e=this.canvasData,i=this.cropBoxData,u=i.width,f=i.height,o=n.width,s=n.height,h=i.left-e.left-n.left,c=i.top-e.top-n.top;this.cropped&&!this.disabled&&(a(this.viewBoxImage,t({width:o,height:s},st(t({translateX:-h,translateY:-c},n)))),r(this.previews,function(i){var v=ot(i,ct),y=v.width,e=v.height,p=y,l=e,r=1;u&&(l=f*(r=y/u));f&&e<l&&(p=u*(r=e/f),l=e);a(i,{width:p,height:l});a(i.getElementsByTagName("img")[0],t({width:o*r,height:s*r},st(t({translateX:-h*r,translateY:-c*r},n))))}))}},ru={bind:function(){var t=this.element,n=this.options,i=this.cropper;f(n.cropstart)&&o(t,dt,n.cropstart);f(n.cropmove)&&o(t,kt,n.cropmove);f(n.cropend)&&o(t,bt,n.cropend);f(n.crop)&&o(t,wt,n.crop);f(n.zoom)&&o(t,gt,n.zoom);o(i,vi,this.onCropStart=this.cropStart.bind(this));n.zoomable&&n.zoomOnWheel&&o(i,ki,this.onWheel=this.wheel.bind(this));n.toggleDragModeOnDblclick&&o(i,ai,this.onDblclick=this.dblclick.bind(this));o(t.ownerDocument,yi,this.onCropMove=this.cropMove.bind(this));o(t.ownerDocument,pi,this.onCropEnd=this.cropEnd.bind(this));n.responsive&&o(window,bi,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,n=this.options,i=this.cropper;f(n.cropstart)&&h(t,dt,n.cropstart);f(n.cropmove)&&h(t,kt,n.cropmove);f(n.cropend)&&h(t,bt,n.cropend);f(n.crop)&&h(t,wt,n.crop);f(n.zoom)&&h(t,gt,n.zoom);h(i,vi,this.onCropStart);n.zoomable&&n.zoomOnWheel&&h(i,ki,this.onWheel);n.toggleDragModeOnDblclick&&h(i,ai,this.onDblclick);h(t.ownerDocument,yi,this.onCropMove);h(t.ownerDocument,pi,this.onCropEnd);n.responsive&&h(window,bi,this.onResize)}},uu={resize:function(){var n=this.options,e=this.container,t=this.containerData,o=Number(n.minContainerWidth)||200,s=Number(n.minContainerHeight)||100,i,u,f;this.disabled||t.width<=o||t.height<=s||(i=e.offsetWidth/t.width,(1!==i||e.offsetHeight!==t.height)&&(u=void 0,f=void 0,n.restore&&(u=this.getCanvasData(),f=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(r(u,function(n,t){u[t]=n*i})),this.setCropBoxData(r(f,function(n,t){f[t]=n*i})))))},dblclick:function(){var n,t;this.disabled||this.options.dragMode===li||this.setDragMode((n=this.dragBox,t=vt,(n.classList?n.classList.contains(t):-1<n.className.indexOf(t))?ci:pt))},wheel:function(n){var i=this,r=Number(this.options.wheelZoomRatio)||.1,t=1;this.disabled||(n.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),n.deltaY?t=0<n.deltaY?1:-1:n.wheelDelta?t=-n.wheelDelta/120:n.detail&&(t=0<n.detail?1:-1),this.zoom(-t*r,n)))},cropStart:function(n){if(!this.disabled){var f=this.options,i=this.pointers,t=void 0;n.changedTouches?r(n.changedTouches,function(n){i[n.identifier]=lt(n)}):i[n.pointerId||0]=lt(n);t=1<Object.keys(i).length&&f.zoomable&&f.zoomOnTouch?oi:ot(n.target,et);or.test(t)&&!1!==tt(this.element,dt,{originalEvent:n,action:t})&&(n.preventDefault(),this.action=t,this.cropping=!1,t===fi&&(this.cropping=!0,u(this.dragBox,ht)))}},cropMove:function(n){var u=this.action,i;!this.disabled&&u&&(i=this.pointers,n.preventDefault(),!1!==tt(this.element,kt,{originalEvent:n,action:u})&&(n.changedTouches?r(n.changedTouches,function(n){t(i[n.identifier],lt(n,!0))}):t(i[n.pointerId||0],lt(n,!0)),this.change(n)))},cropEnd:function(n){if(!this.disabled){var i=this.action,t=this.pointers;n.changedTouches?r(n.changedTouches,function(n){delete t[n.identifier]}):delete t[n.pointerId||0];i&&(n.preventDefault(),Object.keys(t).length||(this.action=""),this.cropping&&(this.cropping=!1,g(this.dragBox,ht,this.cropped&&this.options.modal)),tt(this.element,bt,{originalEvent:n,action:i}))}}},fu={change:function(n){var bt=this.options,st=this.canvasData,ct=this.containerData,v=this.cropBoxData,lt=this.pointers,a=this.action,h=bt.aspectRatio,s=v.left,o=v.top,u=v.width,f=v.height,ot=s+u,nt=o+f,tt=0,d=0,et=ct.width,g=ct.height,w=!0,yt=void 0;!h&&n.shiftKey&&(h=u&&f?u/f:1);this.limited&&(tt=v.minLeft,d=v.minTop,et=tt+Math.min(ct.width,st.width,st.left+st.width),g=d+Math.min(ct.height,st.height,st.top+st.height));var wt,pt,vt,ht=lt[Object.keys(lt)[0]],i={x:ht.endX-ht.startX,y:ht.endY-ht.startY},k=function(n){switch(n){case y:ot+i.x>et&&(i.x=et-ot);break;case p:s+i.x<tt&&(i.x=tt-s);break;case l:o+i.y<d&&(i.y=d-o);break;case b:nt+i.y>g&&(i.y=g-nt)}};switch(a){case at:s+=i.x;o+=i.y;break;case y:if(0<=i.x&&(et<=ot||h&&(o<=d||g<=nt))){w=!1;break}k(y);(u+=i.x)<0&&(a=p,s-=u=-u);h&&(f=u/h,o+=(v.height-f)/2);break;case l:if(i.y<=0&&(o<=d||h&&(s<=tt||et<=ot))){w=!1;break}k(l);f-=i.y;o+=i.y;f<0&&(a=b,o-=f=-f);h&&(u=f*h,s+=(v.width-u)/2);break;case p:if(i.x<=0&&(s<=tt||h&&(o<=d||g<=nt))){w=!1;break}k(p);u-=i.x;s+=i.x;u<0&&(a=y,s-=u=-u);h&&(f=u/h,o+=(v.height-f)/2);break;case b:if(0<=i.y&&(g<=nt||h&&(s<=tt||et<=ot))){w=!1;break}k(b);(f+=i.y)<0&&(a=l,o-=f=-f);h&&(u=f*h,s+=(v.width-u)/2);break;case it:if(h){if(i.y<=0&&(o<=d||et<=ot)){w=!1;break}k(l);f-=i.y;o+=i.y;u=f*h}else k(l),k(y),0<=i.x?ot<et?u+=i.x:i.y<=0&&o<=d&&(w=!1):u+=i.x,i.y<=0?d<o&&(f-=i.y,o+=i.y):(f-=i.y,o+=i.y);u<0&&f<0?(a=ft,o-=f=-f,s-=u=-u):u<0?(a=rt,s-=u=-u):f<0&&(a=ut,o-=f=-f);break;case rt:if(h){if(i.y<=0&&(o<=d||s<=tt)){w=!1;break}k(l);f-=i.y;o+=i.y;u=f*h;s+=v.width-u}else k(l),k(p),i.x<=0?tt<s?(u-=i.x,s+=i.x):i.y<=0&&o<=d&&(w=!1):(u-=i.x,s+=i.x),i.y<=0?d<o&&(f-=i.y,o+=i.y):(f-=i.y,o+=i.y);u<0&&f<0?(a=ut,o-=f=-f,s-=u=-u):u<0?(a=it,s-=u=-u):f<0&&(a=ft,o-=f=-f);break;case ft:if(h){if(i.x<=0&&(s<=tt||g<=nt)){w=!1;break}k(p);u-=i.x;s+=i.x;f=u/h}else k(b),k(p),i.x<=0?tt<s?(u-=i.x,s+=i.x):0<=i.y&&g<=nt&&(w=!1):(u-=i.x,s+=i.x),0<=i.y?nt<g&&(f+=i.y):f+=i.y;u<0&&f<0?(a=it,o-=f=-f,s-=u=-u):u<0?(a=ut,s-=u=-u):f<0&&(a=rt,o-=f=-f);break;case ut:if(h){if(0<=i.x&&(et<=ot||g<=nt)){w=!1;break}k(y);f=(u+=i.x)/h}else k(b),k(y),0<=i.x?ot<et?u+=i.x:0<=i.y&&g<=nt&&(w=!1):u+=i.x,0<=i.y?nt<g&&(f+=i.y):f+=i.y;u<0&&f<0?(a=rt,o-=f=-f,s-=u=-u):u<0?(a=ft,s-=u=-u):f<0&&(a=it,o-=f=-f);break;case ei:this.move(i.x,i.y);w=!1;break;case oi:this.zoom((pt=t({},wt=lt),vt=[],r(wt,function(n,t){delete pt[t];r(pt,function(t){var i=Math.abs(n.startX-t.startX),r=Math.abs(n.startY-t.startY),u=Math.abs(n.endX-t.endX),f=Math.abs(n.endY-t.endY),e=Math.sqrt(i*i+r*r),o=(Math.sqrt(u*u+f*f)-e)/e;vt.push(o)})}),vt.sort(function(n,t){return Math.abs(n)<Math.abs(t)}),vt[0]),n);w=!1;break;case fi:if(!i.x||!i.y){w=!1;break}yt=rr(this.cropper);s=ht.startX-yt.left;o=ht.startY-yt.top;u=v.minWidth;f=v.minHeight;0<i.x?a=0<i.y?ut:it:i.x<0&&(s-=u,a=0<i.y?ft:rt);i.y<0&&(o-=f);this.cropped||(c(this.cropBox,e),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}w&&(v.width=u,v.height=f,v.left=s,v.top=o,this.action=a,this.renderCropBox());r(lt,function(n){n.startX=n.endX;n.startY=n.endY})}},eu={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&u(this.dragBox,ht),c(this.cropBox,e),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=t({},this.initialImageData),this.canvasData=t({},this.initialCanvasData),this.cropBoxData=t({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(t(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),c(this.dragBox,ht),u(this.cropBox,e)),this},replace:function(n){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&n&&(this.isImg&&(this.element.src=n),t?(this.url=n,this.image.src=n,this.ready&&(this.viewBoxImage.src=n,r(this.previews,function(t){t.getElementsByTagName("img")[0].src=n}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(n))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,c(this.cropper,si)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,u(this.cropper,si)),this},destroy:function(){var n=this.element;return ot(n,i)&&(this.isImg&&this.replaced&&(n.src=this.originalUrl),this.uncreate(),nr(n,i)),this},move:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n,i=this.canvasData,r=i.left,u=i.top;return this.moveTo(ni(n)?n:r+Number(n),ni(t)?t:u+Number(t))},moveTo:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,u=this.canvasData,r=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(n(t)&&(u.left=t,r=!0),n(i)&&(u.top=i,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(n,t){var i=this.canvasData;return n=(n=Number(n))<0?1/(1-n):1+n,this.zoomTo(i.width*n/i.naturalWidth,null,t)},zoomTo:function(t,i,u){var l,a,c,b=this.options,f=this.canvasData,e=f.width,o=f.height,y=f.naturalWidth,d=f.naturalHeight,s,h;if(0<=(t=Number(t))&&this.ready&&!this.disabled&&b.zoomable){if(s=y*t,h=d*t,!1===tt(this.element,gt,{ratio:t,oldRatio:e/y,originalEvent:u}))return this;if(u){var v=this.pointers,p=rr(this.cropper),w=v&&Object.keys(v).length?(c=a=l=0,r(v,function(n){var t=n.startX,i=n.startY;l+=t;a+=i;c+=1}),{pageX:l/=c,pageY:a/=c}):{pageX:u.pageX,pageY:u.pageY};f.left-=(s-e)*((w.pageX-p.left-f.left)/e);f.top-=(h-o)*((w.pageY-p.top-f.top)/o)}else k(i)&&n(i.x)&&n(i.y)?(f.left-=(s-e)*((i.x-f.left)/e),f.top-=(h-o)*((i.y-f.top)/o)):(f.left-=(s-e)/2,f.top-=(h-o)/2);f.width=s;f.height=h;this.renderCanvas(!0)}return this},rotate:function(n){return this.rotateTo((this.imageData.rotate||0)+Number(n))},rotateTo:function(t){return n(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,n(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(n(i)?i:1,t)},scale:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,u=this.imageData,r=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(n(t)&&(u.scaleX=t,r=!0),n(i)&&(u.scaleY=i,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var h=0<arguments.length&&void 0!==arguments[0]&&arguments[0],u=this.options,t=this.imageData,f=this.canvasData,i=this.cropBoxData,n=void 0,e,o,s;return this.ready&&this.cropped?(n={x:i.left-f.left,y:i.top-f.top,width:i.width,height:i.height},e=t.width/t.naturalWidth,(r(n,function(t,i){n[i]=t/e}),h)&&(o=Math.round(n.y+n.height),s=Math.round(n.x+n.width),n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=s-n.x,n.height=o-n.y)):n={x:0,y:0,width:0,height:0},u.rotatable&&(n.rotate=t.rotate||0),u.scalable&&(n.scaleX=t.scaleX||1,n.scaleY=t.scaleY||1),n},setData:function(t){var e=this.options,i=this.imageData,o=this.canvasData,r={},u,f;return this.ready&&!this.disabled&&k(t)&&(u=!1,e.rotatable&&n(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,u=!0),e.scalable&&(n(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,u=!0),n(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,u=!0)),u&&this.renderCanvas(!0,!0),f=i.width/i.naturalWidth,n(t.x)&&(r.left=t.x*f+o.left),n(t.y)&&(r.top=t.y*f+o.top),n(t.width)&&(r.width=t.width*f),n(t.height)&&(r.height=t.height*f),this.setCropBoxData(r)),this},getContainerData:function(){return this.ready?t({},this.containerData):{}},getImageData:function(){return this.sized?t({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,n={};return this.ready&&r(["left","top","width","height","naturalWidth","naturalHeight"],function(i){n[i]=t[i]}),n},setCanvasData:function(t){var i=this.canvasData,r=i.aspectRatio;return this.ready&&!this.disabled&&k(t)&&(n(t.left)&&(i.left=t.left),n(t.top)&&(i.top=t.top),n(t.width)?(i.width=t.width,i.height=t.width/r):n(t.height)&&(i.height=t.height,i.width=t.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var n=this.cropBoxData,t=void 0;return this.ready&&this.cropped&&(t={left:n.left,top:n.top,width:n.width,height:n.height}),t||{}},setCropBoxData:function(t){var i=this.cropBoxData,r=this.options.aspectRatio,u=void 0,f=void 0;return this.ready&&this.cropped&&!this.disabled&&k(t)&&(n(t.left)&&(i.left=t.left),n(t.top)&&(i.top=t.top),n(t.width)&&t.width!==i.width&&(u=!0,i.width=t.width),n(t.height)&&t.height!==i.height&&(f=!0,i.height=t.height),r&&(u?i.height=i.width/r:f&&(i.width=i.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},vi,e,g,u,ht,yi,pi,ct,wi,lt,bi,at,ki,vt,di,nr,yt,tr,pt,ir,wt,rr,bt,kt,dt,gt,ni,ti,ii,ri,l,n,ui,fi,nt,tt,ei,oi,si,hi,ur,ci,f,y,h,ai,k;if(!this.ready||!window.HTMLCanvasElement)return null;if(ci=this.canvasData,f=(vi=this.image,e=this.imageData,g=ci,u=t,ht=e.aspectRatio,yi=e.naturalWidth,pi=e.naturalHeight,ct=e.rotate,wi=void 0===ct?0:ct,lt=e.scaleX,bi=void 0===lt?1:lt,at=e.scaleY,ki=void 0===at?1:at,vt=g.aspectRatio,di=g.naturalWidth,nr=g.naturalHeight,yt=u.fillColor,tr=void 0===yt?"transparent":yt,pt=u.imageSmoothingEnabled,ir=void 0===pt||pt,wt=u.imageSmoothingQuality,rr=void 0===wt?"low":wt,bt=u.maxWidth,kt=void 0===bt?1/0:bt,dt=u.maxHeight,gt=void 0===dt?1/0:dt,ni=u.minWidth,ti=void 0===ni?0:ni,ii=u.minHeight,ri=void 0===ii?0:ii,l=document.createElement("canvas"),n=l.getContext("2d"),ui=v({aspectRatio:vt,width:kt,height:gt}),fi=v({aspectRatio:vt,width:ti,height:ri},"cover"),nt=Math.min(ui.width,Math.max(fi.width,di)),tt=Math.min(ui.height,Math.max(fi.height,nr)),ei=v({aspectRatio:ht,width:kt,height:gt}),oi=v({aspectRatio:ht,width:ti,height:ri},"cover"),si=Math.min(ei.width,Math.max(oi.width,yi)),hi=Math.min(ei.height,Math.max(oi.height,pi)),ur=[-si/2,-hi/2,si,hi],l.width=d(nt),l.height=d(tt),n.fillStyle=tr,n.fillRect(0,0,nt,tt),n.save(),n.translate(nt/2,tt/2),n.rotate(wi*Math.PI/180),n.scale(bi,ki),n.imageSmoothingEnabled=ir,n.imageSmoothingQuality=rr,n.drawImage.apply(n,[vi].concat(gi(ur.map(function(n){return Math.floor(d(n))})))),n.restore(),l),!this.cropped)return f;var it=this.getData(),fr=it.x,er=it.y,o=it.width,c=it.height,s=f.width/Math.floor(ci.naturalWidth);1!==s&&(fr*=s,er*=s,o*=s,c*=s);var li=o/c,or=v({aspectRatio:li,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),sr=v({aspectRatio:li,width:t.minWidth||0,height:t.minHeight||0},"cover"),hr=v({aspectRatio:li,width:t.width||(1!==s?f.width:o),height:t.height||(1!==s?f.height:c)}),a=hr.width,rt=hr.height;a=Math.min(or.width,Math.max(sr.width,a));rt=Math.min(or.height,Math.max(sr.height,rt));y=document.createElement("canvas");h=y.getContext("2d");y.width=d(a);y.height=d(rt);h.fillStyle=t.fillColor||"transparent";h.fillRect(0,0,a,rt);var cr=t.imageSmoothingEnabled,ar=void 0===cr||cr,lr=t.imageSmoothingQuality;h.imageSmoothingEnabled=ar;lr&&(h.imageSmoothingQuality=lr);var ut=f.width,ft=f.height,i=fr,r=er,p=void 0,et=void 0,ot=void 0,st=void 0,w=void 0,b=void 0;return i<=-o||ut<i?w=ot=p=i=0:i<=0?(ot=-i,i=0,w=p=Math.min(ut,o+i)):i<=ut&&(ot=0,w=p=Math.min(o,ut-i)),p<=0||r<=-c||ft<r?b=st=et=r=0:r<=0?(st=-r,r=0,b=et=Math.min(ft,c+r)):r<=ft&&(st=0,b=et=Math.min(c,ft-r)),ai=[i,r,p,et],0<w&&0<b&&(k=a/o,ai.push(ot*k,st*k,w*k,b*k)),h.drawImage.apply(h,[f].concat(gi(ai.map(function(n){return Math.floor(d(n))})))),y},setAspectRatio:function(n){var t=this.options;return this.disabled||ni(n)||(t.aspectRatio=Math.max(0,n)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(n){var r=this.options,u=this.dragBox,f=this.face,t,i;return this.ready&&!this.disabled&&(t=n===pt,i=r.movable&&n===ci,n=t||i?n:li,r.dragMode=n,nt(u,et,n),g(u,vt,t),g(u,yt,i),r.cropBoxMovable||(nt(f,et,n),g(f,vt,t),g(f,yt,i))),this}},ou=s.Cropper,er=function(){function n(i){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n),!i||!cr.test(i.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=i;this.options=t({},di,k(r)&&r);this.cropped=!1;this.disabled=!1;this.pointers={};this.ready=!1;this.reloading=!1;this.replaced=!1;this.sized=!1;this.sizing=!1;this.init()}return ar(n,[{key:"init",value:function(){var n=this.element,r=n.tagName.toLowerCase(),t=void 0;if(!ot(n,i)){if(nt(n,i,this),"img"===r){if(this.isImg=!0,t=n.getAttribute("src")||"",!(this.originalUrl=t))return;t=n.src}else"canvas"===r&&window.HTMLCanvasElement&&(t=n.toDataURL());this.load(t)}}},{key:"load",value:function(n){var f=this,e,i,h,o,s,c,t,u;n&&(this.url=n,this.imageData={},e=this.element,i=this.options,(i.rotatable||i.scalable||(i.checkOrientation=!1),i.checkOrientation&&window.ArrayBuffer)?sr.test(n)?hr.test(n)?this.read((h=n.replace(gr,""),o=atob(h),s=new ArrayBuffer(o.length),r(c=new Uint8Array(s),function(n,t){c[t]=o.charCodeAt(t)}),s)):this.clone():(t=new XMLHttpRequest,this.reloading=!0,this.xhr=t,u=function(){f.reloading=!1;f.xhr=null},t.ontimeout=u,t.onabort=u,t.onerror=function(){u();f.clone()},t.onload=function(){u();f.read(t.response)},i.checkCrossOrigin&&ur(n)&&e.crossOrigin&&(n=fr(n)),t.open("get",n),t.responseType="arraybuffer",t.withCredentials="use-credentials"===e.crossOrigin,t.send()):this.clone())}},{key:"read",value:function(n){var o,t,i,s=this.options,e=this.imageData,h=nu(n),c=0,l=1,a=1,u;1<h&&(this.url=(o="image/jpeg",t=new Uint8Array(n),i="",f(t.forEach)?t.forEach(function(n){i+=ri(n)}):r(t,function(n){i+=ri(n)}),"data:"+o+";base64,"+btoa(i)),u=function(n){var t=0,i=1,r=1;switch(n){case 2:i=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90;r=-1;break;case 6:t=90;break;case 7:t=90;i=-1;break;case 8:t=-90}return{rotate:t,scaleX:i,scaleY:r}}(h),c=u.rotate,l=u.scaleX,a=u.scaleY);s.rotatable&&(e.rotate=c);s.scalable&&(e.scaleX=l,e.scaleY=a);this.clone()}},{key:"clone",value:function(){var f=this.element,i=this.url,t=void 0,r=void 0,n;this.options.checkCrossOrigin&&ur(i)&&((t=f.crossOrigin)?r=i:(t="anonymous",r=fr(i)));this.crossOrigin=t;this.crossOriginUrl=r;n=document.createElement("img");t&&(n.crossOrigin=t);n.src=r||i;(this.image=n).onload=this.start.bind(this);n.onerror=this.stop.bind(this);u(n,hi);f.parentNode.insertBefore(n,f.nextSibling)}},{key:"start",value:function(){var r=this,i=this.isImg?this.element:this.image,u,f,n,e;i.onload=null;i.onerror=null;this.sizing=!0;u=s.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(s.navigator.userAgent);f=function(n,i){t(r.imageData,{naturalWidth:n,naturalHeight:i,aspectRatio:n/i});r.sizing=!1;r.sized=!0;r.build()};!i.naturalWidth||u?(n=document.createElement("img"),e=document.body||document.documentElement,(this.sizingImage=n).onload=function(){f(n.width,n.height);u||e.removeChild(n)},n.src=i.src,u||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",e.appendChild(n))):f(i.naturalWidth,i.naturalHeight)}},{key:"stop",value:function(){var n=this.image;n.onload=null;n.onerror=null;n.parentNode.removeChild(n);this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var s=this.element,n=this.options,l=this.image,a=s.parentNode,v=document.createElement("div");v.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"><\/div><\/div><div class="cropper-drag-box"><\/div><div class="cropper-crop-box"><span class="cropper-view-box"><\/span><span class="cropper-dashed dashed-h"><\/span><span class="cropper-dashed dashed-v"><\/span><span class="cropper-center"><\/span><span class="cropper-face"><\/span><span class="cropper-line line-e" data-cropper-action="e"><\/span><span class="cropper-line line-n" data-cropper-action="n"><\/span><span class="cropper-line line-w" data-cropper-action="w"><\/span><span class="cropper-line line-s" data-cropper-action="s"><\/span><span class="cropper-point point-e" data-cropper-action="e"><\/span><span class="cropper-point point-n" data-cropper-action="n"><\/span><span class="cropper-point point-w" data-cropper-action="w"><\/span><span class="cropper-point point-s" data-cropper-action="s"><\/span><span class="cropper-point point-ne" data-cropper-action="ne"><\/span><span class="cropper-point point-nw" data-cropper-action="nw"><\/span><span class="cropper-point point-sw" data-cropper-action="sw"><\/span><span class="cropper-point point-se" data-cropper-action="se"><\/span><\/div><\/div>';var t=v.querySelector("."+i+"-container"),y=t.querySelector("."+i+"-canvas"),p=t.querySelector("."+i+"-drag-box"),r=t.querySelector("."+i+"-crop-box"),h=r.querySelector("."+i+"-face");this.container=a;this.cropper=t;this.canvas=y;this.dragBox=p;this.cropBox=r;this.viewBox=t.querySelector("."+i+"-view-box");this.face=h;y.appendChild(l);u(s,e);a.insertBefore(t,s.nextSibling);this.isImg||c(l,hi);this.initPreview();this.bind();n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN;n.aspectRatio=Math.max(0,n.aspectRatio)||NaN;n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0;u(r,e);n.guides||u(r.getElementsByClassName(i+"-dashed"),e);n.center||u(r.getElementsByClassName(i+"-center"),e);n.background&&u(t,i+"-bg");n.highlight||u(h,"cropper-invisible");n.cropBoxMovable&&(u(h,yt),nt(h,et,at));n.cropBoxResizable||(u(r.getElementsByClassName(i+"-line"),e),u(r.getElementsByClassName(i+"-point"),e));this.render();this.ready=!0;this.setDragMode(n.dragMode);n.autoCrop&&this.crop();this.setData(n.data);f(n.ready)&&o(s,wi,n.ready,{once:!0});tt(s,wi)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),c(this.element,e))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?this.xhr.abort():this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ou,n}},{key:"setDefaults",value:function(n){t(di,k(n)&&n)}}]),n}();return t(er.prototype,tu,iu,ru,uu,fu,eu),er});window.addEventListener("DOMContentLoaded",function(){var i=document.getElementById("image"),r=document.getElementById("FileInput"),u=$(".alert"),t=$("#modal"),f=document.getElementById("PictureSource"),n;$('[data-toggle="tooltip"]').tooltip();r.addEventListener("change",function(n){var e=n.target.files,s=function(n){r.value="";i.src=n;u.hide();t.modal("show")},f,o;e&&e.length>0&&(o=e[0],URL?s(URL.createObjectURL(o)):FileReader&&(f=new FileReader,f.onload=function(){s(f.result)},f.readAsDataURL(o)))});t.on("shown.bs.modal",function(){n=new Cropper(i,{aspectRatio:17/9,viewMode:4})}).on("hidden.bs.modal",function(){n.destroy();n=null});document.getElementById("crop").addEventListener("click",function(){var i;t.modal("hide");n&&(i=n.getCroppedCanvas({width:680,height:360}),f.value=i.toDataURL().replace(/^data:image\/(png|jpg|jpeg);base64,/,""))})});