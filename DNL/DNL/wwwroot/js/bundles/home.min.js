$("#recipeCarousel").carousel({interval:1e7});$("#news-carousel .carousel .carousel-item").each(function(){var n=$(this).next(),t;for(n.length||(n=$(this).siblings(":first")),n.children(":first-child").clone().appendTo($(this)),t=0;t<2;t++)n=n.next(),n.length||(n=$(this).siblings(":first")),n.children(":first-child").clone().appendTo($(this))});!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){"use strict";function hu(n){return vu(yu(au(n),8*n.length))}function cu(n){for(var t,r=et?"0123456789ABCDEF":"0123456789abcdef",u="",i=0;i<n.length;i++)t=n.charCodeAt(i),u+=r.charAt(t>>>4&15)+r.charAt(15&t);return u}function lu(n){for(var t,u,i="",r=-1;++r<n.length;)t=n.charCodeAt(r),u=r+1<n.length?n.charCodeAt(r+1):0,55296<=t&&t<=56319&&56320<=u&&u<=57343&&(t=65536+((1023&t)<<10)+(1023&u),r++),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}function au(n){for(var i=new Array(n.length>>2),t=0;t<i.length;t++)i[t]=0;for(t=0;t<8*n.length;t+=8)i[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return i}function vu(n){for(var i="",t=0;t<32*n.length;t+=8)i+=String.fromCharCode(n[t>>5]>>>t%32&255);return i}function yu(n,t){n[t>>5]|=128<<t%32;n[14+(t+64>>>9<<4)]=t;for(var r=1732584193,i=-271733879,s=-1732584194,h=271733878,c=0;c<n.length;c+=16){var l=r,a=i,y=s,p=h;i=o(i=o(i=o(i=o(i=e(i=e(i=e(i=e(i=f(i=f(i=f(i=f(i=u(i=u(i=u(i=u(i,s=u(s,h=u(h,r=u(r,i,s,h,n[c],7,-680876936),i,s,n[c+1],12,-389564586),r,i,n[c+2],17,606105819),h,r,n[c+3],22,-1044525330),s=u(s,h=u(h,r=u(r,i,s,h,n[c+4],7,-176418897),i,s,n[c+5],12,1200080426),r,i,n[c+6],17,-1473231341),h,r,n[c+7],22,-45705983),s=u(s,h=u(h,r=u(r,i,s,h,n[c+8],7,1770035416),i,s,n[c+9],12,-1958414417),r,i,n[c+10],17,-42063),h,r,n[c+11],22,-1990404162),s=u(s,h=u(h,r=u(r,i,s,h,n[c+12],7,1804603682),i,s,n[c+13],12,-40341101),r,i,n[c+14],17,-1502002290),h,r,n[c+15],22,1236535329),s=f(s,h=f(h,r=f(r,i,s,h,n[c+1],5,-165796510),i,s,n[c+6],9,-1069501632),r,i,n[c+11],14,643717713),h,r,n[c],20,-373897302),s=f(s,h=f(h,r=f(r,i,s,h,n[c+5],5,-701558691),i,s,n[c+10],9,38016083),r,i,n[c+15],14,-660478335),h,r,n[c+4],20,-405537848),s=f(s,h=f(h,r=f(r,i,s,h,n[c+9],5,568446438),i,s,n[c+14],9,-1019803690),r,i,n[c+3],14,-187363961),h,r,n[c+8],20,1163531501),s=f(s,h=f(h,r=f(r,i,s,h,n[c+13],5,-1444681467),i,s,n[c+2],9,-51403784),r,i,n[c+7],14,1735328473),h,r,n[c+12],20,-1926607734),s=e(s,h=e(h,r=e(r,i,s,h,n[c+5],4,-378558),i,s,n[c+8],11,-2022574463),r,i,n[c+11],16,1839030562),h,r,n[c+14],23,-35309556),s=e(s,h=e(h,r=e(r,i,s,h,n[c+1],4,-1530992060),i,s,n[c+4],11,1272893353),r,i,n[c+7],16,-155497632),h,r,n[c+10],23,-1094730640),s=e(s,h=e(h,r=e(r,i,s,h,n[c+13],4,681279174),i,s,n[c],11,-358537222),r,i,n[c+3],16,-722521979),h,r,n[c+6],23,76029189),s=e(s,h=e(h,r=e(r,i,s,h,n[c+9],4,-640364487),i,s,n[c+12],11,-421815835),r,i,n[c+15],16,530742520),h,r,n[c+2],23,-995338651),s=o(s,h=o(h,r=o(r,i,s,h,n[c],6,-198630844),i,s,n[c+7],10,1126891415),r,i,n[c+14],15,-1416354905),h,r,n[c+5],21,-57434055),s=o(s,h=o(h,r=o(r,i,s,h,n[c+12],6,1700485571),i,s,n[c+3],10,-1894986606),r,i,n[c+10],15,-1051523),h,r,n[c+1],21,-2054922799),s=o(s,h=o(h,r=o(r,i,s,h,n[c+8],6,1873313359),i,s,n[c+15],10,-30611744),r,i,n[c+6],15,-1560198380),h,r,n[c+13],21,1309151649),s=o(s,h=o(h,r=o(r,i,s,h,n[c+4],6,-145523070),i,s,n[c+11],10,-1120210379),r,i,n[c+2],15,718787259),h,r,n[c+9],21,-343485551);r=v(r,l);i=v(i,a);s=v(s,y);h=v(h,p)}return[r,i,s,h]}function p(n,t,i,r,u,f){return v((e=v(v(t,n),v(r,f)))<<(o=u)|e>>>32-o,i);var e,o}function u(n,t,i,r,u,f,e){return p(t&i|~t&r,n,t,u,f,e)}function f(n,t,i,r,u,f,e){return p(t&r|i&~r,n,t,u,f,e)}function e(n,t,i,r,u,f,e){return p(t^i^r,n,t,u,f,e)}function o(n,t,i,r,u,f,e){return p(i^(t|~r),n,t,u,f,e)}function v(n,t){var i=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(i>>16)<<16|65535&i}function g(n){var e,i=n||window.event,c=pu.call(arguments,1),f=0,u=0,r=0,l=0,v=0,o,s,h;if((n=t.event.fix(i)).type="mousewheel","detail"in i&&(r=-1*i.detail),"wheelDelta"in i&&(r=i.wheelDelta),"wheelDeltaY"in i&&(r=i.wheelDeltaY),"wheelDeltaX"in i&&(u=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(u=-1*r,r=0),f=0===r?u:r,"deltaY"in i&&(f=r=-1*i.deltaY),"deltaX"in i&&(u=i.deltaX,0===r&&(f=-1*u)),0!==r||0!==u)return 1===i.deltaMode?(o=t.data(this,"mousewheel-line-height"),f*=o,r*=o,u*=o):2===i.deltaMode&&(s=t.data(this,"mousewheel-page-height"),f*=s,r*=s,u*=s),(e=Math.max(Math.abs(r),Math.abs(u)),(!a||e<a)&&(a=e,st(i,e)&&(a/=40)),st(i,e)&&(f/=40,u/=40,r/=40),f=Math[f>=1?"floor":"ceil"](f/a),u=Math[u>=1?"floor":"ceil"](u/a),r=Math[r>=1?"floor":"ceil"](r/a),t.event.special.mousewheel.settings.normalizeOffset&&this.getBoundingClientRect)&&(h=this.getBoundingClientRect(),l=n.clientX-h.left,v=n.clientY-h.top),n.deltaX=u,n.deltaY=r,n.deltaFactor=a,n.offsetX=l,n.offsetY=v,n.deltaMode=0,c.unshift(n,f,u,r),k&&clearTimeout(k),k=setTimeout(wu,200),(t.event.dispatch||t.event.handle).apply(this,c)}function wu(){a=null}function st(n,i){return t.event.special.mousewheel.settings.adjustOldDeltas&&"mousewheel"===n.type&&i%120==0}var t=n,y,i,c,h,l,et,d,at,vt,r,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,di,gi,nr,tr,ir,rr,ur,fr,er,or,sr,hr,cr,lr,ar,vr,yr,pr,wr,br,kr,dr,gr,nu,tu,iu,ru,uu,s,fu,eu,ou,su;if(void 0===n)throw new Error("Metro 4 requires jQuery!");if("MutationObserver"in window==!1)throw new Error("Metro 4 requires MutationObserver!");var nt=t("meta[name='metro4:init']").attr("content"),tt=t("meta[name='metro4:locale']").attr("content"),it=t("meta[name='metro4:week_start']").attr("content"),rt=t("meta[name='metro4:animation_duration']").attr("content"),ut=t("meta[name='metro4:callback_timeout']").attr("content"),ft=t("meta[name='metro4:timeout']").attr("content");void 0===window.METRO_INIT&&(window.METRO_INIT=void 0===nt||JSON.parse(nt));void 0===window.METRO_DEBUG&&(window.METRO_DEBUG=!0);void 0===window.METRO_WEEK_START&&(window.METRO_WEEK_START=void 0!==it?parseInt(it):1);void 0===window.METRO_LOCALE&&(window.METRO_LOCALE=void 0!==tt?tt:"en-US");void 0===window.METRO_ANIMATION_DURATION&&(window.METRO_ANIMATION_DURATION=void 0!==rt?parseInt(rt):300);void 0===window.METRO_CALLBACK_TIMEOUT&&(window.METRO_CALLBACK_TIMEOUT=void 0!==ut?parseInt(ut):500);void 0===window.METRO_TIMEOUT&&(window.METRO_TIMEOUT=void 0!==ft?parseInt(ft):2e3);void 0===window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE&&(window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE=!0);void 0===window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS&&(window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS=!0);void 0===window.METRO_HOTKEYS_FILTER_TEXT_INPUTS&&(window.METRO_HOTKEYS_FILTER_TEXT_INPUTS=!0);void 0===window.METRO_HOTKEYS_BUBBLE_UP&&(window.METRO_HOTKEYS_BUBBLE_UP=!1);void 0===window.METRO_THROWS&&(window.METRO_THROWS=!0);window.METRO_MEDIA=[];"function"!=typeof Object.create&&(Object.create=function(n){function t(){}return t.prototype=n,new t});"function"!=typeof Object.values&&(Object.values=function(n){return Object.keys(n).map(function(t){return n[t]})});y="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;i={version:"4.2.11",versionFull:"4.2.11.687 ",isTouchable:y,fullScreenEnabled:document.fullscreenEnabled,sheet:null,controlsPosition:{INSIDE:"inside",OUTSIDE:"outside"},groupMode:{ONE:"one",MULTI:"multi"},aspectRatio:{HD:"hd",SD:"sd",CINEMA:"cinema"},fullScreenMode:{WINDOW:"window",DESKTOP:"desktop"},position:{TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",TOP_RIGHT:"top-right",TOP_LEFT:"top-left",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",LEFT_BOTTOM:"left-bottom",LEFT_TOP:"left-top",RIGHT_TOP:"right-top",RIGHT_BOTTOM:"right-bottom"},popoverEvents:{CLICK:"click",HOVER:"hover",FOCUS:"focus"},stepperView:{SQUARE:"square",CYCLE:"cycle",DIAMOND:"diamond"},listView:{LIST:"list",CONTENT:"content",ICONS:"icons",ICONS_MEDIUM:"icons-medium",ICONS_LARGE:"icons-large",TILES:"tiles",TABLE:"table"},events:{click:"click.metro",start:"touchstart.metro mousedown.metro",stop:"touchend.metro mouseup.metro",move:"touchmove.metro mousemove.metro",enter:"touchstart.metro mouseenter.metro",leave:"touchend.metro mouseleave.metro",focus:"focus.metro",blur:"blur.metro",resize:"resize.metro",keyup:"keyup.metro",keydown:"keydown.metro",dblclick:"dblclick.metro",input:"input.metro",change:"change.metro",cut:"cut.metro",paste:"paste.metro",drop:"drop.metro",scroll:"scroll.metro",scrollStart:"scrollstart.metro",scrollStop:"scrollstop.metro",mousewheel:"mousewheel.metro",inputchange:"change.metro input.metro propertychange.metro cut.metro paste.metro copy.metro"},media_queries:{FS:"(min-width: 0px)",SM:"(min-width: 576px)",MD:"(min-width: 768px)",LG:"(min-width: 992px)",XL:"(min-width: 1200px)",XXL:"(min-width: 1452px)"},media_sizes:{FS:0,SM:576,MD:768,LG:992,XL:1200,XXL:1452},media_mode:{FS:"fs",SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},actions:{REMOVE:1,HIDE:2},hotkeys:[],about:function(n){console.log("Metro 4 Components Library - v"+(!0===n?this.versionFull:this.version))},aboutDlg:function(n){alert("Metro 4 Components Library - v"+(!0===n?this.versionFull:this.version))},ver:function(n){return!0===n?this.versionFull:this.version},observe:function(){new MutationObserver(function(n){n.map(function(n){var u,f,s;if("attributes"===n.type&&"data-role"!==n.attributeName)u=t(n.target),f=u.data("metroComponent"),void 0!==f&&t.each(f,function(){var t=u.data(this);t&&t.changeAttribute(n.attributeName)});else if("childList"===n.type&&n.addedNodes.length>0)for(var e,h={},o={},c=n.addedNodes,r=0;r<c.length;r++){if(s=n.addedNodes[r],"SCRIPT"===s.tagName||"STYLE"===s.tagName)return;o=(e=t(n.addedNodes[r])).find("[data-role]");(h=void 0!==e.data("role")?t.merge(o,e):o).length&&i.initWidgets(h)}})}).observe(t("html")[0],{childList:!0,attributes:!0,subtree:!0})},init:function(){var u=t("[data-role]"),f=t("[data-hotkey]"),n=t("html");return!0===y?n.addClass("metro-touch-device"):n.addClass("metro-no-touch-device"),this.sheet=r.newCssSheet(),this.observe(),this.initHotkeys(f),this.initWidgets(u),window.METRO_MEDIA=[],t.each(i.media_queries,function(n,t){r.media(t)&&METRO_MEDIA.push(i.media_mode[n])}),this.about(!0),this},initHotkeys:function(n){t.each(n,function(){var n=t(this),r=!!n.data("hotkey")&&n.data("hotkey").toLowerCase();!1!==r&&!0!==n.data("hotKeyBonded")&&(i.hotkeys.push(r),t(document).on(i.events.keyup,null,r,function(){if(void 0!==n)return"A"===n[0].tagName&&void 0!==n.attr("href")&&""!==n.attr("href").trim()&&"#"!==n.attr("href").trim()?document.location.href=n.attr("href"):n.click(),METRO_HOTKEYS_BUBBLE_UP}),n.data("hotKeyBonded",!0))})},initWidgets:function(n){t.each(n,function(){var n=t(this);n.data("role").split(/\s*,\s*/).map(function(i){try{if(void 0!==t.fn[i]&&void 0===n.data(i)){t.fn[i].call(n);n.data(i+"-initiated",!0);var r=n.data("metroComponent");void 0===r?r=[i]:r.push(i);n.data("metroComponent",r)}}catch(n){console.log(n.message,n.stack)}})})},plugin:function(n,i){t.fn[n]=function(r){return this.each(function(){t.data(this,n,Object.create(i).init(r,this))})}},destroyPlugin:function(n,i){var u,f;n=r.isJQueryObject(n)?n[0]:n;u=t(n).data(i);r.isFunc(u.destroy)&&u.destroy();f=t(n).data("metroComponent");r.arrayDelete(f,i);t(n).data("metroComponent",f);t.removeData(n,i)},destroyPluginAll:function(n){n=r.isJQueryObject(n)?n[0]:n;var u=t(n).data("metroComponent");void 0!==u&&u.length>0&&t.each(u,function(){i.destroyPlugin(n,this)})},initPlugin:function(n,i){n=t(n);try{if(void 0!==t.fn[i]){t.fn[i].call(n);n.data(i+"-initiated",!0);var r=n.data("metroComponent");void 0===r?r=[i]:r.push(i);n.data("metroComponent",r)}}catch(n){console.log(n.message,n.stack)}},reinitPlugin:function(n,t){this.destroyPlugin(n,t);this.initPlugin(n,t)},reinitPluginAll:function(n){var r=t(n).data("metroComponent");void 0!==r&&r.length>0&&t.each(r,function(){i.reinitPlugin(n,this)})},noop:function(){},noop_true:function(){return!0},noop_false:function(){return!1},stop:function(n){n.stopPropagation();n.preventDefault()},requestFullScreen:function(n){n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.msRequestFullscreen?n.msRequestFullscreen():n.requestFullscreen()},exitFullScreen:function(){document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.exitFullscreen()},inFullScreen:function(){return void 0!==(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}};window.Metro=i;t(window).on(i.events.resize,function(){window.METRO_MEDIA=[];t.each(i.media_queries,function(n,t){r.media(t)&&METRO_MEDIA.push(i.media_mode[n])})});c={duration:METRO_ANIMATION_DURATION,func:"swing","switch":function(n,t){n.hide();t.css({top:0,left:0}).show()},slideUp:function(n,t,i,r){var u=n.parent().outerHeight(!0);void 0===i&&(i=this.duration);void 0===r&&(r=this.func);n.css("z-index",1).animate({top:-u},i,r);t.css({top:u,left:0,zIndex:2}).animate({top:0},i,r)},slideDown:function(n,t,i,r){var u=n.parent().outerHeight(!0);void 0===i&&(i=this.duration);void 0===r&&(r=this.func);n.css("z-index",1).animate({top:u},i,r);t.css({left:0,top:-u,zIndex:2}).animate({top:0},i,r)},slideLeft:function(n,t,i,r){var u=n.parent().outerWidth(!0);void 0===i&&(i=this.duration);void 0===r&&(r=this.func);n.css("z-index",1).animate({left:-u},i,r);t.css({left:u,zIndex:2}).animate({left:0},i,r)},slideRight:function(n,t,i,r){var u=n.parent().outerWidth(!0);void 0===i&&(i=this.duration);void 0===r&&(r=this.func);n.css("z-index",1).animate({left:u},i,r);t.css({left:-u,zIndex:2}).animate({left:0},i,r)},fade:function(n,t,i){void 0===i&&(i=this.duration);n.animate({opacity:0},i);t.css({top:0,left:0}).animate({opacity:1},i)}};i.animation=c;h={TYPES:{HEX:"hex",RGB:"rgb",RGBA:"rgba",HSV:"hsv",HSL:"hsl",CMYK:"cmyk",UNKNOWN:"unknown"},PALETTES:{ALL:"colorList",METRO:"colorListMetro",STANDARD:"colorListStandard"},colorListMetro:{lime:"#a4c400",green:"#60a917",emerald:"#008a00",blue:"#00AFF0",teal:"#00aba9",cyan:"#1ba1e2",cobalt:"#0050ef",indigo:"#6a00ff",violet:"#aa00ff",pink:"#dc4fad",magenta:"#d80073",crimson:"#a20025",red:"#CE352C",orange:"#fa6800",amber:"#f0a30a",yellow:"#fff000",brown:"#825a2c",olive:"#6d8764",steel:"#647687",mauve:"#76608a",taupe:"#87794e"},colorListStandard:{aliceBlue:"#f0f8ff",antiqueWhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedAlmond:"#ffebcd",blue:"#0000ff",blueViolet:"#8a2be2",brown:"#a52a2a",burlyWood:"#deb887",cadetBlue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerBlue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkBlue:"#00008b",darkCyan:"#008b8b",darkGoldenRod:"#b8860b",darkGray:"#a9a9a9",darkGreen:"#006400",darkKhaki:"#bdb76b",darkMagenta:"#8b008b",darkOliveGreen:"#556b2f",darkOrange:"#ff8c00",darkOrchid:"#9932cc",darkRed:"#8b0000",darkSalmon:"#e9967a",darkSeaGreen:"#8fbc8f",darkSlateBlue:"#483d8b",darkSlateGray:"#2f4f4f",darkTurquoise:"#00ced1",darkViolet:"#9400d3",deepPink:"#ff1493",deepSkyBlue:"#00bfff",dimGray:"#696969",dodgerBlue:"#1e90ff",fireBrick:"#b22222",floralWhite:"#fffaf0",forestGreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#DCDCDC",ghostWhite:"#F8F8FF",gold:"#ffd700",goldenRod:"#daa520",gray:"#808080",green:"#008000",greenYellow:"#adff2f",honeyDew:"#f0fff0",hotPink:"#ff69b4",indianRed:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderBlush:"#fff0f5",lawnGreen:"#7cfc00",lemonChiffon:"#fffacd",lightBlue:"#add8e6",lightCoral:"#f08080",lightCyan:"#e0ffff",lightGoldenRodYellow:"#fafad2",lightGray:"#d3d3d3",lightGreen:"#90ee90",lightPink:"#ffb6c1",lightSalmon:"#ffa07a",lightSeaGreen:"#20b2aa",lightSkyBlue:"#87cefa",lightSlateGray:"#778899",lightSteelBlue:"#b0c4de",lightYellow:"#ffffe0",lime:"#00ff00",limeGreen:"#32dc32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumAquaMarine:"#66cdaa",mediumBlue:"#0000cd",mediumOrchid:"#ba55d3",mediumPurple:"#9370db",mediumSeaGreen:"#3cb371",mediumSlateBlue:"#7b68ee",mediumSpringGreen:"#00fa9a",mediumTurquoise:"#48d1cc",mediumVioletRed:"#c71585",midnightBlue:"#191970",mintCream:"#f5fffa",mistyRose:"#ffe4e1",moccasin:"#ffe4b5",navajoWhite:"#ffdead",navy:"#000080",oldLace:"#fdd5e6",olive:"#808000",oliveDrab:"#6b8e23",orange:"#ffa500",orangeRed:"#ff4500",orchid:"#da70d6",paleGoldenRod:"#eee8aa",paleGreen:"#98fb98",paleTurquoise:"#afeeee",paleVioletRed:"#db7093",papayaWhip:"#ffefd5",peachPuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderBlue:"#b0e0e6",purple:"#800080",rebeccaPurple:"#663399",red:"#ff0000",rosyBrown:"#bc8f8f",royalBlue:"#4169e1",saddleBrown:"#8b4513",salmon:"#fa8072",sandyBrown:"#f4a460",seaGreen:"#2e8b57",seaShell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",slyBlue:"#87ceeb",slateBlue:"#6a5acd",slateGray:"#708090",snow:"#fffafa",springGreen:"#00ff7f",steelBlue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whiteSmoke:"#f5f5f5",yellow:"#ffff00",yellowGreen:"#9acd32"},colorList:{},options:{angle:30,algorithm:1,step:.1,distance:5,tint1:.8,tint2:.4,shade1:.6,shade2:.3,alpha:1},init:function(){return this.colorList=t.extend({},this.colorListStandard,this.colorListMetro),this},setup:function(n){this.options=t.extend({},this.options,n)},color:function(n,t){return void 0!==this[t=t||this.PALETTES.ALL][n]&&this[t][n]},palette:function(n){return n=n||this.PALETTES.ALL,Object.keys(this[n])},hex2rgb:function(n){n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,t,i,r){return t+t+i+i+r+r});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},rgb2hex:function(n){return"#"+(16777216+(n.r<<16)+(n.g<<8)+n.b).toString(16).slice(1)},rgb2hsv:function(n){var s,h,c,f=new function(n,t,i){this.h=n||0;this.s=t||0;this.v=i||0},u=n.r/255,i=n.g/255,r=n.b/255,t=Math.max(u,i,r),o=Math.min(u,i,r),e=t-o;return c=t,h=0===t?0:1-o/t,s=t===o?0:t===u&&i>=r?(i-r)/e*60:t===u&&i<r?(i-r)/e*60+360:t===i?(r-u)/e*60+120:t===r?(u-i)/e*60+240:0,f.h=s,f.s=h,f.v=c,f},hsv2rgb:function(n){var r,u,f,s=n.h,c=100*n.s,t=100*n.v,i=(100-c)*t/100,h=s%60/60*(t-i),e=i+h,o=t-h;switch(Math.floor(s/60)){case 0:r=t;u=e;f=i;break;case 1:r=o;u=t;f=i;break;case 2:r=i;u=t;f=e;break;case 3:r=i;u=o;f=t;break;case 4:r=e;u=i;f=t;break;case 5:r=t;u=i;f=o}return{r:Math.round(255*r/100),g:Math.round(255*u/100),b:Math.round(255*f/100)}},hsv2hex:function(n){return this.rgb2hex(this.hsv2rgb(n))},hex2hsv:function(n){return this.rgb2hsv(this.hex2rgb(n))},rgb2cmyk:function(n){var t=new function(n,t,i,r){this.c=n||0;this.m=t||0;this.y=i||0;this.k=r||0},i=n.r/255,r=n.g/255,u=n.b/255;return t.k=Math.min(1-i,1-r,1-u),t.c=(1-i-t.k)/(1-t.k),t.m=(1-r-t.k)/(1-t.k),t.y=(1-u-t.k)/(1-t.k),t.c=Math.round(100*t.c),t.m=Math.round(100*t.m),t.y=Math.round(100*t.y),t.k=Math.round(100*t.k),t},cmyk2rgb:function(n){var t=new function(n,t,i){this.r=n||0;this.g=t||0;this.g=i||0},r=n.c/100,u=n.m/100,f=n.y/100,i=n.k/100;return t.r=1-Math.min(1,r*(1-i)+i),t.g=1-Math.min(1,u*(1-i)+i),t.b=1-Math.min(1,f*(1-i)+i),t.r=Math.round(255*t.r),t.g=Math.round(255*t.g),t.b=Math.round(255*t.b),t},hsv2hsl:function(n){var i,r,t;return i=n.h,t=(2-n.s)*n.v,r=n.s*n.v,{h:i,s:r/=t<=1?t:2-t,l:t/=2}},hsl2hsv:function(n){var r,i,u,t;return r=n.h,u=((t=2*n.l)+(i=n.s*(t<=1?t:2-t)))/2,{h:r,s:i=2*i/(t+i),l:u}},rgb2websafe:function(n){return{r:51*Math.round(n.r/51),g:51*Math.round(n.g/51),b:51*Math.round(n.b/51)}},rgba2websafe:function(n){return{r:51*Math.round(n.r/51),g:51*Math.round(n.g/51),b:51*Math.round(n.b/51),a:n.a}},hex2websafe:function(n){return this.rgb2hex(this.rgb2websafe(this.toRGB(n)))},hsv2websafe:function(n){return this.rgb2hsv(this.rgb2websafe(this.toRGB(n)))},hsl2websafe:function(n){return this.hsv2hsl(this.rgb2hsv(this.rgb2websafe(this.toRGB(n))))},cmyk2websafe:function(n){return this.rgb2cmyk(this.rgb2websafe(this.cmyk2rgb(n)))},websafe:function(n){return this.isHEX(n)?this.hex2websafe(n):this.isRGB(n)?this.rgb2websafe(n):this.isRGBA(n)?this.rgba2websafe(n):this.isHSV(n)?this.hsv2websafe(n):this.isHSL(n)?this.hsl2websafe(n):this.isCMYK(n)?this.cmyk2websafe(n):n},is:function(n){return this.isHEX(n)?this.TYPES.HEX:this.isRGB(n)?this.TYPES.RGB:this.isRGBA(n)?this.TYPES.RGBA:this.isHSV(n)?this.TYPES.HSV:this.isHSL(n)?this.TYPES.HSL:this.isCMYK(n)?this.TYPES.CMYK:this.TYPES.UNKNOWN},toRGB:function(n){if(this.isHSV(n))return this.hsv2rgb(n);if(this.isHSL(n))return this.hsv2rgb(this.hsl2hsv(n));if(this.isRGB(n))return n;if(this.isHEX(n))return this.hex2rgb(n);if(this.isCMYK(n))return this.cmyk2rgb(n);throw new Error("Unknown color format!");},toRGBA:function(n,t){var i=this.toRGB(n);return i.a=t||1,i},toHSV:function(n){return this.rgb2hsv(this.toRGB(n))},toHSL:function(n){return this.hsv2hsl(this.rgb2hsv(this.toRGB(n)))},toHSLA:function(n,t){var i;return(i=this.hsv2hsl(this.rgb2hsv(this.toRGB(n)))).a=t||this.options.alpha,i},toHEX:function(n){return this.rgb2hex(this.toRGB(n))},toCMYK:function(n){return this.rgb2cmyk(this.toRGB(n))},toHexString:function(n){return this.toHEX(n)},toHsvString:function(n){var t=this.toHSV(n);return"hsv("+[t.h,t.s,t.v].join(",")+")"},toHslString:function(n){var t=this.toHSL(n);return"hsl("+[Math.round(t.h),Math.round(100*t.s)+"%",Math.round(100*t.l)+"%"].join(",")+")"},toHslaString:function(n){var t=this.toHSLA(n);return"hsl("+[Math.round(t.h),Math.round(100*t.s)+"%",Math.round(100*t.l)+"%",t.a].join(",")+")"},toCmykString:function(n){var t=this.toCMYK(n);return"cmyk("+[t.c,t.m,t.y,t.k].join(",")+")"},toRgbString:function(n){var t=this.toRGB(n);return"rgb("+[t.r,t.g,t.b].join(",")+")"},toRgbaString:function(n){var t=this.toRGBA(n);return"rgba("+[t.r,t.g,t.b,t.a].join(",")+")"},toString:function(n){if(this.isHEX(n))return this.toHexString(n);if(this.isRGB(n))return this.toRgbString(n);if(this.isRGBA(n))return this.toRgbaString(n);if(this.isHSV(n))return this.toHsvString(n);if(this.isHSL(n))return this.toHslString(n);if(this.isHSLA(n))return this.toHslaString(n);if(this.isCMYK(n))return this.toCmykString(n);throw new Error("Unknown color format!");},grayscale:function(n,t){t=t||"hex";var i=this.toRGB(n),r=Math.round(.2125*i.r+.7154*i.g+.0721*i.b),u={r:r,g:r,b:r};return this["rgb2"+t](u)},darken:function(n,t){return void 0===t&&(t=10),this.lighten(n,-1*Math.abs(t))},lighten:function(n,t){var o,s,i,h=1,e,r,u,f;void 0===t&&(t=10);o=(o=this.toHEX(n)).slice(1);(s=this.is(n))===this.TYPES.RGBA&&(h=n.a);e=parseInt(o,16);r=(e>>16)+t;r>255?r=255:r<0&&(r=0);u=(e>>8&255)+t;u>255?u=255:u<0&&(u=0);f=(255&e)+t;switch(f>255?f=255:f<0&&(f=0),i="#"+(f|u<<8|r<<16).toString(16),s){case"rgb":return this.toRGB(i);case"rgba":return this.toRGBA(i,h);case"hsv":return this.toHSV(i);case"hsl":return this.toHSL(i);case"cmyk":return this.toCMYK(i);default:return i}},isDark:function(n){var t=this.toRGB(n);return(299*t.r+587*t.g+114*t.b)/1e3<128},isLight:function(n){return!this.isDark(n)},isHSV:function(n){return r.isObject(n)&&"h"in n&&"s"in n&&"v"in n},isHSL:function(n){return r.isObject(n)&&"h"in n&&"s"in n&&"l"in n},isHSLA:function(n){return r.isObject(n)&&"h"in n&&"s"in n&&"l"in n&&"a"in n},isRGB:function(n){return r.isObject(n)&&"r"in n&&"g"in n&&"b"in n},isRGBA:function(n){return r.isObject(n)&&"r"in n&&"g"in n&&"b"in n&&"a"in n},isCMYK:function(n){return r.isObject(n)&&"c"in n&&"m"in n&&"y"in n&&"k"in n},isHEX:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},isColor:function(n){return this.isHEX(n)||this.isRGB(n)||this.isRGBA(n)||this.isHSV(n)||this.isHSL(n)||this.isCMYK(n)},hueShift:function(n,t){for(n+=t;n>=360;)n-=360;for(;n<0;)n+=360;return n},getScheme:function(n,i,r,u){function p(n,t,i){return Math.max(t,Math.min(n,i))}function y(n,t,i){return n<t?t:n>i?i:n}var v,s,e,w;if(this.options=t.extend({},this.options,u),e=[],w=this,s=this.toHSV(n),!1===this.isHSV(s))return console.log("The value is a not supported color format!"),!1;var o,f=s.h,a=s.s,l=s.v,c=this.options;switch(i){case"monochromatic":case"mono":if(1===c.algorithm)(o=this.hsv2rgb(s)).r=y(Math.round(o.r+(255-o.r)*c.tint1),0,255),o.g=y(Math.round(o.g+(255-o.g)*c.tint1),0,255),o.b=y(Math.round(o.b+(255-o.b)*c.tint1),0,255),e.push(this.rgb2hsv(o)),(o=this.hsv2rgb(s)).r=y(Math.round(o.r+(255-o.r)*c.tint2),0,255),o.g=y(Math.round(o.g+(255-o.g)*c.tint2),0,255),o.b=y(Math.round(o.b+(255-o.b)*c.tint2),0,255),e.push(this.rgb2hsv(o)),e.push(s),(o=this.hsv2rgb(s)).r=y(Math.round(o.r*c.shade1),0,255),o.g=y(Math.round(o.g*c.shade1),0,255),o.b=y(Math.round(o.b*c.shade1),0,255),e.push(this.rgb2hsv(o)),(o=this.hsv2rgb(s)).r=y(Math.round(o.r*c.shade2),0,255),o.g=y(Math.round(o.g*c.shade2),0,255),o.b=y(Math.round(o.b*c.shade2),0,255),e.push(this.rgb2hsv(o));else if(2===c.algorithm)for(e.push(s),v=1;v<=c.distance;v++)l=p(l-c.step,0,1),a=p(a-c.step,0,1),e.push({h:f,s:a,v:l});else if(3===c.algorithm)for(e.push(s),v=1;v<=c.distance;v++)l=p(l-c.step,0,1),e.push({h:f,s:a,v:l});else l=p(s.v+2*c.step,0,1),e.push({h:f,s:a,v:l}),l=p(s.v+c.step,0,1),e.push({h:f,s:a,v:l}),e.push(s),a=s.s,l=s.v,l=p(s.v-c.step,0,1),e.push({h:f,s:a,v:l}),l=p(s.v-2*c.step,0,1),e.push({h:f,s:a,v:l});break;case"complementary":case"complement":case"comp":e.push(s);f=this.hueShift(s.h,180);e.push({h:f,s:a,v:l});break;case"double-complementary":case"double-complement":case"double":e.push(s);console.log(f);f=this.hueShift(f,180);e.push({h:f,s:a,v:l});console.log(f);f=this.hueShift(f,c.angle);e.push({h:f,s:a,v:l});console.log(f);f=this.hueShift(f,180);e.push({h:f,s:a,v:l});console.log(f);break;case"analogous":case"analog":f=this.hueShift(f,c.angle);e.push({h:f,s:a,v:l});e.push(s);f=this.hueShift(s.h,0-c.angle);e.push({h:f,s:a,v:l});break;case"triadic":case"triad":for(e.push(s),v=1;v<3;v++)f=this.hueShift(f,120),e.push({h:f,s:a,v:l});break;case"tetradic":case"tetra":e.push(s);f=this.hueShift(s.h,180);e.push({h:f,s:a,v:l});f=this.hueShift(s.h,-1*c.angle);e.push({h:f,s:a,v:l});f=this.hueShift(f,180);e.push({h:f,s:a,v:l});break;case"square":for(e.push(s),v=1;v<4;v++)f=this.hueShift(f,90),e.push({h:f,s:a,v:l});break;case"split-complementary":case"split-complement":case"split":f=this.hueShift(f,180-c.angle);e.push({h:f,s:a,v:l});e.push(s);f=this.hueShift(s.h,180+c.angle);e.push({h:f,s:a,v:l});break;default:console.log("Unknown scheme name")}return function(n,t){var i=[],r=w.options;switch(t){case"hex":i=n.map(function(n){return h.toHEX(n)});break;case"rgb":i=n.map(function(n){return h.toRGB(n)});break;case"rgba":i=n.map(function(n){return h.toRGBA(n,r.alpha)});break;case"hsl":i=n.map(function(n){return h.toHSL(n)});break;case"cmyk":i=n.map(function(n){return h.toCMYK(n)});break;default:i=n}return i}(e,r)}};i.colors=h.init();t.easing.jswing=t.easing.swing;t.extend(t.easing,{def:"easeOutQuad",swing:function(n,i,r,u,f){return t.easing[t.easing.def](n,i,r,u,f)},easeInQuad:function(n,t,i,r,u){return r*(t/=u)*t+i},easeOutQuad:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i},easeInOutQuad:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i},easeInCubic:function(n,t,i,r,u){return r*(t/=u)*t*t+i},easeOutCubic:function(n,t,i,r,u){return r*((t=t/u-1)*t*t+1)+i},easeInOutCubic:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},easeInQuart:function(n,t,i,r,u){return r*(t/=u)*t*t*t+i},easeOutQuart:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i},easeInOutQuart:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t+i:-r/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(n,t,i,r,u){return r*(t/=u)*t*t*t*t+i},easeOutQuint:function(n,t,i,r,u){return r*((t=t/u-1)*t*t*t*t+1)+i},easeInOutQuint:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t*t+i:r/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(n,t,i,r,u){return-r*Math.cos(t/u*(Math.PI/2))+r+i},easeOutSine:function(n,t,i,r,u){return r*Math.sin(t/u*(Math.PI/2))+i},easeInOutSine:function(n,t,i,r,u){return-r/2*(Math.cos(Math.PI*t/u)-1)+i},easeInExpo:function(n,t,i,r,u){return 0==t?i:r*Math.pow(2,10*(t/u-1))+i},easeOutExpo:function(n,t,i,r,u){return t==u?i+r:r*(1-Math.pow(2,-10*t/u))+i},easeInOutExpo:function(n,t,i,r,u){return 0==t?i:t==u?i+r:(t/=u/2)<1?r/2*Math.pow(2,10*(t-1))+i:r/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(n,t,i,r,u){return-r*(Math.sqrt(1-(t/=u)*t)-1)+i},easeOutCirc:function(n,t,i,r,u){return r*Math.sqrt(1-(t=t/u-1)*t)+i},easeInOutCirc:function(n,t,i,r,u){return(t/=u/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+i:r/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return 0==t?i:1==(t/=u)?i+r:(f||(f=.3*u),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),-e*Math.pow(2,10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f)+i)},easeOutElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return 0==t?i:1==(t/=u)?i+r:(f||(f=.3*u),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),e*Math.pow(2,-10*t)*Math.sin((t*u-o)*2*Math.PI/f)+r+i)},easeInOutElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return 0==t?i:2==(t/=u/2)?i+r:(f||(f=u*.3*1.5),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),t<1?e*Math.pow(2,10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f)*-.5+i:e*Math.pow(2,-10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f)*.5+r+i)},easeInBack:function(n,t,i,r,u,f){return null==f&&(f=1.70158),r*(t/=u)*t*((f+1)*t-f)+i},easeOutBack:function(n,t,i,r,u,f){return null==f&&(f=1.70158),r*((t=t/u-1)*t*((f+1)*t+f)+1)+i},easeInOutBack:function(n,t,i,r,u,f){return null==f&&(f=1.70158),(t/=u/2)<1?r/2*t*t*((1+(f*=1.525))*t-f)+i:r/2*((t-=2)*t*((1+(f*=1.525))*t+f)+2)+i},easeInBounce:function(n,i,r,u,f){return u-t.easing.easeOutBounce(n,f-i,0,u,f)+r},easeOutBounce:function(n,t,i,r,u){return(t/=u)<1/2.75?r*7.5625*t*t+i:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+i:r*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(n,i,r,u,f){return i<f/2?.5*t.easing.easeInBounce(n,2*i,0,u,f)+r:.5*t.easing.easeOutBounce(n,2*i-f,0,u,f)+.5*u+r}});t.fn.extend({toggleAttr:function(n,i){return this.each(function(){var r=t(this);void 0!==i?r.attr(n,i):void 0!==r.attr(n)?r.removeAttr(n):r.attr(n,""+n)})},clearClasses:function(){return this.each(function(){this.className=""})}});Array.prototype.shuffle=function(){for(var i,t,n=this.length;0!==n;)t=Math.floor(Math.random()*n),i=this[n-=1],this[n]=this[t],this[t]=i;return this};Array.prototype.clone=function(){return this.slice(0)};Array.prototype.unique=function(){for(var i,n=this.concat(),t=0;t<n.length;++t)for(i=t+1;i<n.length;++i)n[t]===n[i]&&n.splice(i--,1);return n};Number.prototype.format=function(n,t,i,r){var f="\\d(?=(\\d{"+(t||3)+"})+"+(n>0?"\\D":"$")+")",u=this.toFixed(Math.max(0,~~n));return(r?u.replace(".",r):u).replace(new RegExp(f,"g"),"$&"+(i||","))};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.contains=function(){return!!~String.prototype.indexOf.apply(this,arguments)};Date.prototype.format=function(n,t){void 0===t&&(t="en-US");var l=(void 0!==i.locales[t]?i.locales[t]:i.locales["en-US"]).calendar,r=this,o=r.getDay(),h=r.getDate(),s=r.getMonth(),f=r.getFullYear(),e=r.getHours(),a=l.days,v=l.months,y=[0,31,59,90,120,151,181,212,243,273,304,334],c=function(){var n=new Date(r);return n.setDate(h-(o+6)%7+3),n},u=function(n,t){return(""+(Math.pow(10,t)+n)).slice(1)};return n.replace(/%[a-z]/gi,function(n){return{"%a":a[o].slice(0,3),"%A":a[o],"%b":v[s].slice(0,3),"%B":v[s],"%c":r.toUTCString(),"%C":Math.floor(f/100),"%d":u(h,2),"%e":h,"%F":r.toISOString().slice(0,10),"%G":c().getFullYear(),"%g":(""+c().getFullYear()).slice(2),"%H":u(e,2),"%I":u((e+11)%12+1,2),"%j":u(y[s]+h+(s>1&&(f%4==0&&f%100!=0||f%400==0)?1:0),3),"%k":""+e,"%l":(e+11)%12+1,"%m":u(s+1,2),"%M":u(r.getMinutes(),2),"%p":e<12?"AM":"PM","%P":e<12?"am":"pm","%s":Math.round(r.getTime()/1e3),"%S":u(r.getSeconds(),2),"%u":o||7,"%V":function(){var n=c(),i=n.valueOf(),t;return n.setMonth(0,1),t=n.getDay(),4!==t&&n.setMonth(0,1+(11-t)%7),u(1+Math.ceil((i-n)/6048e5),2)}(),"%w":""+o,"%x":r.toLocaleDateString(),"%X":r.toLocaleTimeString(),"%y":(""+f).slice(2),"%Y":f,"%z":r.toTimeString().replace(/.+GMT([+-]\d+).+/,"$1"),"%Z":r.toTimeString().replace(/.+\((.+?)\)$/,"$1")}[n]||n})};Date.prototype.addHours=function(n){return this.setTime(this.getTime()+36e5*n),this};Date.prototype.addDays=function(n){return this.setDate(this.getDate()+n),this};Date.prototype.addMonths=function(n){return this.setMonth(this.getMonth()+n),this};Date.prototype.addYears=function(n){return this.setFullYear(this.getFullYear()+n),this};l={specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS,filterTextInputs:METRO_HOTKEYS_FILTER_TEXT_INPUTS,filterContentEditable:METRO_HOTKEYS_FILTER_CONTENT_EDITABLE},keyHandler:function(n){if("string"==typeof n.data&&(n.data={keys:n.data}),n.data&&n.data.keys&&"string"==typeof n.data.keys){var r=n.handler,i=n.data.keys.toLowerCase().split(" ");n.handler=function(n){var o,h;if(this===n.target||!(l.options.filterInputAcceptingElements&&l.textInputTypes.test(n.target.nodeName)||l.options.filterContentEditable&&t(n.target).attr("contenteditable")||l.options.filterTextInputs&&t.inArray(n.target.type,l.textAcceptingInputTypes)>-1)){var f="keypress"!==n.type&&l.specialKeys[n.which],s=String.fromCharCode(n.which).toLowerCase(),u="",e={};for(t.each(["alt","ctrl","shift"],function(t,i){n[i+"Key"]&&f!==i&&(u+=i+"+")}),n.metaKey&&!n.ctrlKey&&"meta"!==f&&(u+="meta+"),n.metaKey&&"meta"!==f&&u.indexOf("alt+ctrl+shift+")>-1&&(u=u.replace("alt+ctrl+shift+","hyper+")),f?e[u+f]=!0:(e[u+s]=!0,e[u+l.shiftNums[s]]=!0,"shift+"===u&&(e[l.shiftNums[s]]=!0)),o=0,h=i.length;o<h;o++)if(e[i[o]])return r.apply(this,arguments)}}}}};t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:l.keyHandler}});i.locales={"en-US":{calendar:{months:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Su","Mo","Tu","We","Th","Fr","Sa","Sun","Mon","Tus","Wen","Thu","Fri","Sat"],time:{days:"DAYS",hours:"HOURS",minutes:"MINS",seconds:"SECS",month:"MON",day:"DAY",year:"YEAR"}},buttons:{ok:"OK",cancel:"Cancel",done:"Done",today:"Today",now:"Now",clear:"Clear",help:"Help",yes:"Yes",no:"No",random:"Random"}},"cn-ZH":{calendar:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","日","一","二","三","四","五","六","周日","周一","周二","周三","周四","周五","周六"],time:{days:"天",hours:"时",minutes:"分",seconds:"秒",month:"月",day:"日",year:"年"}},buttons:{ok:"确认",cancel:"取消",done:"完成",today:"今天",now:"现在",clear:"清除",help:"帮助",yes:"是",no:"否",random:"随机"}},"de-DE":{calendar:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember","Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sn","Mn","Di","Mi","Do","Fr","Sa","Son","Mon","Die","Mit","Don","Fre","Sam"],time:{days:"TAGE",hours:"UHR",minutes:"MIN",seconds:"SEK"}},buttons:{ok:"OK",cancel:"Abbrechen",done:"Fertig",today:"Heute",now:"Jetzt",clear:"Reinigen",help:"Hilfe",yes:"Ja",no:"Nein",random:"Zufällig"}},"hu-HU":{calendar:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December","Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Szep","Okt","Nov","Dec"],days:["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat","V","H","K","Sz","Cs","P","Sz","Vas","Hét","Ke","Sze","Csü","Pén","Szom"],time:{days:"NAP",hours:"ÓRA",minutes:"PERC",seconds:"MP"}},buttons:{ok:"OK",cancel:"Mégse",done:"Kész",today:"Ma",now:"Most",clear:"Törlés",help:"Segítség",yes:"Igen",no:"Nem",random:"Véletlen"}},"ru-RU":{calendar:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь","Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Вс","Пн","Вт","Ср","Чт","Пт","Сб","Вос","Пон","Вто","Сре","Чет","Пят","Суб"],time:{days:"ДНИ",hours:"ЧАСЫ",minutes:"МИН",seconds:"СЕК"}},buttons:{ok:"ОК",cancel:"Отмена",done:"Готово",today:"Сегодня",now:"Сейчас",clear:"Очистить",help:"Помощь",yes:"Да",no:"Нет",random:"Случайно"}},"uk-UA":{calendar:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень","Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],days:["Неділя","Понеділок","Вівторок","Середа","Четвер","П’ятниця","Субота","Нд","Пн","Вт","Ср","Чт","Пт","Сб","Нед","Пон","Вiв","Сер","Чет","Пят","Суб"],time:{days:"ДНІ",hours:"ГОД",minutes:"ХВИЛ",seconds:"СЕК"}},buttons:{ok:"ОК",cancel:"Відміна",done:"Готово",today:"Сьогодні",now:"Зараз",clear:"Очистити",help:"Допомога",yes:"Так",no:"Ні",random:"Випадково"}},"es-MX":{calendar:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre","Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Do","Lu","Ma","Mi","Ju","Vi","Sa","Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],time:{days:"DÍAS",hours:"HORAS",minutes:"MINS",seconds:"SEGS",month:"MES",day:"DÍA",year:"AÑO"}},buttons:{ok:"Aceptar",cancel:"Cancelar",done:"Hecho",today:"Hoy",now:"Ahora",clear:"Limpiar",help:"Ayuda",yes:"Si",no:"No",random:"Aleatorio"}},"fr-FR":{calendar:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre","Janv","Févr","Mars","Avr","Mai","Juin","Juil","Août","Sept","Oct","Nov","Déc"],days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","De","Du","Ma","Me","Je","Ve","Sa","Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],time:{days:"JOURS",hours:"HEURES",minutes:"MINS",seconds:"SECS",month:"MOIS",day:"JOUR",year:"ANNEE"}},buttons:{ok:"OK",cancel:"Annulé",done:"Fait",today:"Aujourd'hui",now:"Maintenant",clear:"Effacé",help:"Aide",yes:"Oui",no:"Non",random:"Aléatoire"}},"it-IT":{calendar:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre","Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Do","Lu","Ma","Me","Gi","Ve","Sa","Dom","Lun","Mar","Mer","Gio","Ven","Sab"],time:{days:"GIORNI",hours:"ORE",minutes:"MIN",seconds:"SEC",month:"MESE",day:"GIORNO",year:"ANNO"}},buttons:{ok:"OK",cancel:"Annulla",done:"Fatto",today:"Oggi",now:"Adesso",clear:"Cancella",help:"Aiuto",yes:"Sì",no:"No",random:"Random"}}};et=0;var k,a,ot=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],w="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],pu=Array.prototype.slice;if(t.event.fixHooks)for(d=ot.length;d;)t.event.fixHooks[ot[--d]]=t.event.mouseHooks;t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=w.length;n;)this.addEventListener(w[--n],g,!1);else this.onmousewheel=g;t.data(this,"mousewheel-line-height",t.event.special.mousewheel.getLineHeight(this));t.data(this,"mousewheel-page-height",t.event.special.mousewheel.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=w.length;n;)this.removeEventListener(w[--n],g,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height");t.removeData(this,"mousewheel-page-height")},getLineHeight:function(n){var r=t(n),i=r["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(n){return t(n).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}});var ht=t.event.dispatch||t.event.handle,b=n.event.special,ct="D"+ +new Date,lt="D"+(+new Date+1);return b.scrollstart={setup:function(n){var i,u=t.extend({latency:b.scrollstop.latency},n),r=function(n){i?(clearTimeout(i),i=null):(n.type="scrollstart",ht.apply(this,arguments));i=setTimeout(function(){i=null},u.latency)};t(this).on("scroll",r).data(ct,r)},teardown:function(){t(this).off("scroll",t(this).data(ct))}},b.scrollstop={latency:250,setup:function(n){var i,u=t.extend({latency:b.scrollstop.latency},n),r=function(n){var t=this,r=arguments;i&&(clearTimeout(i),i=null);i=setTimeout(function(){i=null;n.type="scrollstop";ht.apply(t,r)},u.latency)};t(this).on("scroll",r).data(lt,r)},teardown:function(){t(this).off("scroll",t(this).data(lt))}},at={key:"METRO:APP",init:function(n){return this.options=t.extend({},this.options,n),this},nvl:function(n,t){return null==n?t:n},setKey:function(n){this.key=n},getKey:function(){return this.key},setItem:function(n,t){window.sessionStorage.setItem(this.key+":"+n,JSON.stringify(t))},getItem:function(n,t,i){var r,u=this.nvl(window.sessionStorage.getItem(this.key+":"+n),t);try{r=JSON.parse(u,i)}catch(n){r=null}return r},getItemPart:function(n,t,i,r){var u,f=this.getItem(n,i,r);for(t=t.split("->"),u=0;u<t.length;u++)f=f[t[u]];return f},delItem:function(n){window.sessionStorage.removeItem(this.key+":"+n)},size:function(n){var t;switch(n){case"m":case"M":t=1048576;break;case"k":case"K":t=1024;break;default:t=1}return JSON.stringify(window.sessionStorage).length/t}},i.session=at.init(),vt={key:"METRO:APP",init:function(n){return this.options=t.extend({},this.options,n),this},nvl:function(n,t){return null==n?t:n},setKey:function(n){this.key=n},getKey:function(){return this.key},setItem:function(n,t){window.localStorage.setItem(this.key+":"+n,JSON.stringify(t))},getItem:function(n,t,i){var r,u=this.nvl(window.localStorage.getItem(this.key+":"+n),t);try{r=JSON.parse(u,i)}catch(n){r=null}return r},getItemPart:function(n,t,i,r){var u,f=this.getItem(n,i,r);for(t=t.split("->"),u=0;u<t.length;u++)f=f[t[u]];return f},delItem:function(n){window.localStorage.removeItem(this.key+":"+n)},size:function(n){var t;switch(n){case"m":case"M":t=1048576;break;case"k":case"K":t=1024;break;default:t=1}return JSON.stringify(window.localStorage).length/t}},i.storage=vt.init(),i.template=function(n,t){for(var e,i,o=/<%(.+?)%>/g,s=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,r="with(obj) { var r=[];\n",u=0,f=function(n,t){return r+=t?n.match(s)?n+"\n":"r.push("+n+");\n":""!==n?'r.push("'+n.replace(/"/g,'\\"')+'");\n':"",f};i=o.exec(n);)f(n.slice(u,i.index))(i[1],!0),u=i.index+i[0].length;f(n.substr(u,n.length-u));r=(r+'return r.join(""); }').replace(/[\r\t\n]/g," ");try{e=new Function("obj",r).apply(t,[t])}catch(n){console.error("'"+n.message+"'"," in \n\nCode:\n",r,"\n")}return e},r={isUrl:function(n){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@\-\/]))?/.test(n)},isTag:function(n){return/^<\/?[\w\s="/.':;#-\/\?]+>/gi.test(n)},isColor:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},isEmbedObject:function(n){var i=!1;return t.each(["iframe","object","embed","video"],function(){-1!==n.indexOf(this)&&(i=!0)}),i},isVideoUrl:function(n){return/youtu\.be|youtube|vimeo/gi.test(n)},isDate:function(n){return"Invalid Date"!==String(new Date(n))},isInt:function(n){return Number(n)===n&&n%1==0},isFloat:function(n){return Number(n)===n&&n%1!=0},isTouchDevice:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},isFunc:function(n){return this.isType(n,"function")},isObject:function(n){return this.isType(n,"object")},isArray:function(n){return Array.isArray(n)},isType:function(n,t){if(null==n)return!1;if(typeof n===t)return n;if(this.isTag(n)||this.isUrl(n))return!1;if(typeof window[n]===t)return window[n];if("string"==typeof n&&-1===n.indexOf(".")||"string"==typeof n&&-1!==n.indexOf(" ")||"string"==typeof n&&-1!==n.indexOf("(")||"string"==typeof n&&-1!==n.indexOf("["))return!1;for(var u=n.split("."),r=window,i=0;i<u.length;i++)r=r[u[i]];return typeof r===t&&r},isMetroObject:function(n,i){var r=t(n),u=r.data(i);return 0===r.length?(console.log(i+" "+n+" not found!"),!1):void 0!==u||(console.log("Element not contain role "+i+'! Please add attribute data-role="'+i+'" to element '+n),!1)},isJQueryObject:function(t){return"function"==typeof n&&t instanceof n},embedObject:function(n){return"string"!=typeof n&&(n=this.isJQueryObject(n)?n.html():n.innerHTML),"<div class='embed-container'>"+n+"<\/div>"},embedUrl:function(n){return-1!==n.indexOf("youtu.be")&&(n="https://www.youtube.com/embed/"+n.split("/").pop()),"<div class='embed-container'><iframe src='"+n+"'><\/iframe><\/div>"},secondsToTime:function(n){var t=n%3600,i=t%60;return{h:Math.floor(n/3600),m:Math.floor(t/60),s:Math.ceil(i)}},hex2rgba:function(n,t){var i;if(t=isNaN(t)?1:t,/^#([A-Fa-f0-9]{3}){1,2}$/.test(n))return 3===(i=n.substring(1).split("")).length&&(i=[i[0],i[0],i[1],i[1],i[2],i[2]]),"rgba("+[(i="0x"+i.join(""))>>16&255,i>>8&255,255&i].join(",")+","+t+")";throw new Error("Hex2rgba error. Bad Hex value");},random:function(n,t){return Math.floor(Math.random()*(t-n+1)+n)},uniqueId:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===t?i:3&i|8).toString(16)})},elementId:function(n){return n+"-"+(new Date).getTime()+r.random(1,1e3)},secondsToFormattedString:function(n){var u=parseInt(n,10),t=Math.floor(u/3600),i=Math.floor((u-3600*t)/60),r=u-3600*t-60*i;return t<10&&(t="0"+t),i<10&&(i="0"+i),r<10&&(r="0"+r),[t,i,r].join(":")},callback:function(n,t,i){return this.exec(n,t,i)},func:function(n){return new Function("a",n)},exec:function(n,t,i){var u,r;if(null==n)return!1;r=this.isFunc(n);!1===r&&(r=this.func(n));try{u=r.apply(i,t)}catch(n){if(u=null,!0===METRO_THROWS)throw n;}return u},isOutsider:function(n){var i,r=(n=this.isJQueryObject(n)?n:t(n)).clone();return r.removeAttr("data-role").css({visibility:"hidden",position:"absolute",display:"block"}),n.parent().append(r),i=r[0].getBoundingClientRect(),r.remove(),i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)},inViewport:function(n){var t=this.rect(n);return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},rect:function(t){return"function"==typeof n&&t instanceof n&&(t=t[0]),t.getBoundingClientRect()},objectLength:function(n){return Object.keys(n).length},percent:function(n,t,i){if(0===n)return 0;var r=100*t/n;return!0===i?Math.round(r):Math.round(100*r)/100},camelCase:function(n){return n.replace(/-([a-z])/g,function(n){return n[1].toUpperCase()})},dashedName:function(n){return n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})},objectShift:function(n){var i=0;return t.each(n,function(n){0===i?i=n:i>n&&(i=n)}),delete n[i],n},objectDelete:function(n,t){void 0!==n[t]&&delete n[t]},arrayDelete:function(n,t){n.splice(n.indexOf(t),1)},arrayDeleteByKey:function(n,t){n.splice(t,1)},nvl:function(n,t){return null==n?t:n},objectClone:function(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},github:function(n,i){var r=this;t.ajax({url:"https://api.github.com/repos/"+n,dataType:"jsonp"}).done(function(n){r.callback(i,[n.data])})},detectIE:function(){var n=window.navigator.userAgent,i=n.indexOf("MSIE "),r,t;return i>0?parseInt(n.substring(i+5,n.indexOf(".",i)),10):n.indexOf("Trident/")>0?(r=n.indexOf("rv:"),parseInt(n.substring(r+3,n.indexOf(".",r)),10)):(t=n.indexOf("Edge/"),t>0&&parseInt(n.substring(t+5,n.indexOf(".",t)),10))},detectChrome:function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},md5:function(n){return cu(hu(lu(n)))},encodeURI:function(n){return encodeURI(n).replace(/%5B/g,"[").replace(/%5D/g,"]")},pageHeight:function(){var t=document.body,n=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)},cleanPreCode:function(n){Array.prototype.slice.call(document.querySelectorAll(n),0).forEach(function(n){var t=n.textContent.replace(/^[\r\n]+/,"").replace(/\s+$/g,""),r,u,f,e,i;if(/^\S/gm.test(t))n.textContent=t;else{for(e=/^[\t ]+/gm,i=1e3;r=e.exec(t);)(f=r[0].length)<i&&(i=f,u=r[0]);1e3!==i&&(n.textContent=t.replace(new RegExp("^"+u,"gm"),""))}})},coords:function(n){this.isJQueryObject(n)&&(n=n[0]);var t=n.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},positionXY:function(n,t){switch(t){case"client":return this.clientXY(n);case"screen":return this.screenXY(n);case"page":return this.pageXY(n);default:return{x:0,y:0}}},clientXY:function(n){return{x:n.changedTouches?n.changedTouches[0].clientX:n.clientX,y:n.changedTouches?n.changedTouches[0].clientY:n.clientY}},screenXY:function(n){return{x:n.changedTouches?n.changedTouches[0].screenX:n.screenX,y:n.changedTouches?n.changedTouches[0].screenY:n.screenY}},pageXY:function(n){return{x:n.changedTouches?n.changedTouches[0].pageX:n.pageX,y:n.changedTouches?n.changedTouches[0].pageY:n.pageY}},isRightMouse:function(n){return"which"in n?3===n.which:"button"in n?2===n.button:void 0},hiddenElementSize:function(n,i){var r=t(n).clone(),u,f;return r.removeAttr("data-role").css({visibility:"hidden",position:"absolute",display:"block"}),t("body").append(r),void 0===i&&(i=!1),u=r.outerWidth(i),f=r.outerHeight(i),r.remove(),{width:u,height:f}},getStyle:function(n,t){return!0===r.isJQueryObject(n)&&(n=n[0]),window.getComputedStyle(n,t)},getStyleOne:function(n,t){return this.getStyle(n).getPropertyValue(t)},getTransformMatrix:function(n,t){var i=this.getStyleOne(n,"transform").replace("matrix(","").slice(0,-1).split(",");return!0!==t?{a:i[0],b:i[1],c:i[2],d:i[3],tx:i[4],ty:i[5]}:i},computedRgbToHex:function(n){var r=n.replace(/[^\d,]/g,"").split(","),i="#";return t.each(r,function(){var n=parseInt(this).toString(16);i+=1===n.length?"0"+n:n}),i},computedRgbToRgba:function(n,t){var i=n.replace(/[^\d,]/g,"").split(",");return void 0===t&&(t=1),i.push(t),"rgba("+i.join(",")+")"},computedRgbToArray:function(n){return n.replace(/[^\d,]/g,"").split(",")},hexColorToArray:function(n){var t;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(n)?(3===(t=n.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),[(t="0x"+t.join(""))>>16&255,t>>8&255,255&t]):[0,0,0]},hexColorToRgbA:function(n,t){var i;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(n)?(3===(i=n.substring(1).split("")).length&&(i=[i[0],i[0],i[1],i[1],i[2],i[2]]),"rgba("+[(i="0x"+i.join(""))>>16&255,i>>8&255,255&i,t||1].join(",")+")"):"rgba(0,0,0,1)"},getInlineStyles:function(n){var r={},t,u,i;for(this.isJQueryObject(n)&&(n=n[0]),t=0,u=n.style.length;t<u;t++)i=n.style[t],r[i]=n.style[i];return r},updateURIParameter:function(n,t,i){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),u=-1!==n.indexOf("?")?"&":"?";return n.match(r)?n.replace(r,"$1"+t+"="+i+"$2"):n+u+t+"="+i},getURIParameter:function(n,t){n||(n=window.location.href);t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(n);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},getLocales:function(){return Object.keys(i.locales)},addLocale:function(n){i.locales=t.extend({},i.locales,n)},strToArray:function(n,t){return this.isValue(t)||(t=","),(""+n).split(t).map(function(n){return n.trim()})},aspectRatioH:function(n,t){return"16/9"===t?9*n/16:"21/9"===t?9*n/21:"4/3"===t?3*n/4:void 0},aspectRatioW:function(n,t){return"16/9"===t?16*n/9:"21/9"===t?21*n/9:"4/3"===t?4*n/3:void 0},valueInObject:function(n,t){return Object.values(n).indexOf(t)>-1},keyInObject:function(){return Object.keys(obj).indexOf(value)>-1},inObject:function(n,t,i){return void 0!==n[t]&&n[t]===i},newCssSheet:function(n){var t=document.createElement("style");return void 0!==n&&t.setAttribute("media",n),t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet},addCssRule:function(n,t,i,r){"insertRule"in n?n.insertRule(t+"{"+i+"}",r):"addRule"in n&&n.addRule(t,i,r)},media:function(n){return window.matchMedia(n).matches},mediaModes:function(){return METRO_MEDIA},mediaExist:function(n){return METRO_MEDIA.indexOf(n)>-1},inMedia:function(n){return METRO_MEDIA.indexOf(n)>-1&&METRO_MEDIA.indexOf(n)===METRO_MEDIA.length-1},isValue:function(n){return null!=n&&""!==n},isNegative:function(n){return parseFloat(n)<0},isPositive:function(n){return parseFloat(n)>0},isZero:function(n){return 0===parseFloat(n.toFixed(2))},between:function(n,t,i,r){return!0===r?n>=t&&n<=i:n>t&&n<i},parseMoney:function(n){return Number(parseFloat(n.replace(/[^0-9-.]/g,"")))},isVisible:function(n){return this.isJQueryObject(n)&&(n=n[0]),"none"!==this.getStyleOne(n,"display")&&"hidden"!==this.getStyleOne(n,"visibility")&&null!==n.offsetParent},parseNumber:function(n,t,i){return n.replace(new RegExp("\\"+t,"g"),"").replace(new RegExp("\\"+i,"g"),".")}},i.utils=r,yt={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onAccordionCreate,[this.element]),this},options:{duration:METRO_ANIMATION_DURATION,oneFrame:!0,showActive:!0,activeFrameClass:"",activeHeadingClass:"",activeContentClass:"",onFrameOpen:i.noop,onFrameBeforeOpen:i.noop_true,onFrameClose:i.noop,onFrameBeforeClose:i.noop_true,onAccordionCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t,n=this.element,i=this.options,u=n.children(".frame"),r=n.children(".frame.active");n.addClass("accordion");t=0===r.length?u[0]:r[0];this._hideAll();!0!==i.showActive&&!0!==i.oneFrame||this._openFrame(t);this._createEvents()},_createEvents:function(){var r=this,n=this.element,u=this.options,f=n.children(".frame.active");n.on(i.events.click,".heading",function(){var e=t(this),i=e.parent();if(e.closest(".accordion")[0]!==n[0])return!1;i.hasClass("active")?1===f.length&&u.oneFrame||r._closeFrame(i):r._openFrame(i);n.trigger("open",{frame:i})})},_openFrame:function(n){var f=this.element,i=this.options,u=(f.children(".frame"),t(n));if(!1===r.exec(i.onFrameBeforeOpen,[u],f[0]))return!1;!0===i.oneFrame&&this._closeAll();u.addClass("active "+i.activeFrameClass);u.children(".heading").addClass(i.activeHeadingClass);u.children(".content").addClass(i.activeContentClass).slideDown(i.duration);r.exec(i.onFrameOpen,[u],f[0])},_closeFrame:function(n){var f=this.element,i=this.options,u=t(n);!1!==r.exec(i.onFrameBeforeClose,[u],f[0])&&(u.removeClass("active "+i.activeFrameClass),u.children(".heading").removeClass(i.activeHeadingClass),u.children(".content").removeClass(i.activeContentClass).slideUp(i.duration),r.callback(i.onFrameClose,[u],f[0]))},_closeAll:function(){var n=this,i=this.element,r=(this.options,i.children(".frame"));t.each(r,function(){n._closeFrame(this)})},_hideAll:function(){var n=this.element,i=(this.options,n.children(".frame"));t.each(i,function(){t(this).children(".content").hide(0)})},_openAll:function(){var n=this,i=this.element,r=(this.options,i.children(".frame"));t.each(r,function(){n._openFrame(this)})},changeAttribute:function(){},destroy:function(){this.element.off(i.events.click,".heading")}},i.plugin("accordion",yt),pt={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onActivityCreate,[this.element]),this},options:{type:"ring",style:"light",size:64,radius:20,onActivityCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n,u,i=this.element,r=this.options;switch(i.html("").addClass(r.style+"-style").addClass("activity-"+r.type),r.type){case"metro":!function(){for(n=0;n<5;n++)t("<div/>").addClass("circle").appendTo(i)}();break;case"square":!function(){for(n=0;n<4;n++)t("<div/>").addClass("square").appendTo(i)}();break;case"cycle":t("<div/>").addClass("cycle").appendTo(i);break;case"simple":t('<svg class="circular"><circle class="path" cx="'+r.size/2+'" cy="'+r.size/2+'" r="'+r.radius+'" fill="none" stroke-width="2" stroke-miterlimit="10"/><\/svg>').appendTo(i);break;default:!function(){for(n=0;n<5;n++)u=t("<div/>").addClass("wrap").appendTo(i),t("<div/>").addClass("circle").appendTo(u)}()}},changeAttribute:function(){},destroy:function(){var t=this.element,n=this.options;t.html("").removeClass(n.style+"-style").removeClass("activity-"+n.type)}},i.plugin("activity",pt),i.activity={open:function(n){var t='<div data-role="activity" data-type="'+(n.type?n.type:"cycle")+'" data-style="'+(n.style?n.style:"color")+'"><\/div>',r=n.text?'<div class="text-center">'+n.text+"<\/div>":"";return i.dialog.create({content:t+r,defaultAction:!1,clsContent:"d-flex flex-column flex-justify-center flex-align-center bg-transparent no-shadow w-auto",clsDialog:"no-border no-shadow bg-transparent global-dialog",autoHide:n.autoHide?n.autoHide:0,overlayClickClose:!0===n.overlayClickClose,overlayColor:n.overlayColor?n.overlayColor:"#000000",overlayAlpha:n.overlayAlpha?n.overlayAlpha:.5,clsOverlay:"global-overlay"})},close:function(n){i.dialog.close(n)}},wt={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),this},options:{duration:100,onAppBarCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createStructure();this._createEvents();r.exec(t.onAppBarCreate,[n])},_createStructure:function(){var n,e,u=this.element,o=(this.options,r.elementId("app-bar")),f;if(u.addClass("app-bar"),0===(n=u.find(".hamburger")).length){for(n=t("<button>").attr("type","button").addClass("hamburger menu-down"),f=0;f<3;f++)t("<span>").addClass("line").appendTo(n);!0===h.isLight(r.computedRgbToHex(r.getStyleOne(u,"background-color")))&&n.addClass("dark")}u.prepend(n);0===(e=u.find(".app-bar-menu")).length?n.hide():r.addCssRule(i.sheet,".app-bar-menu li","list-style: none!important;");!1==!!u.attr("id")&&u.attr("id",o);"block"===n.css("display")?(e.hide().addClass("collapsed"),n.removeClass("hidden")):n.addClass("hidden")},_createEvents:function(){var f=this,r=this.element,n=(this.options,r.find(".app-bar-menu")),u=r.find(".hamburger");r.on(i.events.click,".hamburger",function(){0!==n.length&&(n.hasClass("collapsed")?f.open():f.close())});t(window).on(i.events.resize+"-"+r.attr("id"),function(){0!==n.length&&("block"!==u.css("display")?(n.show(),u.addClass("hidden")):(u.removeClass("hidden"),u.hasClass("active")?n.show().removeClass("collapsed"):n.hide().addClass("collapsed")))})},close:function(){var n=this.element,i=this.options,t=n.find(".app-bar-menu"),r=n.find(".hamburger");t.slideUp(i.duration,function(){t.addClass("collapsed");r.removeClass("active")})},open:function(){var n=this.element,i=this.options,t=n.find(".app-bar-menu"),r=n.find(".hamburger");t.slideDown(i.duration,function(){t.removeClass("collapsed");r.addClass("active")})},changeAttribute:function(){},destroy:function(){var n=this.element;n.off(i.events.click,".hamburger");t(window).off(i.events.resize+"-"+n.attr("id"))}},i.plugin("appbar",wt),bt={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.preloader=null,this.player=null,this.audio=i,this.stream=null,this.volume=null,this.volumeBackup=0,this.muted=!1,this._setOptionsFromDOM(),this._create(),this},options:{playlist:null,src:null,volume:.5,loop:!1,autoplay:!1,showLoop:!0,showPlay:!0,showStop:!0,showMute:!0,showFull:!0,showStream:!0,showVolume:!0,showInfo:!0,showPlaylist:!0,showNext:!0,showPrev:!0,showFirst:!0,showLast:!0,showForward:!0,showBackward:!0,showShuffle:!0,showRandom:!0,loopIcon:"<span class='default-icon-loop'><\/span>",stopIcon:"<span class='default-icon-stop'><\/span>",playIcon:"<span class='default-icon-play'><\/span>",pauseIcon:"<span class='default-icon-pause'><\/span>",muteIcon:"<span class='default-icon-mute'><\/span>",volumeLowIcon:"<span class='default-icon-low-volume'><\/span>",volumeMediumIcon:"<span class='default-icon-medium-volume'><\/span>",volumeHighIcon:"<span class='default-icon-high-volume'><\/span>",playlistIcon:"<span class='default-icon-playlist'><\/span>",nextIcon:"<span class='default-icon-next'><\/span>",prevIcon:"<span class='default-icon-prev'><\/span>",firstIcon:"<span class='default-icon-first'><\/span>",lastIcon:"<span class='default-icon-last'><\/span>",forwardIcon:"<span class='default-icon-forward'><\/span>",backwardIcon:"<span class='default-icon-backward'><\/span>",shuffleIcon:"<span class='default-icon-shuffle'><\/span>",randomIcon:"<span class='default-icon-random'><\/span>",onPlay:i.noop,onPause:i.noop,onStop:i.noop,onEnd:i.noop,onMetadata:i.noop,onTime:i.noop,onAudioCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t=this.element,n=this.options;this.audio;this._createPlayer();this._createControls();this._createEvents();!0===n.autoplay&&this.play();r.exec(n.onAudioCreate,[t,this.player])},_createPlayer:function(){var n=this.element,r=this.options,f=this.audio,u=n.prev(),e=n.parent(),i=t("<div>").addClass("media-player audio-player "+n[0].className);0===u.length?e.prepend(i):i.insertAfter(u);n.appendTo(i);t.each(["muted","autoplay","controls","height","width","loop","poster","preload"],function(){n.removeAttr(this)});n.attr("preload","auto");f.volume=r.volume;null!==r.src&&this._setSource(r.src);n[0].className="";this.player=i},_setSource:function(n){var i=this.element;i.find("source").remove();i.removeAttr("src");Array.isArray(n)?t.each(n,function(){void 0!==this.src&&t("<source>").attr("src",this.src).attr("type",void 0!==this.type?this.type:"").appendTo(i)}):i.attr("src",n)},_createControls:function(){var o,u=this,s=this.element,n=this.options,i=this.elem,r=(this.player,t("<div>").addClass("controls").addClass(n.clsControls).insertAfter(s)),f=t("<div>").addClass("stream").appendTo(r),h=t("<input>").addClass("stream-slider ultra-thin cycle-marker").appendTo(f),e=t("<div>").addClass("load-audio").appendTo(f),c=t("<div>").addClass("volume").appendTo(r),l=t("<input>").addClass("volume-slider ultra-thin cycle-marker").appendTo(c),a=t("<div>").addClass("info-box").appendTo(r);!0!==n.showInfo&&a.hide();e.activity({type:"metro",style:"color"});e.hide(0);this.preloader=e;h.slider({clsMarker:"bg-red",clsHint:"bg-cyan fg-white",clsComplete:"bg-cyan",hint:!0,onStart:function(){i.paused||i.pause()},onStop:function(n){i.seekable.length>0&&(i.currentTime=(u.duration*n/100).toFixed(0));i.paused&&i.currentTime>0&&i.play()}});this.stream=h;!0!==n.showStream&&f.hide();l.slider({clsMarker:"bg-red",clsHint:"bg-cyan fg-white",hint:!0,value:100*n.volume,onChangeValue:function(n){i.volume=n/100}});this.volume=l;!0!==n.showVolume&&c.hide();!0===n.showLoop&&(o=t("<button>").attr("type","button").addClass("button square loop").html(n.loopIcon).appendTo(r));!0===n.showPlay&&t("<button>").attr("type","button").addClass("button square play").html(n.playIcon).appendTo(r);!0===n.showStop&&t("<button>").attr("type","button").addClass("button square stop").html(n.stopIcon).appendTo(r);!0===n.showMute&&t("<button>").attr("type","button").addClass("button square mute").html(n.muteIcon).appendTo(r);!0===n.loop&&(o.addClass("active"),s.attr("loop","loop"));this._setVolume();n.muted&&(u.volumeBackup=i.volume,u.volume.data("slider").val(0),i.volume=0);a.html("00:00 / 00:00")},_createEvents:function(){var n=this,t=this.element,e=this.options,f=this.elem,u=this.player;t.on("loadstart",function(){n.preloader.fadeIn()});t.on("loadedmetadata",function(){n.duration=f.duration.toFixed(0);n._setInfo(0,n.duration);r.exec(e.onMetadata,[f,u])});t.on("canplay",function(){n._setBuffer();n.preloader.fadeOut()});t.on("progress",function(){n._setBuffer()});t.on("timeupdate",function(){var t=Math.round(100*f.currentTime/n.duration);n._setInfo(f.currentTime,n.duration);n.stream.data("slider").val(t);r.exec(e.onTime,[f.currentTime,n.duration,f,u])});t.on("waiting",function(){n.preloader.fadeIn()});t.on("loadeddata",function(){});t.on("play",function(){u.find(".play").html(e.pauseIcon);r.exec(e.onPlay,[f,u])});t.on("pause",function(){u.find(".play").html(e.playIcon);r.exec(e.onPause,[f,u])});t.on("stop",function(){n.stream.data("slider").val(0);r.exec(e.onStop,[f,u])});t.on("ended",function(){n.stream.data("slider").val(0);r.exec(e.onEnd,[f,u])});t.on("volumechange",function(){n._setVolume()});u.on(i.events.click,".play",function(){f.paused?n.play():n.pause()});u.on(i.events.click,".stop",function(){n.stop()});u.on(i.events.click,".mute",function(){n._toggleMute()});u.on(i.events.click,".loop",function(){n._toggleLoop()})},_toggleLoop:function(){var n=this.player.find(".loop");0!==n.length&&(n.toggleClass("active"),n.hasClass("active")?this.element.attr("loop","loop"):this.element.removeAttr("loop"))},_toggleMute:function(){this.muted=!this.muted;!1===this.muted?(this.audio.volume=this.volumeBackup,this.volume.data("slider").val(100*this.volumeBackup)):(this.volumeBackup=this.audio.volume,this.volume.data("slider").val(0),this.audio.volume=0)},_setInfo:function(n,t){this.player.find(".info-box").html(r.secondsToFormattedString(Math.round(n))+" / "+r.secondsToFormattedString(Math.round(t)))},_setBuffer:function(){var n=this.audio.buffered.length?Math.round(Math.floor(this.audio.buffered.end(0))/Math.floor(this.audio.duration)*100):0;this.stream.data("slider").buff(n)},_setVolume:function(){var r=this.audio,u=this.player,t=this.options,i=u.find(".mute"),n=100*r.volume;n>1&&n<30?i.html(t.volumeLowIcon):n>=30&&n<60?i.html(t.volumeMediumIcon):n>=60&&n<=100?i.html(t.volumeHighIcon):i.html(t.muteIcon)},play:function(n){void 0!==n&&this._setSource(n);void 0===this.element.attr("src")&&0===this.element.find("source").length||this.audio.play()},pause:function(){this.audio.pause()},resume:function(){this.audio.paused&&this.play()},stop:function(){this.audio.pause();this.audio.currentTime=0;this.stream.data("slider").val(0)},volume:function(n){if(void 0===n)return this.audio.volume;n>1&&(n/=100);this.audio.volume=n;this.volume.data("slider").val(100*n)},loop:function(){this._toggleLoop()},mute:function(){this._toggleMute()},changeSource:function(){var n=JSON.parse(this.element.attr("data-src"));this.play(n)},changeVolume:function(){var n=this.element.attr("data-volume");this.volume(n)},changeAttribute:function(n){switch(n){case"data-src":this.changeSource();break;case"data-volume":this.changeVolume()}},destroy:function(){var n=this.element,t=this.player;n.off("loadstart");n.off("loadedmetadata");n.off("canplay");n.off("progress");n.off("timeupdate");n.off("waiting");n.off("loadeddata");n.off("play");n.off("pause");n.off("stop");n.off("ended");n.off("volumechange");t.off(i.events.click,".play");t.off(i.events.click,".stop");t.off(i.events.click,".mute");t.off(i.events.click,".loop");i.destroyPlugin(this.stream,"slider");i.destroyPlugin(this.volume,"slider");n.insertBefore(t);t.html("").remove()}},i.plugin("audio",bt),kt={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.active=null,this._setOptionsFromDOM(),this._create(),this},options:{targets:"button",clsActive:"active",requiredButton:!1,mode:i.groupMode.ONE,onButtonClick:i.noop,onButtonsGroupCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createGroup();this._createEvents();r.exec(t.onButtonsGroupCreate,[n])},_createGroup:function(){var f,e,u=this.element,n=this.options,o=r.elementId("button-group");void 0===u.attr("id")&&u.attr("id",o);u.addClass("button-group");f=u.find(n.targets);e=u.find("."+n.clsActive);n.mode===i.groupMode.ONE&&0===e.length&&!0===n.requiredButton&&t(f[0]).addClass(n.clsActive);n.mode===i.groupMode.ONE&&e.length>1&&(f.removeClass(n.clsActive),t(f[0]).addClass(n.clsActive));u.find("."+n.clsActive).addClass("js-active")},_createEvents:function(){var u=this.element,n=this.options;u.on(i.events.click,n.targets,function(){var f=t(this);r.exec(n.onButtonClick,[f],this);n.mode===i.groupMode.ONE&&f.hasClass(n.clsActive)||(n.mode===i.groupMode.ONE?(u.find(n.targets).removeClass(n.clsActive).removeClass("js-active"),f.addClass(n.clsActive).addClass("js-active")):f.toggleClass(n.clsActive).toggleClass("js-active"))})},changeAttribute:function(){},destroy:function(){var t=this.element,n=this.options;t.off(i.events.click,n.targets);t.find(n.targets).removeClass(n.clsActive).removeClass("js-active")}},i.plugin("buttongroup",kt),dt={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.today=new Date,this.today.setHours(0,0,0,0),this.show=new Date,this.show.setHours(0,0,0,0),this.current={year:this.show.getFullYear(),month:this.show.getMonth(),day:this.show.getDate()},this.preset=[],this.selected=[],this.exclude=[],this.special=[],this.min=null,this.max=null,this.locale=null,this.minYear=this.current.year-this.options.yearsBefore,this.maxYear=this.current.year+this.options.yearsAfter,this.offset=(new Date).getTimezoneOffset()/60+1,this._setOptionsFromDOM(),this._create(),this},options:{pickerMode:!1,show:null,locale:METRO_LOCALE,weekStart:METRO_WEEK_START,outside:!0,buttons:"cancel, today, clear, done",yearsBefore:100,yearsAfter:100,headerFormat:"%A, %b %e",showHeader:!0,showFooter:!0,clsCalendar:"",clsCalendarHeader:"",clsCalendarContent:"",clsCalendarFooter:"",clsCalendarMonths:"",clsCalendarYears:"",clsToday:"",clsSelected:"",clsExcluded:"",clsCancelButton:"",clsTodayButton:"",clsClearButton:"",clsDoneButton:"",isDialog:!1,ripple:!1,rippleColor:"#cccccc",exclude:null,preset:null,minDate:null,maxDate:null,weekDayClick:!1,multiSelect:!1,special:null,onCancel:i.noop,onToday:i.noop,onClear:i.noop,onDone:i.noop,onDayClick:i.noop,onWeekDayClick:i.noop,onMonthChange:i.noop,onYearChange:i.noop,onCalendarCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var u=this,f=this.element,n=this.options;f.html("").addClass("calendar").addClass(n.clsCalendar);null!==n.preset&&(!1===Array.isArray(n.preset)&&(n.preset=n.preset.split(",").map(function(n){return n.trim()})),t.each(n.preset,function(){!1!==r.isDate(this)&&u.selected.push(new Date(this).getTime())}));null!==n.exclude&&(!1===Array.isArray(n.exclude)&&(n.exclude=n.exclude.split(",").map(function(n){return n.trim()})),t.each(n.exclude,function(){!1!==r.isDate(this)&&u.exclude.push(new Date(this).getTime())}));null!==n.special&&(!1===Array.isArray(n.special)&&(n.special=n.special.split(",").map(function(n){return n.trim()})),t.each(n.special,function(){!1!==r.isDate(this)&&u.special.push(new Date(this).getTime())}));!1!==n.buttons&&!1===Array.isArray(n.buttons)&&(n.buttons=n.buttons.split(",").map(function(n){return n.trim()}));null!==n.minDate&&r.isDate(n.minDate)&&(this.min=new Date(n.minDate).addHours(this.offset));null!==n.maxDate&&r.isDate(n.maxDate)&&(this.max=new Date(n.maxDate).addHours(this.offset));null!==n.show&&r.isDate(n.show)&&(this.show=new Date(n.show).addHours(this.offset),this.current={year:this.show.getFullYear(),month:this.show.getMonth(),day:this.show.getDate()});this.locale=void 0!==i.locales[n.locale]?i.locales[n.locale]:i.locales["en-US"];this._build()},_build:function(){var n=this.element;this._drawCalendar();this._bindEvents();!0===this.options.ripple&&n.ripple({rippleTarget:".button, .prev-month, .next-month, .prev-year, .next-year, .day",rippleColor:this.options.rippleColor});r.exec(this.options.onCalendarCreate,[this.element])},_bindEvents:function(){var n=this,u=this.element,f=this.options;u.on(i.events.click,".prev-month, .next-month, .prev-year, .next-year",function(i){var o,e=t(this);e.hasClass("prev-month")&&(o=new Date(n.current.year,n.current.month-1,1)).getFullYear()<n.minYear||e.hasClass("next-month")&&(o=new Date(n.current.year,n.current.month+1,1)).getFullYear()>n.maxYear||e.hasClass("prev-year")&&(o=new Date(n.current.year-1,n.current.month,1)).getFullYear()<n.minYear||e.hasClass("next-year")&&(o=new Date(n.current.year+1,n.current.month,1)).getFullYear()>n.maxYear||(n.current={year:o.getFullYear(),month:o.getMonth(),day:o.getDate()},setTimeout(function(){n._drawContent();(e.hasClass("prev-month")||e.hasClass("next-month"))&&r.exec(f.onMonthChange,[n.current,u],u[0]);(e.hasClass("prev-year")||e.hasClass("next-year"))&&r.exec(f.onYearChange,[n.current,u],u[0])},f.ripple?300:0),i.preventDefault(),i.stopPropagation())});u.on(i.events.click,".button.today",function(t){n.today=new Date;n.current={year:n.today.getFullYear(),month:n.today.getMonth(),day:n.today.getDate()};n._drawHeader();n._drawContent();r.exec(f.onToday,[n.today,u]);t.preventDefault();t.stopPropagation()});u.on(i.events.click,".button.clear",function(t){n.selected=[];n._drawContent();r.exec(f.onClear,[u]);t.preventDefault();t.stopPropagation()});u.on(i.events.click,".button.cancel",function(t){n._drawContent();r.exec(f.onCancel,[u]);t.preventDefault();t.stopPropagation()});u.on(i.events.click,".button.done",function(t){n._drawContent();r.exec(f.onDone,[n.selected,u]);t.preventDefault();t.stopPropagation()});u.on(i.events.click,".week-days .day",function(i){if(!1!==f.weekDayClick&&!1!==f.multiSelect){var e=t(this),o=e.index(),s=!0===f.outside?u.find(".days-row .day:nth-child("+(o+1)+")"):u.find(".days-row .day:not(.outside):nth-child("+(o+1)+")");t.each(s,function(){var i=t(this),u=i.data("day");r.arrayDelete(n.selected,u);n.selected.push(u);i.addClass("selected").addClass(f.clsSelected)});r.exec(f.onWeekDayClick,[n.selected,e,u]);i.preventDefault();i.stopPropagation()}});u.on(i.events.click,".days-row .day",function(i){var s,e,o=t(this);if(e=o.data("day"),s=n.selected.indexOf(e),o.hasClass("outside"))return e=new Date(e),n.current={year:e.getFullYear(),month:e.getMonth(),day:e.getDate()},void n._drawContent();!0===f.pickerMode?(n.selected=[e],n.today=new Date(e),n.current.year=n.today.getFullYear(),n.current.month=n.today.getMonth(),n.current.day=n.today.getDate(),n._drawHeader(),n._drawContent()):-1===s?(!1===f.multiSelect&&(u.find(".days-row .day").removeClass("selected").removeClass(f.clsSelected),n.selected=[]),n.selected.push(e),o.addClass("selected").addClass(f.clsSelected)):(o.removeClass("selected").removeClass(f.clsSelected),r.arrayDelete(n.selected,e));r.exec(f.onDayClick,[n.selected,o,u]);i.preventDefault();i.stopPropagation()});u.on(i.events.click,".curr-month",function(t){var r,i=u.find(".months-list");i.find(".active").removeClass("active");i.scrollTop(0);u.find(".calendar-months").addClass("open");r=i.find(".js-month-"+n.current.month).addClass("active");setTimeout(function(){i.animate({scrollTop:r.position().top-(i.height()-r.height())/2},200)},300);t.preventDefault();t.stopPropagation()});u.on(i.events.click,".calendar-months li",function(i){n.current.month=t(this).index();n._drawContent();r.exec(f.onMonthChange,[n.current,u],u[0]);u.find(".calendar-months").removeClass("open");i.preventDefault();i.stopPropagation()});u.on(i.events.click,".curr-year",function(t){var r,i=u.find(".years-list");i.find(".active").removeClass("active");i.scrollTop(0);u.find(".calendar-years").addClass("open");r=i.find(".js-year-"+n.current.year).addClass("active");setTimeout(function(){i.animate({scrollTop:r.position().top-(i.height()-r.height())/2},200)},300);t.preventDefault();t.stopPropagation()});u.on(i.events.click,".calendar-years li",function(i){n.current.year=t(this).text();n._drawContent();r.exec(f.onYearChange,[n.current,u],u[0]);u.find(".calendar-years").removeClass("open");i.preventDefault();i.stopPropagation()});u.on(i.events.click,function(n){var t=u.find(".calendar-months"),i=u.find(".calendar-years");t.hasClass("open")&&t.removeClass("open");i.hasClass("open")&&i.removeClass("open");n.preventDefault();n.stopPropagation()})},_drawHeader:function(){var r=this.element,i=this.options,n=r.find(".calendar-header");0===n.length&&(n=t("<div>").addClass("calendar-header").addClass(i.clsCalendarHeader).appendTo(r));n.html("");t("<div>").addClass("header-year").html(this.today.getFullYear()).appendTo(n);t("<div>").addClass("header-day").html(this.today.format(i.headerFormat,i.locale)).appendTo(n);!1===i.showHeader&&n.hide()},_drawFooter:function(){var r=this.element,n=this.options,u=this.locale.buttons,i=r.find(".calendar-footer");!1!==n.buttons&&(0===i.length&&(i=t("<div>").addClass("calendar-footer").addClass(n.clsCalendarFooter).appendTo(r)),i.html(""),t.each(n.buttons,function(){var r=t("<button>").attr("type","button").addClass("button "+this+" "+n["cls"+this.capitalize()+"Button"]).html(u[this]).appendTo(i);"cancel"!==this&&"done"!==this||r.addClass("js-dialog-close")}),!1===n.showFooter&&i.hide())},_drawMonths:function(){for(var i=this.element,r=this.options,u=t("<div>").addClass("calendar-months").addClass(r.clsCalendarMonths).appendTo(i),f=t("<ul>").addClass("months-list").appendTo(u),e=this.locale.calendar,n=0;n<12;n++)t("<li>").addClass("js-month-"+n).html(e.months[n]).appendTo(f)},_drawYears:function(){for(var i=this.element,r=this.options,u=t("<div>").addClass("calendar-years").addClass(r.clsCalendarYears).appendTo(i),f=t("<ul>").addClass("years-list").appendTo(u),n=this.minYear;n<=this.maxYear;n++)t("<li>").addClass("js-year-"+n).html(n).appendTo(f)},_drawContent:function(){var e,u,a,n,f,o,s,h,p=this.element,i=this.options,c=p.find(".calendar-content"),w=this.locale.calendar,b=0,r=new Date(this.current.year,this.current.month,1),d=new Date(this.current.year,this.current.month,0).getDate(),k,v,l,y;for(0===c.length&&(c=t("<div>").addClass("calendar-content").addClass(i.clsCalendarContent).appendTo(p)),c.html(""),e=t("<div>").addClass("calendar-toolbar").appendTo(c),t("<span>").addClass("prev-month").appendTo(e),t("<span>").addClass("curr-month").html(w.months[this.current.month]).appendTo(e),t("<span>").addClass("next-month").appendTo(e),t("<span>").addClass("prev-year").appendTo(e),t("<span>").addClass("curr-year").html(this.current.year).appendTo(e),t("<span>").addClass("next-year").appendTo(e),k=t("<div>").addClass("week-days").appendTo(c),u=0;u<7;u++)0===i.weekStart?a=u:7===(a=u+1)&&(a=0),t("<span>").addClass("day").html(w.days[a+7]).appendTo(k);for(v=t("<div>").addClass("days").appendTo(c),l=t("<div>").addClass("days-row").appendTo(v),o=0===i.weekStart?r.getDay():0===r.getDay()?6:r.getDay()-1,this.current.month-1<0?(h=11,s=this.current.year-1):(h=this.current.month-1,s=this.current.year),u=0;u<o;u++)y=d-o+u+1,n=t("<div>").addClass("day outside").appendTo(l),(f=new Date(s,h,y)).setHours(0,0,0,0),n.data("day",f.getTime()),!0===i.outside&&(n.html(y),0===this.special.length?(-1!==this.selected.indexOf(f.getTime())&&n.addClass("selected").addClass(i.clsSelected),-1!==this.exclude.indexOf(f.getTime())&&n.addClass("disabled excluded").addClass(i.clsExcluded),null!==this.min&&f<this.min&&n.addClass("disabled excluded").addClass(i.clsExcluded),null!==this.max&&f>this.max&&n.addClass("disabled excluded").addClass(i.clsExcluded)):-1===this.special.indexOf(f.getTime())&&n.addClass("disabled excluded").addClass(i.clsExcluded)),b++;for(r.setHours(0,0,0,0);r.getMonth()===this.current.month;)(n=t("<div>").addClass("day").html(r.getDate()).appendTo(l)).data("day",r.getTime()),this.today.getFullYear()===r.getFullYear()&&this.today.getMonth()===r.getMonth()&&this.today.getDate()===r.getDate()&&n.addClass("today").addClass(i.clsToday),0===this.special.length?(-1!==this.selected.indexOf(r.getTime())&&n.addClass("selected").addClass(i.clsSelected),-1!==this.exclude.indexOf(r.getTime())&&n.addClass("disabled excluded").addClass(i.clsExcluded),null!==this.min&&r.getTime()<this.min.getTime()&&n.addClass("disabled excluded").addClass(i.clsExcluded),null!==this.max&&r.getTime()>this.max.getTime()&&n.addClass("disabled excluded").addClass(i.clsExcluded)):-1===this.special.indexOf(r.getTime())&&n.addClass("disabled excluded").addClass(i.clsExcluded),++b%7==0&&(l=t("<div>").addClass("days-row").appendTo(v)),r.setDate(r.getDate()+1),r.setHours(0,0,0,0);if(o=0===i.weekStart?r.getDay():0===r.getDay()?6:r.getDay()-1,this.current.month+1>11?(h=0,s=this.current.year+1):(h=this.current.month+1,s=this.current.year),o>0)for(u=0;u<7-o;u++)n=t("<div>").addClass("day outside").appendTo(l),(f=new Date(s,h,u+1)).setHours(0,0,0,0),n.data("day",f.getTime()),!0===i.outside&&(n.html(u+1),0===this.special.length?(-1!==this.selected.indexOf(f.getTime())&&n.addClass("selected").addClass(i.clsSelected),-1!==this.exclude.indexOf(f.getTime())&&n.addClass("disabled excluded").addClass(i.clsExcluded),null!==this.min&&f.getTime()<this.min.getTime()&&n.addClass("disabled excluded").addClass(i.clsExcluded),null!==this.max&&f.getTime()>this.max.getTime()&&n.addClass("disabled excluded").addClass(i.clsExcluded)):-1===this.special.indexOf(f.getTime())&&n.addClass("disabled excluded").addClass(i.clsExcluded))},_drawCalendar:function(){this.element.html("");this._drawHeader();this._drawContent();this._drawFooter();this._drawMonths();this._drawYears()},getPreset:function(){return this.preset},getSelected:function(){return this.selected},getExcluded:function(){return this.exclude},getToday:function(){return this.today},getCurrent:function(){return this.current},setExclude:function(n){var u=this,f=this.element,i=this.options;i.exclude=void 0!==n?n:f.attr("data-exclude");null!==i.exclude&&(!1===Array.isArray(i.exclude)&&(i.exclude=i.exclude.split(",").map(function(n){return n.trim()})),t.each(i.exclude,function(){!1!==r.isDate(this)&&u.exclude.push(new Date(this).getTime())}));this._drawContent()},setPreset:function(n){var u=this,f=this.element,i=this.options;i.preset=void 0!==n?n:f.attr("data-preset");null!==i.preset&&(u.selected=[],!1===Array.isArray(i.preset)&&(i.preset=i.preset.split(",").map(function(n){return n.trim()})),t.each(i.preset,function(){!1!==r.isDate(this)&&u.selected.push(new Date(this).getTime())}));this._drawContent()},setSpecial:function(n){var u=this,f=this.element,i=this.options;i.special=void 0!==n?n:f.attr("data-special");null!==i.special&&(u.special=[],!1===Array.isArray(i.special)&&(i.special=i.special.split(",").map(function(n){return n.trim()})),t.each(i.special,function(){!1!==r.isDate(this)&&u.special.push(new Date(this).getTime())}));this._drawContent()},setShow:function(n){var i=this.element,t=this.options;t.show=null!==n?n:i.attr("data-show");null!==t.show&&r.isDate(t.show)&&(this.show=new Date(t.show),this.show.setHours(0,0,0,0),this.current={year:this.show.getFullYear(),month:this.show.getMonth(),day:this.show.getDate()});this._drawContent()},setMinDate:function(n){var t=this.element;this.options.minDate=null!==n?n:t.attr("data-min-date");this._drawContent()},setMaxDate:function(n){var t=this.element;this.options.maxDate=null!==n?n:t.attr("data-max-date");this._drawContent()},setToday:function(n){!1!==r.isDate(n)&&(this.today=new Date(n),this.today.setHours(0,0,0,0),this._drawHeader(),this._drawContent())},i18n:function(n){this.element;var t=this.options;return void 0===n?t.locale:void 0!==i.locales[n]&&(t.locale=n,this.locale=i.locales[t.locale],void this._drawCalendar())},changeAttrLocale:function(){var n=this.element;this.options;this.i18n(n.attr("data-locale"))},changeAttribute:function(n){switch(n){case"data-exclude":this.setExclude();break;case"data-preset":this.setPreset();break;case"data-special":this.setSpecial();break;case"data-show":this.setShow();break;case"data-min-date":this.setMinDate();break;case"data-max-date":this.setMaxDate();break;case"data-locale":this.changeAttrLocale()}},destroy:function(){var n=this.element,t=this.options;n.off(i.events.click,".prev-month, .next-month, .prev-year, .next-year");n.off(i.events.click,".button.today");n.off(i.events.click,".button.clear");n.off(i.events.click,".button.cancel");n.off(i.events.click,".button.done");n.off(i.events.click,".week-days .day");n.off(i.events.click,".days-row .day");n.off(i.events.click,".curr-month");n.off(i.events.click,".calendar-months li");n.off(i.events.click,".curr-year");n.off(i.events.click,".calendar-years li");n.off(i.events.click);!0===t.ripple&&i.destroyPlugin(n,"ripple");n.html("")}},t(document).on(i.events.click,function(){t(".calendar .calendar-years").each(function(){t(this).removeClass("open")});t(".calendar .calendar-months").each(function(){t(this).removeClass("open")})}),i.plugin("calendar",dt),gt={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.value=null,this.value_date=null,this.calendar=null,this._setOptionsFromDOM(),this._create(),r.exec(this.options.onCalendarPickerCreate,[this.element]),this},dependencies:["calendar"],options:{locale:METRO_LOCALE,size:"100%",format:"%Y/%m/%d",headerFormat:"%A, %b %e",clearButton:!1,calendarButtonIcon:"<span class='default-icon-calendar'><\/span>",clearButtonIcon:"<span class='default-icon-cross'><\/span>",copyInlineStyles:!1,clsPicker:"",clsInput:"",yearsBefore:100,yearsAfter:100,weekStart:METRO_WEEK_START,outside:!0,clsCalendar:"",clsCalendarHeader:"",clsCalendarContent:"",clsCalendarFooter:"",clsCalendarMonths:"",clsCalendarYears:"",clsToday:"",clsSelected:"",clsExcluded:"",ripple:!1,rippleColor:"#cccccc",exclude:null,preset:null,minDate:null,maxDate:null,special:null,showHeader:!0,showFooter:!0,onDayClick:i.noop,onCalendarPickerCreate:i.noop,onCalendarShow:i.noop,onCalendarHide:i.noop,onChange:i.noop,onMonthChange:i.noop,onYearChange:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var h,o=this,u=this.element,n=this.options,c=u.prev(),l=u.parent(),e=t("<div>").addClass("input "+u[0].className+" calendar-picker"),s=t("<div>").addClass("button-group"),f=t("<div>").addClass("drop-shadow");void 0===u.attr("type")&&u.attr("type","text");this.value=u.val();r.isDate(this.value)&&(this.value_date=new Date(this.value),this.value_date.setHours(0,0,0,0),u.val(this.value_date.format(n.format)));0===c.length?l.prepend(e):e.insertAfter(c);u.appendTo(e);s.appendTo(e);f.appendTo(e);f.calendar({pickerMode:!0,show:n.value,locale:n.locale,weekStart:n.weekStart,outside:n.outside,buttons:!1,headerFormat:n.headerFormat,clsCalendar:n.clsCalendar,clsCalendarHeader:n.clsCalendarHeader,clsCalendarContent:n.clsCalendarContent,clsCalendarFooter:n.clsCalendarFooter,clsCalendarMonths:n.clsCalendarMonths,clsCalendarYears:n.clsCalendarYears,clsToday:n.clsToday,clsSelected:n.clsSelected,clsExcluded:n.clsExcluded,ripple:n.ripple,rippleColor:n.rippleColor,exclude:n.exclude,minDate:n.minDate,maxDate:n.maxDate,yearsBefore:n.yearsBefore,yearsAfter:n.yearsAfter,special:n.special,showHeader:n.showHeader,showFooter:n.showFooter,onDayClick:function(t,i,e){var s=new Date(t[0]);o.value=s.format("%Y/%m/%d");o.value_date=s;u.val(s.format(n.format,n.locale));u.trigger("change");f.removeClass("open open-up");f.hide();r.exec(n.onChange,[o.value,o.value_date,u]);r.exec(n.onDayClick,[t,i,e])},onMonthChange:n.onMonthChange,onYearChange:n.onYearChange});f.hide();this.calendar=f;t("<button>").addClass("button").attr("tabindex",-1).attr("type","button").html(n.calendarButtonIcon).appendTo(s);e.on(i.events.click,"button, input",function(i){r.isDate(o.value)&&!1===f.hasClass("open")&&!1===f.hasClass("open-up")&&(f.css({visibility:"hidden",display:"block"}),f.data("calendar").setPreset(o.value),f.data("calendar").setShow(o.value),f.data("calendar").setToday(o.value),f.css({visibility:"visible",display:"none"}));!1===f.hasClass("open")&&!1===f.hasClass("open-up")?(t(".calendar-picker .calendar").removeClass("open open-up").hide(),f.addClass("open"),!1===r.isOutsider(f)&&f.addClass("open-up"),f.show(),r.exec(n.onCalendarShow,[u,f])):(f.removeClass("open open-up"),f.hide(),r.exec(n.onCalendarHide,[u,f]));i.preventDefault();i.stopPropagation()});!0===n.clearButton&&((h=t("<button>").addClass("button").attr("tabindex",-1).attr("type","button").html(n.clearButtonIcon)).on(i.events.click,function(){u.val("").trigger("change")}),h.appendTo(s));"rtl"===u.attr("dir")&&e.addClass("rtl");String(n.size).indexOf("%")>-1?e.css({width:n.size}):e.css({width:parseInt(n.size)+"px"});u[0].className="";u.attr("readonly",!0);!0===n.copyInlineStyles&&t.each(r.getInlineStyles(u),function(n,t){e.css(n,t)});e.addClass(n.clsPicker);u.addClass(n.clsInput);u.on(i.events.blur,function(){e.removeClass("focused")});u.on(i.events.focus,function(){e.addClass("focused")});u.on(i.events.change,function(){r.exec(n.onChange,[o.value_date,o.value,u])})},val:function(n){var t=this.element,i=this.options;if(void 0===n)return this.value_date;!0===r.isDate(n)&&(this.value_date=new Date(n),this.value=this.value_date.format(i.format),t.val(this.value_date.format(i.format)),t.trigger("change"))},changeValue:function(){var n=this.element;this.options;this.val(n.attr("value"))},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},i18n:function(n){this.element;var r,u=this.options,t=this.calendar;return void 0===n?u.locale:void 0!==i.locales[n]&&((r=t.is(":hidden"))&&t.css({visibility:"hidden",display:"block"}),t.data("calendar").i18n(n),void(r&&t.css({visibility:"visible",display:"none"})))},changeAttrLocale:function(){var n=this.element;this.options;this.i18n(n.attr("data-locale"))},changeAttrSpecial:function(){var n=this.element;this.options;this.calendar.data("calendar").setSpecial(n.attr("data-special"))},changeAttrExclude:function(){var n=this.element;this.options;this.calendar.data("calendar").setExclude(n.attr("data-exclude"))},changeAttribute:function(n){switch(n){case"value":this.changeValue();break;case"disabled":this.toggleState();break;case"data-locale":this.changeAttrLocale();break;case"data-special":this.changeAttrSpecial();break;case"data-exclude":this.changeAttrExclude()}}},i.plugin("calendarpicker",gt),t(document).on(i.events.click,function(){t(".calendar-picker .calendar").removeClass("open open-up").hide()}),ni={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.height=0,this.width=0,this.slides=[],this.current=null,this.currentIndex=null,this.dir=this.options.direction,this.interval=null,this.isAnimate=!1,this._setOptionsFromDOM(),this._create(),this},options:{autoStart:!1,width:"100%",height:"16/9",effect:"slide",effectFunc:"linear",direction:"left",duration:METRO_ANIMATION_DURATION,period:5e3,stopOnMouse:!0,controls:!0,bullets:!0,bulletStyle:"square",controlsOnMouse:!1,controlsOutside:!1,bulletsPosition:"default",controlPrev:"&#x23F4",controlNext:"&#x23F5",clsCarousel:"",clsSlides:"",clsSlide:"",clsControls:"",clsControlNext:"",clsControlPrev:"",clsBullets:"",clsBullet:"",clsBulletOn:"",clsThumbOn:"",onStop:i.noop,onStart:i.noop,onPlay:i.noop,onSlideClick:i.noop,onBulletClick:i.noop,onThumbClick:i.noop,onMouseEnter:i.noop,onMouseLeave:i.noop,onNextClick:i.noop,onPrevClick:i.noop,onCarouselCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,i=this.options,u=n.find(".slide"),f=n.find(".slides"),e=r.elementId("carousel");void 0===n.attr("id")&&n.attr("id",e);n.addClass("carousel").addClass(i.clsCarousel);!0===i.controlsOutside&&n.addClass("controls-outside");0===f.length&&(f=t("<div>").addClass("slides").appendTo(n),u.appendTo(f));u.addClass(i.clsSlides);0!==u.length?(this._createSlides(),this._createControls(),this._createBullets(),this._createEvents(),this._resize(),!0===i.controlsOnMouse&&(n.find("[class*=carousel-switch]").hide(),n.find(".carousel-bullets").hide()),!0===i.autoStart&&this._start(),r.exec(this.options.onCarouselCreate,[this.element])):r.exec(this.options.onCarouselCreate,[this.element])},_start:function(){var u=this,f=this.element,n=this.options,t=n.period,i=this.slides[this.currentIndex];void 0!==i.data("period")&&(t=i.data("period"));this.slides.length<=1||(this.interval=setTimeout(function(){var t="left"===n.direction?"next":"prior";u._slideTo(t,!0)},t),r.exec(n.onStart,[f]))},_stop:function(){clearInterval(this.interval);this.interval=!1},_resize:function(){var i,u=this.element,n=this.options,f=u.outerWidth(),e=[];["16/9","21/9","4/3"].indexOf(n.height)>-1?i=r.aspectRatioH(f,n.height):String(n.height).indexOf("@")>-1?(e=r.strToArray(n.height.substr(1),"|"),t.each(e,function(){var n=r.strToArray(this,",");window.matchMedia(n[0]).matches&&(i=["16/9","21/9","4/3"].indexOf(n[1])>-1?r.aspectRatioH(f,n[1]):parseInt(n[1]))})):i=parseInt(n.height);u.css({height:i})},_createSlides:function(){var i=this,r=this.element,n=this.options,u=r.find(".slide");t.each(u,function(r){var u=t(this);if(void 0!==u.data("cover")&&u.css({backgroundImage:"url("+u.data("cover")+")",backgroundSize:"cover",backgroundRepeat:"no-repeat"}),0!==r)switch(n.effect){case"switch":case"slide":u.css("left","100%");break;case"slide-v":u.css("top","100%");break;case"fade":u.css("opacity","0")}u.addClass(n.clsSlide);i.slides.push(u)});this.currentIndex=0;this.current=this.slides[this.currentIndex]},_createControls:function(){var i,r,u=this.element,n=this.options;!1!==n.controls&&(i=t("<span/>").addClass("carousel-switch-next").addClass(n.clsControls).addClass(n.clsControlNext).html(">"),r=t("<span/>").addClass("carousel-switch-prev").addClass(n.clsControls).addClass(n.clsControlPrev).html("<"),n.controlNext&&i.html(n.controlNext),n.controlPrev&&r.html(n.controlPrev),i.appendTo(u),r.appendTo(u))},_createBullets:function(){var i,r,f=this.element,n=this.options,u;if(!1!==n.bullets){for(i=t("<div>").addClass("carousel-bullets").addClass("bullet-style-"+n.bulletStyle).addClass(n.clsBullets),"default"===n.bulletsPosition||"center"===n.bulletsPosition?i.addClass("flex-justify-center"):"left"===n.bulletsPosition?i.addClass("flex-justify-start"):i.addClass("flex-justify-end"),r=0;r<this.slides.length;r++)u=t("<span>").addClass("carousel-bullet").addClass(n.clsBullet).data("slide",r),0===r&&u.addClass("bullet-on").addClass(n.clsBulletOn),u.appendTo(i);i.appendTo(f)}},_createEvents:function(){var f=this,n=this.element,u=this.options;n.on(i.events.click,".carousel-bullet",function(i){var e=t(this);!1===f.isAnimate&&(f._slideToSlide(e.data("slide")),r.exec(u.onBulletClick,[e,n,i]))});n.on(i.events.click,".carousel-switch-next",function(t){!1===f.isAnimate&&(f._slideTo("next",!1),r.exec(u.onNextClick,[n,t]))});n.on(i.events.click,".carousel-switch-prev",function(t){!1===f.isAnimate&&(f._slideTo("prev",!1),r.exec(u.onPrevClick,[n,t]))});!0===u.stopOnMouse&&!0===u.autoStart&&(n.on(i.events.enter,function(t){!0===u.controlsOnMouse&&(n.find("[class*=carousel-switch]").fadeIn(),n.find(".carousel-bullets").fadeIn());f._stop();r.exec(u.onMouseEnter,[n,t])}),n.on(i.events.leave,function(t){!0===u.controlsOnMouse&&(n.find("[class*=carousel-switch]").fadeOut(),n.find(".carousel-bullets").fadeOut());f._start();r.exec(u.onMouseLeave,[n,t])}));!0===u.controlsOnMouse&&(n.on(i.events.enter,function(){n.find("[class*=carousel-switch]").fadeIn();n.find(".carousel-bullets").fadeIn()}),n.on(i.events.leave,function(){n.find("[class*=carousel-switch]").fadeOut();n.find(".carousel-bullets").fadeOut()}));n.on(i.events.click,".slide",function(i){var f=t(this);r.exec(u.onSlideClick,[f,n,i])});t(window).on(i.events.resize+"-"+n.attr("id"),function(){f._resize()})},_slideToSlide:function(n){var i,r,u,f=this.element,t=this.options;void 0!==this.slides[n]&&this.currentIndex!==n&&(u=n>this.currentIndex?"next":"prev",i=this.slides[this.currentIndex],r=this.slides[n],this.currentIndex=n,this._effect(i,r,t.effect,u),f.find(".carousel-bullet").removeClass("bullet-on").removeClass(t.clsBulletOn),f.find(".carousel-bullet:nth-child("+(this.currentIndex+1)+")").addClass("bullet-on").addClass(t.clsBulletOn))},_slideTo:function(n,t){var r,u,f=this.element,i=this.options;void 0===n&&(n="next");r=this.slides[this.currentIndex];"next"===n?(this.currentIndex++,this.currentIndex>=this.slides.length&&(this.currentIndex=0)):(this.currentIndex--,this.currentIndex<0&&(this.currentIndex=this.slides.length-1));u=this.slides[this.currentIndex];this._effect(r,u,i.effect,n,t);f.find(".carousel-bullet").removeClass("bullet-on").removeClass(i.clsBulletOn);f.find(".carousel-bullet:nth-child("+(this.currentIndex+1)+")").addClass("bullet-on").addClass(i.clsBulletOn)},_effect:function(n,t,i,r,u){var o,h=this,e=(this.element,this.options),f=e.duration,s=e.effectFunc,l=e.period;switch(void 0!==t.data("duration")&&(f=t.data("duration")),void 0!==t.data("effectFunc")&&(s=t.data("effectFunc")),"switch"===i&&(f=0),n.stop(!0,!0),t.stop(!0,!0),this.isAnimate=!0,setTimeout(function(){h.isAnimate=!1},f),"slide"===i&&(o="next"===r?"slideLeft":"slideRight"),"slide-v"===i&&(o="next"===r?"slideUp":"slideDown"),i){case"slide":case"slide-v":c[o](n,t,f,s);break;case"fade":c.fade(n,t,f,s);break;default:c.switch(n,t)}!0===u&&(void 0!==t.data("period")&&(l=t.data("period")),this.interval=setTimeout(function(){var n="left"===e.direction?"next":"prior";h._slideTo(n,!0)},l))},toSlide:function(n){this._slideToSlide(n)},next:function(){this._slideTo("next")},prev:function(){this._slideTo("prev")},stop:function(){clearInterval(this.interval);r.exec(this.options.onStop,[this.element])},play:function(){this._start();r.exec(this.options.onPlay,[this.element])},changeAttribute:function(){},destroy:function(){var n=this.element,r=this.options;n.off(i.events.click,".carousel-bullet");n.off(i.events.click,".carousel-switch-next");n.off(i.events.click,".carousel-switch-prev");!0===r.stopOnMouse&&!0===r.autoStart&&(n.off(i.events.enter),n.off(i.events.leave));!0===r.controlsOnMouse&&(n.off(i.events.enter),n.off(i.events.leave));n.off(i.events.click,".slide");t(window).off(i.events.resize+"-"+n.attr("id"));n.removeClass("carousel").removeClass(r.clsCarousel);!0===r.controlsOutside&&n.removeClass("controls-outside")}},i.plugin("carousel",ni),ti={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.origin={background:""},this._setOptionsFromDOM(),this._create(),this},options:{position:"right",opacity:1,clsCharms:"",onCharmCreate:i.noop,onOpen:i.noop,onClose:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createStructure();this._createEvents();r.exec(t.onCharmCreate,[n])},_createStructure:function(){var n=this.element,t=this.options;n.addClass("charms").addClass(t.position+"-side").addClass(t.clsCharms);this.origin.background=n.css("background-color");n.css({backgroundColor:r.computedRgbToRgba(r.getStyleOne(n,"background-color"),t.opacity)})},_createEvents:function(){var n=this.element;this.options;n.on(i.events.click,function(){})},open:function(){var n=this.element,t=this.options;n.addClass("open");r.exec(t.onOpen,[n])},close:function(){var n=this.element,t=this.options;n.removeClass("open");r.exec(t.onClose,[n])},toggle:function(){var n=this.element,t=this.options;n.toggleClass("open");!0===n.hasClass("open")?r.exec(t.onOpen,[n]):r.exec(t.onClose,[n])},opacity:function(n){var i=this.element,u=this.options,t;if(void 0===n)return u.opacity;t=Math.abs(parseFloat(n));t<0||t>1||(u.opacity=t,i.css({backgroundColor:r.computedRgbToRgba(r.getStyleOne(i,"background-color"),t)}))},changeOpacity:function(){var n=this.element;this.opacity(n.attr("data-opacity"))},changeAttribute:function(n){switch(n){case"data-opacity":this.changeOpacity()}},destroy:function(){var n=this.element,t=this.options;n.off(i.events.click);n.removeClass("charms").removeClass(t.position+"-side").removeClass(t.clsCharms);n.css("background-color",this.origin.background)}},i.plugin("charms",ti),i.charms={check:function(n){return!1!==r.isMetroObject(n,"charms")||(console.log("Element is not a charms component"),!1)},isOpen:function(n){if(!1!==this.check(n))return t(n).data("charms").hasClass("open")},open:function(n){!1!==this.check(n)&&t(n).data("charms").open()},close:function(n){!1!==this.check(n)&&t(n).data("charms").close()},toggle:function(n){!1!==this.check(n)&&t(n).data("charms").toggle()},closeAll:function(){t("[data-role*=charms]").each(function(){t(this).data("charms").close()})},opacity:function(n,i){!1!==this.check(n)&&t(n).data("charms").opacity(i)}},ii={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.origin={className:""},this._setOptionsFromDOM(),this._create(),r.exec(this.options.onCheckboxCreate,[this.element]),this},options:{caption:"",indeterminate:!1,captionPosition:"right",disabled:!1,clsElement:"",clsCheck:"",clsCaption:"",onCheckboxCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,u=this.options,f=n.prev(),s=n.parent(),i=t("<label>").addClass("checkbox "+n[0].className),e=t("<span>").addClass("check"),o=t("<span>").addClass("caption").html(u.caption);void 0===n.attr("id")&&n.attr("id",r.elementId("checkbox"));i.attr("for",n.attr("id"));n.attr("type","checkbox");n.appendTo(i);0===f.length?s.prepend(i):i.insertAfter(f);e.appendTo(i);o.appendTo(i);"left"===u.captionPosition&&i.addClass("caption-left");this.origin.className=n[0].className;n[0].className="";i.addClass(u.clsElement);o.addClass(u.clsCaption);e.addClass(u.clsCheck);u.indeterminate&&(n[0].indeterminate=!0);!0===u.disabled&&n.is(":disabled")?this.disable():this.enable()},indeterminate:function(){this.element[0].indeterminate=!0},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},toggleIndeterminate:function(){this.element[0].indeterminate=!0===JSON.parse(this.element.attr("data-indeterminate"))},changeAttribute:function(n){switch(n){case"disabled":this.toggleState();break;case"data-indeterminate":this.toggleIndeterminate()}},destroy:function(){var n=this.element,t=(this.options,n.parent());n[0].className=this.origin.className;n.insertBefore(t);t.remove()}},i.plugin("checkbox",ii),ri={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._clockInterval=null,this._setOptionsFromDOM(),this._create(),r.exec(this.options.onClockCreate,[this.element]),this},options:{showTime:!0,showDate:!0,timeFormat:"24",dateFormat:"american",divider:"&nbsp;&nbsp;",onClockCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this;this._tick();this._clockInterval=setInterval(function(){n._tick()},500)},_addLeadingZero:function(n){return n<10&&(n="0"+n),n},_tick:function(){var h=this.element,r=this.options,i=new Date,n=(i.getTime(),""),t=i.getHours(),e=i.getMinutes(),o=i.getSeconds(),u=i.getDate(),f=i.getMonth()+1,s=i.getFullYear();"12"===r.timeFormat&&(t>11&&" PM",t>12&&(t-=12),0===t&&(t=12));t=this._addLeadingZero(t);e=this._addLeadingZero(e);o=this._addLeadingZero(o);f=this._addLeadingZero(f);u=this._addLeadingZero(u);r.showDate&&("american"===r.dateFormat?(n+="<span class='date-month'>"+f+"<\/span>",n+="<span class='date-divider'>-<\/span>",n+="<span class='date-day'>"+u+"<\/span>",n+="<span class='date-divider'>-<\/span>",n+="<span class='date-year'>"+s+"<\/span>"):(n+="<span class='date-day'>"+u+"<\/span>",n+="<span class='date-divider'>-<\/span>",n+="<span class='date-month'>"+f+"<\/span>",n+="<span class='date-divider'>-<\/span>",n+="<span class='date-year'>"+s+"<\/span>"),n+=r.divider);r.showTime&&(n+="<span class='clock-hour'>"+t+"<\/span>",n+="<span class='clock-divider'>:<\/span>",n+="<span class='clock-minute'>"+e+"<\/span>",n+="<span class='clock-divider'>:<\/span>",n+="<span class='clock-second'>"+o+"<\/span>");h.html(n)},changeAttribute:function(){},destroy:function(){clearInterval(this._clockInterval);this._clockInterval=null;this.element.html("")}},i.plugin("clock",ri),ui={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.toggle=null,this._setOptionsFromDOM(),this._create(),r.exec(this.options.onCollapseCreate,[this.element]),this},options:{collapsed:!1,toggleElement:!1,duration:METRO_ANIMATION_DURATION,onExpand:i.noop,onCollapse:i.noop,onCollapseCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var r,f=this,n=this.element,u=this.options;r=!1!==u.toggleElement?t(u.toggleElement):n.siblings(".collapse-toggle").length>0?n.siblings(".collapse-toggle"):n.siblings("a:nth-child(1)");!0!==u.collapsed&&!0!==n.attr("collapsed")||n.hide(0);r.on(i.events.click,function(t){"block"!==n.css("display")||n.hasClass("keep-open")?f._open(n):f._close(n);t.preventDefault();t.stopPropagation()});this.toggle=r},_close:function(n){!1===r.isJQueryObject(n)&&(n=t(n));var i=n.data("collapse").options;this.toggle.removeClass("active-toggle");n.slideUp(i.duration,function(){n.trigger("onCollapse",null,n);n.data("collapsed",!0);n.addClass("collapsed");r.exec(i.onCollapse,[n])})},_open:function(n){!1===r.isJQueryObject(n)&&(n=t(n));var i=n.data("collapse").options;this.toggle.addClass("active-toggle");n.slideDown(i.duration,function(){n.trigger("onExpand",null,n);n.data("collapsed",!1);n.removeClass("collapsed");r.exec(i.onExpand,[n])})},collapse:function(){this._close(this.element)},expand:function(){this._open(this.element)},isCollapsed:function(){return this.element.data("collapsed")},toggleState:function(){var n=this.element;!0===n.attr("collapsed")||!0===n.data("collapsed")?this.collapse():this.expand()},changeAttribute:function(n){switch(n){case"collapsed":case"data-collapsed":this.toggleState()}},destroy:function(){this.toggle.off(i.events.click);this.element.show()}},i.plugin("collapse",ui),fi={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.timepoint=(new Date).getTime(),this.breakpoint=null,this.blinkInterval=null,this.tickInterval=null,this.zeroDaysFired=!1,this.zeroHoursFired=!1,this.zeroMinutesFired=!1,this.zeroSecondsFired=!1,this.locale=null,this._setOptionsFromDOM(),this._create(),this},options:{locale:METRO_LOCALE,days:0,hours:0,minutes:0,seconds:0,date:null,start:!0,clsCountdown:"",clsZero:"",clsAlarm:"",clsDays:"",clsHours:"",clsMinutes:"",clsSeconds:"",onCountdownCreate:i.noop,onAlarm:i.noop,onTick:i.noop,onZero:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.options;this.locale=void 0!==i.locales[n.locale]?i.locales[n.locale]:i.locales["en-US"];this._build()},_build:function(){var u,f,o,i=this,e=this.element,n=this.options;e.addClass("countdown").addClass(n.clsCountdown);null!==n.date&&!1!==r.isDate(n.date)&&(this.timepoint=new Date(n.date).getTime());this.breakpoint=this.timepoint;parseInt(n.days)>0&&(this.breakpoint+=864e5*parseInt(n.days));parseInt(n.hours)>0&&(this.breakpoint+=36e5*parseInt(n.hours));parseInt(n.minutes)>0&&(this.breakpoint+=6e4*parseInt(n.minutes));parseInt(n.seconds)>0&&(this.breakpoint+=1e3*parseInt(n.seconds));u=Math.round((i.breakpoint-i.timepoint)/864e5);f=Math.round((i.breakpoint-i.timepoint)/36e5);o=Math.round((i.breakpoint-i.timepoint)/6e4);t.each(["days","hours","minutes","seconds"],function(){var r,s;if(("days"!==this||0!==u)&&!("hours"===this&&0===u&&0===f||"minutes"===this&&0===u&&0===f&&0===o)&&(r=t("<div>").addClass("part "+this).attr("data-label",i.locale.calendar.time[this]).appendTo(e),"days"===this&&r.addClass(n.clsDays),"hours"===this&&r.addClass(n.clsHours),"minutes"===this&&r.addClass(n.clsMinutes),"seconds"===this&&r.addClass(n.clsSeconds),t("<div>").addClass("digit").appendTo(r),t("<div>").addClass("digit").appendTo(r),"days"===this&&u>=100))for(s=0;s<String(u/100).length;s++)t("<div>").addClass("digit").appendTo(r)});e.find(".digit").html("0");r.exec(this.options.onCountdownCreate,[this.element]);!0===this.options.start&&this.start()},blink:function(){this.element.toggleClass("blink")},tick:function(){var i,u,f,e,o,t=this.element,n=this.options,s=(new Date).getTime();if((i=Math.floor((this.breakpoint-s)/1e3))<=0)return this.stop(),""!==n.clsZero&&t.find(".part").removeClass(n.clsZero),t.addClass(n.clsAlarm),void r.exec(n.onAlarm,[s,t]);i-=86400*(u=Math.floor(i/86400));this.draw("days",u);0===u&&(""!==n.clsDays&&t.find(".days").removeClass(n.clsDays),!1===this.zeroDaysFired&&(this.zeroDaysFired=!0,t.find(".days").addClass(n.clsZero),r.exec(n.onZero,["days",t])));i-=3600*(f=Math.floor(i/3600));this.draw("hours",f);0===u&&0===f&&(""!==n.clsHours&&t.find(".hours").removeClass(n.clsHours),!1===this.zeroHoursFired&&(this.zeroHoursFired=!0,t.find(".hours").addClass(n.clsZero),r.exec(n.onZero,["hours",t])));i-=60*(e=Math.floor(i/60));this.draw("minutes",e);0===u&&0===f&&0===e&&(""!==n.clsMinutes&&t.find(".minutes").removeClass(n.clsMinutes),!1===this.zeroMinutesFired&&(this.zeroMinutesFired=!0,t.find(".minutes").addClass(n.clsZero),r.exec(n.onZero,["minutes",t])));o=Math.floor(i/1);this.draw("seconds",o);0===u&&0===f&&0===e&&0===o&&(""!==n.clsSeconds&&t.find(".seconds").removeClass(n.clsSeconds),!1===this.zeroSecondsFired&&(this.zeroSecondsFired=!0,t.find(".seconds").addClass(n.clsZero),r.exec(n.onZero,["seconds",t])));r.exec(n.onTick,[{days:u,hours:f,minutes:e,seconds:o},t])},draw:function(n,t){for(var r,u=this.element,e=(this.options,String(t).length),f=u.find("."+n+" .digit").html("0").length,i=0;i<e;i++)r=Math.floor(t/Math.pow(10,i))%10,u.find("."+n+" .digit:eq("+(f-1)+")").html(r),f--},start:function(){var n=this;!1!==this.element.data("paused")&&(clearInterval(this.blinkInterval),clearInterval(this.tickInterval),this.element.data("paused",!1),this.tick(),this.blinkInterval=setInterval(function(){n.blink()},500),this.tickInterval=setInterval(function(){n.tick()},1e3))},stop:function(){var n=this.element;this.options;n.data("paused",!0);n.find(".digit").html("0");clearInterval(this.blinkInterval);clearInterval(this.tickInterval)},pause:function(){this.element.data("paused",!0);clearInterval(this.blinkInterval);clearInterval(this.tickInterval)},togglePlay:function(){!0===this.element.attr("data-pause")?this.pause():this.start()},isPaused:function(){return this.element.data("paused")},getTimepoint:function(n){return!0===n?new Date(this.timepoint):this.timepoint},getBreakpoint:function(n){return!0===n?new Date(this.breakpoint):this.breakpoint},getLeft:function(){var t=(new Date).getTime(),n=Math.floor(this.breakpoint-t);return{days:Math.round(n/864e5),hours:Math.round(n/36e5),minutes:Math.round(n/6e4),seconds:Math.round(n/1e3)}},i18n:function(n){var u=this,f=this.element,r=this.options;return void 0===n?r.locale:void 0!==i.locales[n]&&(r.locale=n,this.locale=i.locales[r.locale],void t.each(["days","hours","minutes","seconds"],function(){var n=".part."+this;f.find(n).attr("data-label",u.locale.calendar.time[this])}))},changeAttrLocale:function(){var n=this.element.attr("data-locale");this.i18n(n)},changeAttribute:function(n){switch(n){case"data-pause":this.togglePlay();break;case"data-locale":this.changeAttrLocale()}},destroy:function(){clearInterval(this.blinkInterval);clearInterval(this.tickInterval);this.element.html("");this.element.removeClass("countdown").removeClass(this.options.clsCountdown)}},i.plugin("countdown",fi),ei={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.numbers=[],this.html=this.element.html(),this._setOptionsFromDOM(),this._create(),this},options:{delay:10,step:1,value:0,timeout:null,delimiter:",",onStart:i.noop,onStop:i.noop,onTick:i.noop,onCounterCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t=this,i=this.element,n=this.options;this._calcArray();r.exec(n.onCounterCreate,[i],this.elem);null!==n.timeout&&r.isInt(n.timeout)&&setTimeout(function(){t.start()},n.timeout)},_calcArray:function(){for(var t=this.options,n=0;n<=t.value;n+=t.step)this.numbers.push(n);this.numbers[this.numbers.length-1]!==t.value&&this.numbers.push(t.value)},start:function(){var i=this,n=this.element,t=this.options,u=function(){if(0!==i.numbers.length){var f=i.numbers.shift();r.exec(t.onTick,[f,n],n[0]);n.html(Number(f).format(0,0,t.delimiter));i.numbers.length>0?setTimeout(u,t.delay):r.exec(t.onStop,[n],n[0])}else r.exec(t.onStop,[n],n[0])};r.exec(t.onStart,[n],n[0]);setTimeout(u,t.delay)},reset:function(){this._calcArray();this.element.html(this.html)},setValueAttribute:function(){this.options.value=this.element.attr("data-value");this._calcArray()},changeAttribute:function(n){switch(n){case"data-value":this.setValueAttribute()}},destroy:function(){}},i.plugin("counter",ei),oi={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.id=null,this.rules=null,this.interval=!1,this.ruleInterval=!1,this.running=!1,this.intervals=[],this._setOptionsFromDOM(),this._create(),this},default_rules:[{on:{top:[16],left:[4],right:[1]},off:{top:[13,4],left:[1,16],right:[13,4]}},{on:{top:[12,15],left:[3,8],right:[2,5]},off:{top:[9,6,3],left:[5,10,15],right:[14,11,8]}},{on:{top:[11],left:[7],right:[6]},off:{top:[1,2,5],left:[9,13,14],right:[15,12,16]}},{on:{top:[8,14],left:[2,12],right:[9,3]},off:{top:[16],left:[4],right:[1]}},{on:{top:[10,7],left:[6,11],right:[10,7]},off:{top:[12,15],left:[3,8],right:[2,5]}},{on:{top:[13,4],left:[1,16],right:[13,4]},off:{top:[11],left:[7],right:[6]}},{on:{top:[9,6,3],left:[5,10,15],right:[14,11,8]},off:{top:[8,14],left:[2,12],right:[9,3]}},{on:{top:[1,2,5],left:[9,13,14],right:[15,12,16]},off:{top:[10,7],left:[6,11],right:[10,7]}}],options:{rules:null,color:null,flashColor:null,flashInterval:1e3,numbers:!1,offBefore:!0,attenuation:.3,stopOnBlur:!1,cells:4,margin:8,showAxis:!1,axisStyle:"arrow",cellClick:!1,autoRestart:5e3,clsCube:"",clsCell:"",clsSide:"",clsSideLeft:"",clsSideRight:"",clsSideTop:"",clsSideLeftCell:"",clsSideRightCell:"",clsSideTopCell:"",clsAxis:"",clsAxisX:"",clsAxisY:"",clsAxisZ:"",custom:i.noop,onTick:i.noop,onCubeCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t=this.element,n=this.options;null===n.rules?this.rules=this.default_rules:this._parseRules(n.rules);this._createCube();this._createEvents();r.exec(n.onCubeCreate,[t])},_parseRules:function(n){if(null==n)return!1;if(r.isObject(n))return this.rules=r.isObject(n),!0;try{return this.rules=JSON.parse(n),!0}catch(n){return console.log("Unknown or empty rules for cell flashing!"),!1}},_createCube:function(){var i=this.element,n=this.options,f=r.elementId("cube"),e=Math.pow(n.cells,2),u;i.addClass("cube").addClass(n.clsCube);void 0===i.attr("id")&&i.attr("id",f);this.id=i.attr("id");this._createCssForFlashColor();this._createCssForCellSize();t.each(["left","right","top"],function(){var u,f,r;for(u=t("<div>").addClass("side "+this+"-side").addClass(n.clsSide).appendTo(i),"left"===this&&u.addClass(n.clsSideLeft),"right"===this&&u.addClass(n.clsSideRight),"top"===this&&u.addClass(n.clsSideTop),r=0;r<e;r++)(f=t("<div>").addClass("cube-cell").addClass("cell-id-"+(r+1)).addClass(n.clsCell)).data("id",r+1).data("side",this),f.appendTo(u),!0===n.numbers&&f.html(r+1)});u=i.find(".cube-cell");null!==n.color&&(r.isColor(n.color)?u.css({backgroundColor:n.color,borderColor:n.color}):u.addClass(n.color));t.each(["x","y","z"],function(){var r=t("<div>").addClass("axis "+n.axisStyle).addClass("axis-"+this).addClass(n.clsAxis);"x"===this&&r.addClass(n.clsAxisX);"y"===this&&r.addClass(n.clsAxisY);"z"===this&&r.addClass(n.clsAxisZ);r.appendTo(i)});!1===n.showAxis&&i.find(".axis").hide();this._run()},_run:function(){var u=this,n=this.element,t=this.options,f=0;clearInterval(this.interval);n.find(".cube-cell").removeClass("light");t.custom!==i.noop?r.exec(t.custom,[n]):(n.find(".cube-cell").removeClass("light"),u._start(),f=r.isObject(this.rules)?r.objectLength(this.rules):0,this.interval=setInterval(function(){u._start()},f*t.flashInterval))},_createCssForCellSize:function(){var u,t,f=this.element,n=this.options,e=i.sheet;8===n.margin&&4===n.cells||(u=parseInt(r.getStyleOne(f,"width")),t=Math.ceil((u/2-n.margin*n.cells*2)/n.cells),r.addCssRule(e,"#"+f.attr("id")+" .side .cube-cell","width: "+t+"px!important; height: "+t+"px!important; margin: "+n.margin+"px!important;"))},_createCssForFlashColor:function(){var f,e,t,u=this.element,n=this.options,o=i.sheet,s=[],h=[];if(null!==n.flashColor){for(f="0 0 10px "+r.hexColorToRgbA(n.flashColor,1),e="0 0 10px "+r.hexColorToRgbA(n.flashColor,n.attenuation),t=0;t<3;t++)s.push(f),h.push(e);r.addCssRule(o,"@keyframes pulsar-cell-"+u.attr("id"),"0%, 100% { box-shadow: "+s.join(",")+"} 50% { box-shadow: "+h.join(",")+" }");r.addCssRule(o,"#"+u.attr("id")+" .side .cube-cell.light","animation: pulsar-cell-"+u.attr("id")+" 2.5s 0s ease-out infinite; background-color: "+n.flashColor+"!important; border-color: "+n.flashColor+"!important;")}},_createEvents:function(){var n=this,r=this.element,u=this.options;t(window).on(i.events.blur+"-"+r.attr("id"),function(){!0===u.stopOnBlur&&!0===n.running&&n._stop()});t(window).on(i.events.focus+"-"+r.attr("id"),function(){!0===u.stopOnBlur&&!1===n.running&&n._start()});r.on(i.events.click,".cube-cell",function(){!0===u.cellClick&&t(this).toggleClass("light")})},_start:function(){var n=this,i=this.element;this.options;i.find(".cube-cell").removeClass("light");this.running=!0;t.each(this.rules,function(t,i){n._execRule(t,i)})},_stop:function(){this.running=!1;clearInterval(this.interval);t.each(this.intervals,function(){clearInterval(this)})},_tick:function(n,t){var f=this,e=this.element,u=this.options,i;void 0===t&&(t=u.flashInterval*n);i=setTimeout(function(){r.exec(u.onTick,[n],e[0]);clearInterval(i);r.arrayDelete(f.intervals,i)},t);this.intervals.push(i)},_toggle:function(n,t,i,u){var e=this,f;void 0===u&&(u=this.options.flashInterval*i);f=setTimeout(function(){n["on"===t?"addClass":"removeClass"]("light");clearInterval(f);r.arrayDelete(e.intervals,f)},u);this.intervals.push(f)},start:function(){this._start()},stop:function(){this._stop()},toRule:function(n,t){var e=this,o=this.element,u=this.options,f=this.rules,i;if(null!=f&&void 0!==f[n]){for(clearInterval(this.ruleInterval),this.ruleInterval=!1,this.stop(),o.find(".cube-cell").removeClass("light"),i=0;i<=n;i++)this._execRule(i,f[i],t);r.isInt(u.autoRestart)&&u.autoRestart>0&&(this.ruleInterval=setTimeout(function(){e._run()},u.autoRestart))}},_execRule:function(n,i,r){var u=this,f=this.element;this.options;this._tick(n,r);t.each(["left","right","top"],function(){var e="."+this+"-side",o=void 0!==i.on&&void 0!==i.on[this]&&i.on[this],s=void 0!==i.off&&void 0!==i.off[this]&&i.off[this];!1!==o&&t.each(o,function(){var t=f.find(e+" .cell-id-"+this);u._toggle(t,"on",n,r)});!1!==s&&t.each(s,function(){var t=f.find(e+" .cell-id-"+this);u._toggle(t,"off",n,r)})})},rule:function(n){if(void 0===n)return this.rules;!0===this._parseRules(n)&&(this.options.rules=n,this.stop(),this.element.find(".cube-cell").removeClass("light"),this._run())},axis:function(n){var t=!0===n?"show":"hide";this.element.find(".axis")[t]()},changeRules:function(){var n=this.element,i=this.options,t=n.attr("data-rules");!0===this._parseRules(t)&&(this.stop(),n.find(".cube-cell").removeClass("light"),i.rules=t,this._run())},changeAxisVisibility:function(){var n=this.element,t=(this.options,!0===JSON.parse(n.attr("data-show-axis"))?"show":"hide");n.find(".axis")[t]()},changeAxisStyle:function(){var n=this.element,t=(this.options,n.attr("data-axis-style"));n.find(".axis").removeClass("arrow line no-style").addClass(t)},changeAttribute:function(n){switch(n){case"data-rules":this.changeRules();break;case"data-show-axis":this.changeAxisVisibility();break;case"data-axis-style":this.changeAxisStyle()}},destroy:function(){var n=this.element,r=this.options;clearInterval(this.interval);this.interval=null;t(window).off(i.events.blur+"-"+n.attr("id"));t(window).off(i.events.focus+"-"+n.attr("id"));n.off(i.events.click,".cube-cell");n.html("");n.removeClass("cube").removeClass(r.clsCube)}},i.plugin("cube",oi),si={init:function(n,r){return this.options=t.extend({},this.options,n),this.elem=r,this.element=t(r),this.picker=null,this.isOpen=!1,this.value=new Date,this.locale=i.locales[METRO_LOCALE].calendar,this.offset=(new Date).getTimezoneOffset()/60+1,this._setOptionsFromDOM(),this._create(),this},options:{gmt:0,format:"%Y-%m-%d",locale:METRO_LOCALE,value:null,distance:3,month:!0,day:!0,year:!0,minYear:null,maxYear:null,scrollSpeed:5,copyInlineStyles:!0,clsPicker:"",clsPart:"",clsMonth:"",clsDay:"",clsYear:"",okButtonIcon:"<span class='default-icon-check'><\/span>",cancelButtonIcon:"<span class='default-icon-cross'><\/span>",onSet:i.noop,onOpen:i.noop,onClose:i.noop,onScroll:i.noop,onDatePickerCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t=this.element,n=this.options;n.distance<1&&(n.distance=1);null!==n.value&&r.isDate(n.value)&&(this.value=new Date(n.value).addHours(this.offset));void 0===i.locales[n.locale]&&(n.locale=METRO_LOCALE);this.locale=i.locales[n.locale].calendar;null===n.minYear&&(n.minYear=(new Date).getFullYear()-100);null===n.maxYear&&(n.maxYear=(new Date).getFullYear()+100);this._createStructure();this._createEvents();this._set();r.exec(n.onDatePickerCreate,[t])},_createStructure:function(){var f,e,o,s,n,l,c,a,h,v,u=this.element,i=this.options,y=u.prev(),p=u.parent(),w=r.elementId("date-picker");if(f=t("<div>").attr("id",w).addClass("wheel-picker date-picker "+u[0].className).addClass(i.clsPicker),0===y.length?p.prepend(f):f.insertAfter(y),u.appendTo(f),c=t("<div>").addClass("date-wrapper").appendTo(f),!0===i.month&&(e=t("<div>").addClass("month").addClass(i.clsPart).addClass(i.clsMonth).appendTo(c)),!0===i.day&&(o=t("<div>").addClass("day").addClass(i.clsPart).addClass(i.clsDay).appendTo(c)),!0===i.year&&(s=t("<div>").addClass("year").addClass(i.clsPart).addClass(i.clsYear).appendTo(c)),a=t("<div>").addClass("select-wrapper").appendTo(f),h=t("<div>").addClass("select-block").appendTo(a),!0===i.month){for(e=t("<ul>").addClass("sel-month").appendTo(h),n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(e);for(n=0;n<12;n++)t("<li>").addClass("js-month-"+n+" js-month-real-"+this.locale.months[n].toLowerCase()).html(this.locale.months[n]).data("value",n).appendTo(e);for(n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(e)}if(!0===i.day){for(o=t("<ul>").addClass("sel-day").appendTo(h),n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(o);for(n=0;n<31;n++)t("<li>").addClass("js-day-"+n+" js-day-real-"+(n+1)).html(n+1).data("value",n+1).appendTo(o);for(n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(o)}if(!0===i.year){for(s=t("<ul>").addClass("sel-year").appendTo(h),n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(s);for(n=i.minYear,l=0;n<=i.maxYear;n++,l++)t("<li>").addClass("js-year-"+l+" js-year-real-"+n).html(n).data("value",n).appendTo(s);for(n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(s)}if(h.height(40*(2*i.distance+1)),v=t("<div>").addClass("action-block").appendTo(a),t("<button>").attr("type","button").addClass("button action-ok").html(i.okButtonIcon).appendTo(v),t("<button>").attr("type","button").addClass("button action-cancel").html(i.cancelButtonIcon).appendTo(v),u[0].className="",!0===i.copyInlineStyles)for(n=0;n<u[0].style.length;n++)f.css(u[0].style[n],u.css(u[0].style[n]));this.picker=f},_createEvents:function(){var n=this,f=this.options,u=this.picker;u.on(i.events.start,".select-block ul",function(n){if(!n.changedTouches){var e=this,u=r.pageXY(n).y;t(document).on(i.events.move+"-picker",function(n){e.scrollTop-=f.scrollSpeed*(u>r.pageXY(n).y?-1:1);u=r.pageXY(n).y});t(document).on(i.events.stop+"-picker",function(){t(document).off(i.events.move+"-picker");t(document).off(i.events.stop+"-picker")})}});u.on(i.events.click,function(t){!1===n.isOpen&&n.open();t.stopPropagation()});u.on(i.events.click,".action-ok",function(t){var i,r,f,e=u.find(".sel-month li.active"),o=u.find(".sel-day li.active"),s=u.find(".sel-year li.active");i=0===e.length?n.value.getMonth():e.data("value");r=0===o.length?n.value.getDate():o.data("value");f=0===s.length?n.value.getFullYear():s.data("value");n.value=new Date(f,i,r);n._correct();n._set();n.close();t.stopPropagation()});u.on(i.events.click,".action-cancel",function(t){n.close();t.stopPropagation()});this._addScrollEvents()},_addScrollEvents:function(){var n=this.picker,u=this.options;t.each(["month","day","year"],function(){var f=this,t=n.find(".sel-"+f);0!==t.length&&(t.on(i.events.scrollStart,function(){t.find(".active").removeClass("active")}),t.on(i.events.scrollStop,{latency:50},function(){var e=Math.round(Math.ceil(t.scrollTop())/40),i=t.find(".js-"+f+"-"+e),o=i.position().top-40*u.distance+t.scrollTop()-1;t.animate({scrollTop:o},100,function(){i.addClass("active");r.exec(u.onScroll,[i,t,n],t[0])})}))})},_removeScrollEvents:function(){var n=this.picker;t.each(["month","day","year"],function(){n.find(".sel-"+this).off("scrollstart scrollstop")})},_correct:function(){var n=this.value.getMonth(),t=this.value.getDate(),i=this.value.getFullYear();this.value=new Date(i,n,t)},_set:function(){var t=this.element,n=this.options,i=this.picker,u=this.locale.months[this.value.getMonth()],f=this.value.getDate(),e=this.value.getFullYear();!0===n.month&&i.find(".month").html(u);!0===n.day&&i.find(".day").html(f);!0===n.year&&i.find(".year").html(e);t.val(this.value.format(n.format,n.locale)).trigger("change");r.exec(n.onSet,[this.value,t.val(),t,i],t[0])},open:function(){var e,o,s,u,f,h=this.element,n=this.options,t=this.picker,c=this.value.getMonth(),l=this.value.getDate()-1,a=this.value.getFullYear(),i=t.find(".select-wrapper");i.parent().removeClass("for-top for-bottom");i.show();t.find("li").removeClass("active");u=r.inViewport(i);f=r.rect(i);!u&&f.top>0&&i.parent().addClass("for-bottom");!u&&f.top<0&&i.parent().addClass("for-top");!0===n.month&&(e=t.find(".sel-month")).scrollTop(0).animate({scrollTop:e.find("li.js-month-"+c).addClass("active").position().top-40*n.distance},100);!0===n.day&&(o=t.find(".sel-day")).scrollTop(0).animate({scrollTop:o.find("li.js-day-"+l).addClass("active").position().top-40*n.distance},100);!0===n.year&&(s=t.find(".sel-year")).scrollTop(0).animate({scrollTop:s.find("li.js-year-real-"+a).addClass("active").position().top-40*n.distance},100);this.isOpen=!0;r.exec(n.onOpen,[this.value,h,t],h[0])},close:function(){var n=this.picker,i=this.options,t=this.element;n.find(".select-wrapper").hide();this.isOpen=!1;r.exec(i.onClose,[this.value,t,n],t[0])},val:function(n){return void 0===n?this.element.val():!1!==r.isDate(n)&&(this.value=new Date(n).addHours(this.offset),void this._set())},date:function(n){if(void 0===n)return this.value;try{this.value=new Date(n.format("%Y-%m-%d"));this._set()}catch(n){return!1}},changeValueAttribute:function(){this.val(this.element.attr("data-value"))},changeAttribute:function(n){switch(n){case"data-value":this.changeValueAttribute()}},destroy:function(){var t=this.element,n=this.picker,r=t.parent();this._removeScrollEvents();n.off(i.events.start,".select-block ul");n.off(i.events.click);n.off(i.events.click,".action-ok");n.off(i.events.click,".action-cancel");t.insertBefore(r);r.remove()}},i.plugin("datepicker",si),t(document).on(i.events.click,function(){t.each(t(".date-picker"),function(){t(this).find("input").data("datepicker").close()})}),hi={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.interval=null,this.overlay=null,this._setOptionsFromDOM(),this._create(),this},options:{locale:METRO_LOCALE,title:"",content:"",actions:{},actionsAlign:"right",defaultAction:!0,overlay:!0,overlayColor:"#000000",overlayAlpha:.5,overlayClickClose:!1,width:"480",height:"auto",shadow:!0,closeAction:!0,clsDialog:"",clsTitle:"",clsContent:"",clsAction:"",clsDefaultAction:"",clsOverlay:"",autoHide:0,removeOnClose:!1,show:!1,onShow:i.noop,onHide:i.noop,onOpen:i.noop,onClose:i.noop,onDialogCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.options;this.locale=void 0!==i.locales[n.locale]?i.locales[n.locale]:i.locales["en-US"];this._build()},_build:function(){var o,s=this,u=this.element,n=this.options,h=t("body"),e,f;(u.addClass("dialog"),!0===n.shadow&&u.addClass("shadow-on"),void 0===u.attr("id")&&u.attr("id",r.elementId("dialog")),""!==n.title&&this.setTitle(n.title),""!==n.content&&this.setContent(n.content),!0===n.defaultAction||!1!==n.actions&&"object"==typeof n.actions&&r.objectLength(n.actions)>0)&&(f=u.find(".dialog-actions"),0===f.length&&(f=t("<div>").addClass("dialog-actions").addClass("text-"+n.actionsAlign).appendTo(u)),!0===n.defaultAction&&0===r.objectLength(n.actions)&&0===u.find(".dialog-actions > *").length&&(e=t("<button>").addClass("button js-dialog-close").addClass(n.clsDefaultAction).html(this.locale.buttons.ok)).appendTo(f),t.each(n.actions,function(){var n=this;e=t("<button>").addClass("button").addClass(n.cls).html(n.caption);void 0!==n.onclick&&e.on(i.events.click,function(){r.exec(n.onclick,[u])});e.appendTo(f)}));!0===n.overlay&&(o=this._overlay(),this.overlay=o);!0===n.closeAction&&u.on(i.events.click,".js-dialog-close",function(){s.close()});u.css({width:n.width,height:n.height,visibility:"hidden",top:"100%",left:(t(window).width()-u.outerWidth())/2});u.addClass(n.clsDialog);u.find(".dialog-title").addClass(n.clsTitle);u.find(".dialog-content").addClass(n.clsContent);u.find(".dialog-actions").addClass(n.clsAction);u.appendTo(h);n.show&&this.open();t(window).on(i.events.resize+"_"+u.attr("id"),function(){s.setPosition()});r.exec(this.options.onDialogCreate,[this.element])},_overlay:function(){this.element;var n=this.options,i=t("<div>");return i.addClass("overlay").addClass(n.clsOverlay),"transparent"===n.overlayColor?i.addClass("transparent"):i.css({background:r.hex2rgba(n.overlayColor,n.overlayAlpha)}),i},hide:function(n){var t=this.element,u=this.options,f=0;u.onHide!==i.noop&&(f=300,r.exec(u.onHide,[t]));setTimeout(function(){t.css({visibility:"hidden",top:"100%"});r.callback(n)},f)},show:function(n){var t=this.element,i=this.options;this.setPosition();t.css({visibility:"visible"});r.callback(n);r.exec(i.onShow,[t])},setPosition:function(){var n=this.element;n.css({top:(t(window).height()-n.outerHeight())/2,left:(t(window).width()-n.outerWidth())/2})},setContent:function(n){var u=this.element,i=(this.options,u.find(".dialog-content"));0===i.length&&(i=t("<div>").addClass("dialog-content")).appendTo(u);!r.isJQueryObject(n)&&r.isFunc(n)&&(n=r.exec(n));r.isJQueryObject(n)?n.appendTo(i):i.html(n)},setTitle:function(n){var r=this.element,i=(this.options,r.find(".dialog-title"));0===i.length&&(i=t("<div>").addClass("dialog-title")).appendTo(r);i.html(n)},close:function(){var n=this.element,i=this.options;t("body").find(".overlay").remove();this.hide(function(){n.data("open",!1);r.exec(i.onClose,[n]);!0===i.removeOnClose&&n.remove()})},open:function(){var u=this,f=this.element,n=this.options;!0===n.overlay&&(this.overlay.appendTo(t("body")),!0===n.overlayClickClose&&this.overlay.on(i.events.click,function(){u.close()}));this.show(function(){r.exec(n.onOpen,[f]);f.data("open",!0);parseInt(n.autoHide)>0&&setTimeout(function(){u.close()},parseInt(n.autoHide))})},toggle:function(){this.element.data("open")?this.close():this.open()},isOpen:function(){return!0===this.element.data("open")},changeAttribute:function(){}},i.plugin("dialog",hi),i.dialog={isDialog:function(n){return r.isMetroObject(n,"dialog")},open:function(n,i,r){if(!this.isDialog(n))return!1;var u=t(n).data("dialog");void 0!==r&&u.setTitle(r);void 0!==i&&u.setContent(i);u.open()},close:function(n){if(!this.isDialog(n))return!1;t(n).data("dialog").close()},toggle:function(n){if(!this.isDialog(n))return!1;t(n).data("dialog").toggle()},isOpen:function(n){return!!this.isDialog(n)&&t(n).data("dialog").isOpen()},remove:function(n){if(!this.isDialog(n))return!1;var i=t(n).data("dialog");i.options.removeOnClose=!0;i.close()},create:function(n){var i,r;return i=t("<div>").appendTo(t("body")),r=t.extend({},{show:!0,closeAction:!0,removeOnClose:!0},void 0!==n?n:{}),i.dialog(r)}},ci={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.value=0,this.animation_change_interval=null,this._setOptionsFromDOM(),this._create(),r.exec(this.options.onDonutCreate,[this.element]),this},options:{size:100,radius:50,hole:.8,value:0,background:"#ffffff",color:"",stroke:"#d1d8e7",fill:"#49649f",fontSize:24,total:100,cap:"%",showText:!0,showValue:!1,animate:0,onChange:i.noop,onDonutCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var r=this.element,n=this.options,t="",i=n.radius*(1-(1-n.hole)/2),u=n.radius*(1-n.hole),o=2*Math.PI*i,f=(n.value,n.total,"rotate(-90 "+n.radius+","+n.radius+")"),e=i*n.hole*.6;r.addClass("donut");r.css({width:n.size,height:n.size,background:n.background});t+="<svg>";t+="   <circle class='donut-back' r='"+i+"px' cx='"+n.radius+"px' cy='"+n.radius+"px' transform='"+f+"' fill='none' stroke='"+n.stroke+"' stroke-width='"+u+"'/>";t+="   <circle class='donut-fill' r='"+i+"px' cx='"+n.radius+"px' cy='"+n.radius+"px' transform='"+f+"' fill='none' stroke='"+n.fill+"' stroke-width='"+u+"'/>";!0===n.showText&&(t+="   <text   class='donut-title' x='"+n.radius+"px' y='"+n.radius+"px' dy='"+e/3+"px' text-anchor='middle' fill='"+(""!==n.color?n.color:n.fill)+"' font-size='"+e+"px'>0"+n.cap+"<\/text>");t+="<\/svg>";r.html(t);this.val(n.value)},_setValue:function(n){var i=this.element,t=this.options,f=i.find(".donut-fill"),e=i.find(".donut-title"),o=t.radius*(1-(1-t.hole)/2),u=2*Math.PI*o,s=(t.showValue?n:r.percent(t.total,n,!0))+t.cap,h=n*u/t.total+" "+u;f.attr("stroke-dasharray",h);e.html(s)},val:function(n){var t=this,e=this.element,u=this.options,f,i;if(void 0===n)return this.value;if(parseInt(n)<0||parseInt(n)>u.total)return!1;u.animate>0&&!document.hidden?(f=n>t.value,i=t.value+(f?-1:1),clearInterval(t.animation_change_interval),this.animation_change_interval=setInterval(function(){f?(t._setValue(++i),i>=n&&clearInterval(t.animation_change_interval)):(t._setValue(--i),i<=n&&clearInterval(t.animation_change_interval))},u.animate)):(clearInterval(t.animation_change_interval),this._setValue(n));this.value=n;r.exec(u.onChange,[this.value,e])},changeValue:function(){this.val(this.element.attr("data-value"))},changeAttribute:function(n){switch(n){case"data-value":this.changeValue()}},destroy:function(){this.element.removeClass("donut").html("")}},i.plugin("donut",ci),li={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.drag=!1,this.move=!1,this.backup={cursor:"default",zIndex:"0"},this._setOptionsFromDOM(),this._create(),r.exec(this.options.onDraggableCreate,[this.element]),this},options:{dragElement:"self",dragArea:"parent",onCanDrag:i.noop_true,onDragStart:i.noop,onDragStop:i.noop,onDragMove:i.noop,onDraggableCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var e,s,o,f=this,n=this.element,u=this.options,h="self"!==u.dragElement?n.find(u.dragElement):n;h[0].ondragstart=function(){return!1};h.on(i.events.start,function(h){if(!1!==n.data("canDrag")&&!0===r.exec(u.onCanDrag,[n])&&(!1!==y||1===h.which)){f.drag=!0;f.backup.cursor=n.css("cursor");f.backup.zIndex=n.css("z-index");n.addClass("draggable");"document"!==u.dragArea&&"window"!==u.dragArea||(u.dragArea="body");e="parent"===u.dragArea?n.parent():t(u.dragArea);s={left:e.offset().left,top:e.offset().top};o=r.pageXY(h);var c=n.outerHeight(),l=n.outerWidth(),a=n.offset().top+c-r.pageXY(h).y,v=n.offset().left+l-r.pageXY(h).x;r.exec(u.onDragStart,[o,n]);t(document).on(i.events.move,function(t){var y,p;if(!1!==f.drag){f.move=!0;y=r.pageXY(t).x-s.left;var i=(p=r.pageXY(t).y-s.top)>0?p+a-c:0,h=y>0?y+v-l:0,w=e.innerHeight()+e.scrollTop()-n.outerHeight(),b=e.innerWidth()+e.scrollLeft()-n.outerWidth();i>=0&&i<=w&&(o.y=i,n.offset({top:i+s.top}));h>=0&&h<=b&&(o.x=h,n.offset({left:h+s.left}));r.exec(u.onDragMove,[o,n]);t.preventDefault()}})}});h.on(i.events.stop,function(e){n.css({cursor:f.backup.cursor,zIndex:f.backup.zIndex}).removeClass("draggable");f.drag=!1;f.move=!1;o=r.pageXY(e);t(document).off(i.events.move);r.exec(u.onDragStop,[o,n])})},off:function(){this.element.data("canDrag",!1)},on:function(){this.element.data("canDrag",!0)},changeAttribute:function(){}},i.plugin("draggable",li),ai={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._toggle=null,this.displayOrigin=null,this._setOptionsFromDOM(),this._create(),r.exec(this.options.onDropdownCreate,[this.element]),this},options:{effect:"slide",toggleElement:null,noClose:!1,duration:100,onDrop:i.noop,onUp:i.noop,onDropdownCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var r,u=this,n=this.element,f=this.options,e=n.parent();r=null!==f.toggleElement?t(f.toggleElement):n.siblings(".dropdown-toggle").length>0?n.siblings(".dropdown-toggle"):n.prev();this.displayOrigin=n.css("display");this.element.css("display","none");r.on(i.events.click,function(i){var r,f;(e.siblings(e[0].tagName).removeClass("active-container"),t(".active-container").removeClass("active-container"),"none"===n.css("display")||n.hasClass("keep-open"))?((t("[data-role=dropdown]").each(function(i,r){n.parents("[data-role=dropdown]").is(r)||t(r).hasClass("keep-open")||"none"===t(r).css("display")||u._close(r)}),n.hasClass("horizontal"))&&(n.css({visibility:"hidden",display:"block"}),r=0,t.each(n.children("li"),function(){r+=t(this).outerWidth(!0)}),n.css({visibility:"visible",display:"none"}),f=r,n.css("width",f)),u._open(n),e.addClass("active-container")):u._close(n);i.preventDefault();i.stopPropagation()});this._toggle=r;!0===f.noClose&&n.addClass("keep-open").on(i.events.click,function(n){n.stopPropagation()});t(n).find("li.disabled a").on(i.events.click,function(n){n.preventDefault()})},_close:function(n){!1===r.isJQueryObject(n)&&(n=t(n));var i=n.data("dropdown"),f=i._toggle,u=i.options,e="slide"===u.effect?"slideUp":"fadeOut";f.removeClass("active-toggle").removeClass("active-control");i.element.parent().removeClass("active-container");n[e](u.duration,function(){n.trigger("onClose",null,n)});r.exec(u.onUp,[n])},_open:function(n){!1===r.isJQueryObject(n)&&(n=t(n));var u=n.data("dropdown"),f=u._toggle,i=u.options,e="slide"===i.effect?"slideDown":"fadeIn";f.addClass("active-toggle").addClass("active-control");n[e](i.duration,function(){n.trigger("onOpen",null,n)});r.exec(i.onDrop,[n])},close:function(){this._close(this.element)},open:function(){this._open(this.element)},changeAttribute:function(){},destroy:function(){this._toggle.off(i.events.click)}},t(document).on(i.events.click,function(){t("[data-role*=dropdown]").each(function(){var n=t(this);"block"===n.css("display")&&!1===n.hasClass("keep-open")&&n.data("dropdown").close()})}),i.plugin("dropdown",ai),vi={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onFileCreate,[this.element]),this},options:{copyInlineStyles:!0,prepend:"",caption:"Choose file",disabled:!1,onSelect:i.noop,onFileCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){this._createStructure();this._createEvents()},_createStructure:function(){var n=this.element,i=this.options,e=n.prev(),s=n.parent(),u=t("<div>").addClass("file "+n[0].className),h=t("<span>").addClass("caption"),f,o;if((0===e.length?s.prepend(u):u.insertAfter(e),n.appendTo(u),h.insertBefore(n),t("<button>").addClass("button").attr("tabindex",-1).attr("type","button").html(i.caption).appendTo(u),"rtl"===n.attr("dir")&&u.addClass("rtl"),n[0].className="",""!==i.prepend)&&(r.isTag(i.prepend)?t(i.prepend):t("<span>"+i.prepend+"<\/span>")).addClass("prepend").addClass(i.clsPrepend).appendTo(u),!0===i.copyInlineStyles)for(f=0,o=n[0].style.length;f<o;f++)u.css(n[0].style[f],n.css(n[0].style[f]));!0===i.disabled||n.is(":disabled")?this.disable():this.enable()},_createEvents:function(){var n=this.element,e=this.options,u=n.parent(),f=u.find(".caption");u.on(i.events.click,"button, .caption",function(){n.trigger("click")});n.on(i.events.change,function(){var i=t(this).val();""!==i&&(i=i.replace(/.+[\\\/]/,""),f.html(i),f.attr("title",i),r.exec(e.onSelect,[i,n],n[0]))})},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},toggleDir:function(){"rtl"===this.element.attr("dir")?this.element.parent().addClass("rtl"):this.element.parent().removeClass("rtl")},changeAttribute:function(n){switch(n){case"disabled":this.toggleState();break;case"dir":this.toggleDir()}},destroy:function(){var n=this.element,t=n.parent();n.off(i.events.change);t.off(i.events.click,"button, .caption");n.insertBefore(t);t.remove()}},i.plugin("file",vi),yi={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onGravatarCreate,[this.element]),this},options:{email:"",size:80,"default":"404",onGravatarCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){this.get()},getImage:function(n,i,r,u){var f=t("<img>");return f.attr("src",this.getImageSrc(n,i)),!0===u?f:f[0]},getImageSrc:function(n,t,i){return void 0===n||""===n.trim()?"":(t=t||80,i=r.encodeURI(i)||"404","//www.gravatar.com/avatar/"+r.md5(n.toLowerCase().trim())+"?size="+t+"&d="+i)},get:function(){var n=this.element,t=this.options,i="IMG"===n[0].tagName?n:n.find("img");if(0!==i.length)return i.attr("src",this.getImageSrc(t.email,t.size,t.default)),this},resize:function(n){this.options.size=void 0!==n?n:this.element.attr("data-size");this.get()},email:function(n){this.options.email=void 0!==n?n:this.element.attr("data-email");this.get()},changeAttribute:function(n){switch(n){case"data-size":this.resize();break;case"data-email":this.email()}},destroy:function(){var n=this.element;"img"!==n[0].tagName.toLowerCase()&&n.html("")}},i.plugin("gravatar",yi),pi={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.hint=null,this.hint_size={width:0,height:0},this._setOptionsFromDOM(),this._create(),r.exec(this.options.onHintCreate,[this.element]),this},options:{hintHide:5e3,clsHint:"",hintText:"",hintPosition:i.position.TOP,hintOffset:4,onHintCreate:i.noop,onHintShow:i.noop,onHintHide:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this,r=this.element,u=this.options;r.on(i.events.enter+"-hint",function(){n.createHint();u.hintHide>0&&setTimeout(function(){n.removeHint()},u.hintHide)});r.on(i.events.leave+"-hint",function(){n.removeHint()});t(window).on(i.events.scroll+"-hint",function(){null!==n.hint&&n.setPosition()})},createHint:function(){var e=this.elem,n=this.element,u=this.options,i=t("<div>").addClass("hint").addClass(u.clsHint).html(u.hintText),f;(this.hint=i,this.hint_size=r.hiddenElementSize(i),t(".hint:not(.permanent-hint)").remove(),"TD"===e.tagName||"TH"===e.tagName)&&(f=t("<div/>").css("display","inline-block").html(n.html()),n.html(f),n=f);this.setPosition();i.appendTo(t("body"));r.exec(u.onHintShow,[i,n])},setPosition:function(){var r=this.hint,f=this.hint_size,u=this.options,n=this.element;u.hintPosition===i.position.BOTTOM?(r.addClass("bottom"),r.css({top:n.offset().top-t(window).scrollTop()+n.outerHeight()+u.hintOffset,left:n.offset().left+n.outerWidth()/2-f.width/2-t(window).scrollLeft()})):u.hintPosition===i.position.RIGHT?(r.addClass("right"),r.css({top:n.offset().top+n.outerHeight()/2-f.height/2-t(window).scrollTop(),left:n.offset().left+n.outerWidth()-t(window).scrollLeft()+u.hintOffset})):u.hintPosition===i.position.LEFT?(r.addClass("left"),r.css({top:n.offset().top+n.outerHeight()/2-f.height/2-t(window).scrollTop(),left:n.offset().left-f.width-t(window).scrollLeft()-u.hintOffset})):(r.addClass("top"),r.css({top:n.offset().top-t(window).scrollTop()-f.height-u.hintOffset,left:n.offset().left+n.outerWidth()/2-f.width/2-t(window).scrollLeft()}))},removeHint:function(){var u=this,n=this.hint,f=this.element,t=this.options,e=t.onHintHide===i.noop?0:300;null!==n&&(r.exec(t.onHintHide,[n,f]),setTimeout(function(){n.hide(0,function(){n.remove();u.hint=null})},e))},changeText:function(){this.options.hintText=this.element.attr("data-hint-text")},changeAttribute:function(n){switch(n){case"data-hint-text":this.changeText()}},destroy:function(){this.elem;var n=this.element;this.options;this.removeHint();n.off(i.events.enter+"-hint");n.off(i.events.leave+"-hint");t(window).off(i.events.scroll+"-hint")}},i.plugin("hint",pi),wi={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.overlay=null,this._setOptionsFromDOM(),this._create(),this},options:{type:"",width:480,height:"auto",overlay:!0,overlayColor:"#000000",overlayAlpha:.5,autoHide:0,removeOnClose:!1,closeButton:!0,clsBox:"",clsBoxContent:"",clsOverlay:"",onOpen:i.noop,onClose:i.noop,onInfoBoxCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createStructure();this._createEvents();r.exec(t.onInfoBoxCreate,[n],n[0])},_overlay:function(){this.element;var n=this.options,i=t("<div>");return i.addClass("overlay").addClass(n.clsOverlay),"transparent"===n.overlayColor?i.addClass("transparent"):i.css({background:r.hex2rgba(n.overlayColor,n.overlayAlpha)}),i},_createStructure:function(){var u,f,n=this.element,i=this.options;!0===i.overlay&&(this.overlay=this._overlay());void 0===n.attr("id")&&n.attr("id",r.elementId("infobox"));n.addClass("info-box").addClass(i.type).addClass(i.clsBox);0===(u=n.find("closer")).length&&(u=t("<span>").addClass("button square closer")).appendTo(n);!0!==i.closeButton&&u.hide();(f=n.find(".info-box-content")).length>0&&f.addClass(i.clsBoxContent);n.css({width:i.width,height:i.height,visibility:"hidden",top:"100%",left:(t(window).width()-n.outerWidth())/2});n.appendTo(t("body"))},_createEvents:function(){var n=this,r=this.element;this.options;r.on(i.events.click,".closer",function(){n.close()});r.on(i.events.click,".js-dialog-close",function(){n.close()});t(window).on(i.events.resize+"_"+r.attr("id"),function(){n.reposition()})},_setPosition:function(){var n=this.element;n.css({top:(t(window).height()-n.outerHeight())/2,left:(t(window).width()-n.outerWidth())/2})},reposition:function(){this._setPosition()},setContent:function(n){var i=this.element,t=(this.options,i.find(".info-box-content"));0!==t.length&&(t.html(n),this.reposition())},setType:function(n){var t=this.element;this.options;t.removeClass("success info alert warning").addClass(n)},open:function(){var u=this,n=this.element,i=this.options;!0===i.overlay&&this.overlay.appendTo(t("body"));this._setPosition();n.css({visibility:"visible"});r.exec(i.onOpen,[n],n[0]);n.data("open",!0);parseInt(i.autoHide)>0&&setTimeout(function(){u.close()},parseInt(i.autoHide))},close:function(){var n=this.element,i=this.options;!0===i.overlay&&t("body").find(".overlay").remove();n.css({visibility:"hidden",top:"100%"});r.exec(i.onClose,[n],n[0]);n.data("open",!1);!0===i.removeOnClose&&(this.destroy(),n.remove())},isOpen:function(){return!0===this.element.data("open")},changeAttribute:function(){},destroy:function(){var n=this.element;this.options;n.off(i.events.click,".closer");n.off(i.events.click,".js-dialog-close");t(window).off(i.events.resize+"_"+n.attr("id"))}},i.plugin("infobox",wi),i.infobox={isInfoBox:function(n){return r.isMetroObject(n,"dialog")},open:function(n,i,r){if(!this.isInfoBox(n))return!1;var u=t(n).data("infobox");void 0!==i&&u.setContent(i);void 0!==r&&u.setType(r);u.open()},close:function(n){if(!this.isInfoBox(n))return!1;t(n).data("infobox").close()},setContent:function(n,i){if(!this.isInfoBox(n))return!1;void 0===i&&(i="");var r=t(n).data("infobox");r.setContent(i);r.reposition()},setType:function(n,i){if(!this.isInfoBox(n))return!1;var r=t(n).data("infobox");r.setType(i);r.reposition()},isOpen:function(n){return!!this.isInfoBox(n)&&t(n).data("infobox").isOpen()},create:function(n,i,r,u){var f,e,o,s;return o=void 0!==i?i:"",f=t("<div>").appendTo(t("body")),t("<div>").addClass("info-box-content").appendTo(f),s=t.extend({},{removeOnClose:!0,type:o},void 0!==r?r:{}),f.infobox(s),(e=f.data("infobox")).setContent(n),!1!==u&&e.open(),f}},bi={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onInputCreate,[this.element]),this},options:{clsElement:"",clsInput:"",clsPrepend:"",clsClearButton:"",clsRevealButton:"",size:"default",prepend:"",copyInlineStyles:!0,clearButton:!0,revealButton:!0,clearButtonIcon:"<span class='default-icon-cross'><\/span>",revealButtonIcon:"<span class='default-icon-eye'><\/span>",customButtons:[],disabled:!1,onInputCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var s,h,u=this.element,n=this.options,c=u.prev(),a=u.parent(),f=t("<div>").addClass("input "+u[0].className),o=t("<div>").addClass("button-group"),e,l;if((void 0===u.attr("type")&&u.attr("type","text"),0===c.length?a.prepend(f):f.insertAfter(c),u.appendTo(f),o.appendTo(f),!1!==n.clearButton&&((s=t("<button>").addClass("button input-clear-button").addClass(n.clsClearButton).attr("tabindex",-1).attr("type","button").html(n.clearButtonIcon)).on(i.events.click,function(){u.val("").trigger("change").trigger("keyup").focus()}),s.appendTo(o)),"password"===u.attr("type")&&!1!==n.revealButton&&((h=t("<button>").addClass("button input-reveal-button").addClass(n.clsRevealButton).attr("tabindex",-1).attr("type","button").html(n.revealButtonIcon)).on(i.events.start,function(){u.attr("type","text")}).on(i.events.stop,function(){u.attr("type","password").focus()}),h.appendTo(o)),""!==n.prepend)&&(r.isTag(n.prepend)?t(n.prepend):t("<span>"+n.prepend+"<\/span>")).addClass("prepend").addClass(n.clsPrepend).appendTo(f),"string"==typeof n.customButtons&&(n.customButtons=r.isObject(n.customButtons)),"object"==typeof n.customButtons&&r.objectLength(n.customButtons)>0&&t.each(n.customButtons,function(){var n=this,f=t("<button>").addClass("button input-custom-button").addClass(n.cls).attr("tabindex",-1).attr("type","button").html(n.html);f.on(i.events.click,function(){r.exec(n.onclick,[u.val(),f],u[0])});f.appendTo(o)}),"rtl"===u.attr("dir")&&f.addClass("rtl").attr("dir","rtl"),u[0].className="",!0===n.copyInlineStyles)for(e=0,l=u[0].style.length;e<l;e++)f.css(u[0].style[e],u.css(u[0].style[e]));f.addClass(n.clsElement);u.addClass(n.clsInput);"default"!==n.size&&f.css({width:n.size});u.on(i.events.blur,function(){f.removeClass("focused")});u.on(i.events.focus,function(){f.addClass("focused")});!0===n.disabled||u.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(n){switch(n){case"disabled":this.toggleState()}},destroy:function(){var t=this.element,n=(this.options,t.parent()),r=n.find(".input-clear-button"),u=n.find(".input-reveal-button"),f=n.find(".input-custom-button");r.length>0&&r.off(i.events.click);u.length>0&&(u.off(i.events.start),u.off(i.events.stop));f.length>0&&r.off(i.events.click);t.off(i.events.blur);t.off(i.events.focus);t.insertBefore(n);n.remove()}},i.plugin("input",bi),ki={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.value="",this.positions=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],this.keypad=null,this._setOptionsFromDOM(),this.keys=r.strToArray(this.options.keys,","),this.keys_to_work=this.keys,this._create(),this},options:{keySize:32,keys:"1, 2, 3, 4, 5, 6, 7, 8, 9, 0",copyInlineStyles:!1,target:null,length:0,shuffle:!1,shuffleCount:3,position:i.position.BOTTOM_LEFT,dynamicPosition:!1,serviceButtons:!0,showValue:!0,open:!1,sizeAsKeys:!1,clsKeypad:"",clsInput:"",clsKeys:"",clsKey:"",clsServiceKey:"",clsBackspace:"",clsClear:"",onChange:i.noop,onClear:i.noop,onBackspace:i.noop,onShuffle:i.noop,onKey:i.noop,onKeypadCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){this._createKeypad();!0===this.options.shuffle&&this.shuffle();this._createKeys();this._createEvents();r.exec(this.options.onKeypadCreate,[this.element])},_createKeypad:function(){var r,o,n=this.element,u=this.options,s=n.prev(),e=n.parent(),f,h;if((r=e.hasClass("input")?e:t("<div>").addClass("input").addClass(n[0].className)).addClass("keypad"),"static"!==r.css("position")&&""!==r.css("position")||r.css({position:"relative"}),void 0===n.attr("type")&&n.attr("type","text"),0===s.length?e.prepend(r):r.insertAfter(s),n.attr("readonly",!0),n.appendTo(r),(o=t("<div>").addClass("keys").addClass(u.clsKeys)).appendTo(r),this._setKeysPosition(),!0===u.open&&o.addClass("open keep-open"),n[0].className="",!0===u.copyInlineStyles)for(f=0,h=n[0].style.length;f<h;f++)r.css(n[0].style[f],n.css(n[0].style[f]));n.addClass(u.clsInput);r.addClass(u.clsKeypad);n.on(i.events.blur,function(){r.removeClass("focused")});n.on(i.events.focus,function(){r.addClass("focused")});!0===u.disabled||n.is(":disabled")?this.disable():this.enable();this.keypad=r},_setKeysPosition:function(){var n=this.element,t=this.options;n.parent().find(".keys").removeClass(this.positions.join(" ")).addClass(t.position)},_createKeys:function(){var i,e=this.element,n=this.options,u=e.parent(),f=Math.round(Math.sqrt(this.keys.length+2)),o=f*n.keySize+4*f,r=u.find(".keys");(r.html(""),t.each(this.keys_to_work,function(){(i=t("<span>").addClass("key").addClass(n.clsKey).html(this)).data("key",this);i.css({width:n.keySize,height:n.keySize,lineHeight:n.keySize-4+"px"}).appendTo(r)}),!0===n.serviceButtons)&&t.each(["&larr;","&times;"],function(){i=t("<span>").addClass("key service-key").addClass(n.clsKey).addClass(n.clsServiceKey).html(this);"&larr;"===this&&i.addClass(n.clsBackspace);"&times;"===this&&i.addClass(n.clsClear);i.data("key",this);i.css({width:n.keySize,height:n.keySize,lineHeight:n.keySize-4+"px"}).appendTo(r)});r.width(o);!0===n.sizeAsKeys&&-1!==["top-left","top","top-right","bottom-left","bottom","bottom-right"].indexOf(n.position)&&u.outerWidth(r.outerWidth())},_createEvents:function(){var n=this,f=this.element,u=this.options,e=f.parent(),o=e.find(".keys");e.on(i.events.click,".keys",function(n){n.preventDefault();n.stopPropagation()});e.on(i.events.click,function(n){!0!==u.open&&(!0===o.hasClass("open")?o.removeClass("open"):o.addClass("open"),n.preventDefault(),n.stopPropagation())});e.on(i.events.click,".key",function(i){var e=t(this);if("&larr;"!==e.data("key")&&"&times;"!==e.data("key")){if(u.length>0&&String(n.value).length===u.length)return!1;n.value=n.value+""+e.data("key");!0===u.shuffle&&(n.shuffle(),n._createKeys());!0===u.dynamicPosition&&(u.position=n.positions[r.random(0,n.positions.length-1)],n._setKeysPosition());r.exec(u.onKey,[e.data("key"),n.value,f])}else"&times;"===e.data("key")&&(n.value="",r.exec(u.onClear,[f])),"&larr;"===e.data("key")&&(n.value=n.value.substring(0,n.value.length-1),r.exec(u.onBackspace,[n.value,f]));!0===u.showValue&&("INPUT"===f[0].tagName?f.val(n.value):f.text(n.value));f.trigger("change");r.exec(u.onChange,[n.value,f]);i.preventDefault();i.stopPropagation()});null!==u.target&&f.on(i.events.change,function(){var i=t(u.target);0!==i.length&&("INPUT"===i[0].tagName?i.val(n.value):i.text(n.value))})},shuffle:function(){for(var n=0;n<this.options.shuffleCount;n++)this.keys_to_work=this.keys_to_work.shuffle();r.exec(this.options.onShuffle,[this.keys_to_work,this.keys,this.element])},shuffleKeys:function(n){void 0===n&&(n=this.options.shuffleCount);for(var t=0;t<n;t++)this.keys_to_work=this.keys_to_work.shuffle();this._createKeys()},val:function(n){if(void 0===n)return this.value;this.value=n;"INPUT"===this.element[0].tagName?this.element.val(n):this.element.text(n)},open:function(){this.element.parent().find(".keys").addClass("open")},close:function(){this.element.parent().find(".keys").removeClass("open")},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},setPosition:function(n){var t=void 0!==n?n:this.element.attr("data-position");-1!==this.positions.indexOf(t)&&(this.options.position=t,this._setKeysPosition())},changeAttribute:function(n){switch(n){case"disabled":this.toggleState();break;case"data-position":this.setPosition()}},destroy:function(){var t=this.element,n=this.keypad;n.off(i.events.click,".keys");n.off(i.events.click);n.off(i.events.click,".key");t.off(i.events.change);t.insertBefore(n);n.remove()}},i.plugin("keypad",ki),t(document).on(i.events.click,function(){var n=t(".keypad .keys");t.each(n,function(){t(this).hasClass("keep-open")||t(this).removeClass("open")})}),di={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.currentPage=1,this.pagesCount=1,this.filterString="",this.data=null,this.activity=null,this.busy=!1,this.filters=[],this.wrapperInfo=null,this.wrapperSearch=null,this.wrapperRows=null,this.wrapperPagination=null,this.filterIndex=null,this.filtersIndexes=[],this.sort={dir:"asc",colIndex:0},this.header=null,this.items=[],this._setOptionsFromDOM(),this._create(),this},options:{thousandSeparator:",",decimalSeparator:",",sortTarget:"li",sortClass:null,sortDir:"asc",sortInitial:!1,filterClass:null,filter:null,filterString:"",filters:null,source:null,showItemsSteps:!1,showSearch:!1,showListInfo:!1,showPagination:!1,showAllPages:!1,showActivity:!0,muteList:!0,items:-1,itemsSteps:"all, 10,25,50,100",itemsAllTitle:"Show all",listItemsCountTitle:"Show entries:",listSearchTitle:"Search:",listInfoTitle:"Showing $1 to $2 of $3 entries",paginationPrevTitle:"Prev",paginationNextTitle:"Next",activityType:"cycle",activityStyle:"color",activityTimeout:100,searchWrapper:null,rowsWrapper:null,infoWrapper:null,paginationWrapper:null,clsComponent:"",clsList:"",clsListItem:"",clsListTop:"",clsItemsCount:"",clsSearch:"",clsListBottom:"",clsListInfo:"",clsListPagination:"",clsPagination:"",onDraw:i.noop,onDrawItem:i.noop,onSortStart:i.noop,onSortStop:i.noop,onSortItemSwitch:i.noop,onSearch:i.noop,onRowsCountChange:i.noop,onDataLoad:i.noop,onDataLoaded:i.noop,onFilterItemAccepted:i.noop,onFilterItemDeclined:i.noop,onListCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var i=this,u=this.element,n=this.options;null!==n.source?(r.exec(n.onDataLoad,[n.source],u[0]),t.get(n.source,function(t){i._build(t);r.exec(n.onDataLoaded,[n.source,t],u[0])}).fail(function(n,t,i){console.log(t);console.log(n);console.log(i)})):i._build()},_build:function(n){var t=this.element,i=this.options;r.isValue(n)?this._createItemsFromJSON(n):this._createItemsFromHTML();this._createStructure();this._createEvents();r.exec(i.onListCreate,[t],t[0])},_createItemsFromHTML:function(){var n=this,i=this.element,r=this.options;this.items=[];t.each(i.children(r.sortTarget),function(){n.items.push(this)})},_createItemsFromJSON:function(n){var i=this;this.items=[];r.isValue(n.header)&&(i.header=n.header);r.isValue(n.data)&&t.each(n.data,function(){var u=document.createElement("li"),n=r.isValue(i.header.template)?i.header.template:"";t.each(this,function(t,i){n=n.replace("$"+t,i)});u.innerHTML=n;i.items.push(u)})},_createTopBlock:function(){var i,u,f,o=this,s=this.element,n=this.options,e=t("<div>").addClass("list-top").addClass(n.clsListTop).insertBefore(s);return i=r.isValue(this.wrapperSearch)?this.wrapperSearch:t("<div>").addClass("list-search-block").addClass(n.clsSearch).appendTo(e),t("<input>").attr("type","text").appendTo(i).input({prepend:n.listSearchTitle}),!0!==n.showSearch&&i.hide(),u=r.isValue(this.wrapperRows)?this.wrapperRows:t("<div>").addClass("list-rows-block").addClass(n.clsItemsCount).appendTo(e),f=t("<select>").appendTo(u),t.each(r.strToArray(n.itemsSteps),function(){var i=t("<option>").attr("value","all"===this?-1:this).text("all"===this?n.itemsAllTitle:this).appendTo(f);parseInt(this)===parseInt(n.items)&&i.attr("selected","selected")}),f.select({filter:!1,prepend:n.listItemsCountTitle,onChange:function(t){parseInt(t)!==parseInt(n.items)&&(n.items=parseInt(t),o.currentPage=1,o._draw(),r.exec(n.onRowsCountChange,[t],s[0]))}}),!0!==n.showItemsSteps&&u.hide(),e},_createBottomBlock:function(){var r,u,f=this.element,n=this.options,i=t("<div>").addClass("list-bottom").addClass(n.clsListBottom).insertAfter(f);return r=t("<div>").addClass("list-info").addClass(n.clsListInfo).appendTo(i),!0!==n.showListInfo&&r.hide(),u=t("<div>").addClass("list-pagination").addClass(n.clsListPagination).appendTo(i),!0!==n.showPagination&&u.hide(),i},_createStructure:function(){var i,u,e=this,f=this.element,n=this.options,o=t(n.searchWrapper),s=t(n.infoWrapper),h=t(n.rowsWrapper),c=t(n.paginationWrapper);o.length>0&&(this.wrapperSearch=o);s.length>0&&(this.wrapperInfo=s);h.length>0&&(this.wrapperRows=h);c.length>0&&(this.wrapperPagination=c);f.parent().hasClass("list-component")?i=f.parent():(i=t("<div>").addClass("list-component").insertBefore(f),f.appendTo(i));i.addClass(n.clsComponent);this.activity=t("<div>").addClass("list-progress").appendTo(i);t("<div>").activity({type:n.activityType,style:n.activityStyle}).appendTo(this.activity);!0!==n.showActivity&&this.activity.css({visibility:"hidden"});f.html("").addClass(n.clsList);this._createTopBlock();this._createBottomBlock();r.isValue(n.filterString)&&(this.filterString=n.filterString);r.isValue(n.filter)&&(!1===(u=r.isFunc(n.filter))&&(u=r.func(n.filter)),e.filterIndex=e.addFilter(u));r.isValue(n.filters)&&t.each(r.strToArray(n.filters),function(){!1!==(u=r.isFunc(this))&&e.filtersIndexes.push(e.addFilter(u))});this.currentPage=1;this.sorting(n.sortClass,n.sortDir,!0)},_createEvents:function(){function e(i){var r=t(i),u=r.parent();u.hasClass("active")||(u.hasClass("service")?"prev"===r.data("page")?(n.currentPage--,0===n.currentPage&&(n.currentPage=1)):(n.currentPage++,n.currentPage>n.pagesCount&&(n.currentPage=n.pagesCount)):n.currentPage=r.data("page"),n._draw())}var u,n=this,f=this.element.parent();f.find(".list-search-block input").on(i.events.inputchange,function(){n.filterString=this.value.trim().toLowerCase();":"!==n.filterString[n.filterString.length-1]&&(n.currentPage=1,n._draw())});r.isValue(this.wrapperSearch)&&(u=this.wrapperSearch.find("input")).length>0&&u.on(i.events.inputchange,function(){n.filterString=this.value.trim().toLowerCase();":"!==n.filterString[n.filterString.length-1]&&(n.currentPage=1,n._draw())});f.on(i.events.click,".pagination .page-link",function(){e(this)});r.isValue(this.wrapperPagination)&&this.wrapperPagination.on(i.events.click,".pagination .page-link",function(){e(this)})},_info:function(n,t,i){var u,e=this.element,o=this.options,s=e.parent(),f=r.isValue(this.wrapperInfo)?this.wrapperInfo:s.find(".list-info");0!==f.length&&(t>i&&(t=i),0===this.items.length&&(n=t=i=0),u=(u=(u=(u=o.listInfoTitle).replace("$1",n)).replace("$2",t)).replace("$3",i),f.html(u))},_paging:function(n){var u,s,h,f,i=this,l=this.element,o=this.options,a=l.parent(),c=r.isValue(this.wrapperPagination)?this.wrapperPagination:a.find(".list-pagination"),e;if(c.html(""),f=t("<ul>").addClass("pagination").addClass(o.clsPagination).appendTo(c),0!==this.items.length){if(this.pagesCount=Math.ceil(n/o.items),e=function(n,i,r){var u,f;return u=t("<li>").addClass("page-item").addClass(i),(f=t("<a>").addClass("page-link").html(n)).data("page",r),f.appendTo(u),u},s=e(o.paginationPrevTitle,"service prev-page","prev"),f.append(s),f.append(e(1,1===i.currentPage?"active":"",1)),!0===o.showAllPages||this.pagesCount<=7)for(u=2;u<this.pagesCount;u++)f.append(e(u,u===i.currentPage?"active":"",u));else if(i.currentPage<5){for(u=2;u<=5;u++)f.append(e(u,u===i.currentPage?"active":"",u));this.pagesCount>5&&f.append(e("...","no-link",null))}else if(i.currentPage<=i.pagesCount&&i.currentPage>i.pagesCount-4)for(this.pagesCount>5&&f.append(e("...","no-link",null)),u=i.pagesCount-4;u<i.pagesCount;u++)f.append(e(u,u===i.currentPage?"active":"",u));else f.append(e("...","no-link",null)),f.append(e(i.currentPage-1,"",i.currentPage-1)),f.append(e(i.currentPage,"active",i.currentPage)),f.append(e(i.currentPage+1,"",i.currentPage+1)),f.append(e("...","no-link",null));(i.pagesCount>1||i.currentPage<i.pagesCount)&&f.append(e(i.pagesCount,i.currentPage===i.pagesCount?"active":"",i.pagesCount));h=e(o.paginationNextTitle,"service next-page","next");f.append(h);1===this.currentPage&&s.addClass("disabled");this.currentPage===this.pagesCount&&h.addClass("disabled")}},_filter:function(){var u,n,f,o,h,e,t=this,s=this.element,i=this.options;return r.isValue(this.filterString)||this.filters.length>0?(u=this.items.filter(function(u){if(f="",r.isValue(i.filterClass)){if((o=u.getElementsByClassName(i.filterClass)).length>0)for(n=0;n<o.length;n++)f+=o[n].textContent}else f=u.textContent;if(h=f.replace(/[\n\r]+|[\s]{2,}/g," ").trim().toLowerCase(),!0==(e=!r.isValue(t.filterString)||h.indexOf(t.filterString)>-1)&&t.filters.length>0)for(n=0;n<t.filters.length;n++)if(!0!==r.exec(t.filters[n],[u])){e=!1;break}return e?r.exec(i.onFilterItemAccepted,[u],s[0]):r.exec(i.onFilterItemDeclined,[u],s[0]),e}),r.exec(i.onSearch,[t.filterString,u],s[0])):u=this.items,u},_draw:function(n){var t,i,u=this.element,f=this.options,e=-1===f.items?0:f.items*(this.currentPage-1),o=-1===f.items?this.items.length-1:e+f.items-1;for(u.html(""),i=this._filter(),t=e;t<=o;t++)r.isValue(i[t])&&(i[t].className+=" "+f.clsListItem,u[0].appendChild(i[t])),r.exec(f.onDrawItem,[i[t]],u[0]);this._info(e+1,o+1,i.length);this._paging(i.length);this.activity.hide();r.exec(f.onDraw,[u],u[0]);void 0!==n&&r.exec(n,[u],u[0])},_getItemContent:function(n){var f,e,t,u,i=this.options;if(r.isValue(i.sortClass)){if(t="",(e=n.getElementsByClassName(i.sortClass)).length>0)for(f=0;f<e.length;f++)t+=e[f].textContent;u=e[0].dataset.format}else t=n.textContent,u=n.dataset.format;if(t=(""+t).toLowerCase().replace(/[\n\r]+|[\s]{2,}/g," ").trim(),r.isValue(u))switch(-1===["number","int","float","money"].indexOf(u)||","===i.thousandSeparator&&"."===i.decimalSeparator||(t=r.parseNumber(t,i.thousandSeparator,i.decimalSeparator)),u){case"date":t=r.isDate(t)?new Date(t):"";break;case"number":t=Number(t);break;case"int":t=parseInt(t);break;case"float":t=parseFloat(t);break;case"money":t=r.parseMoney(t)}return t},draw:function(){return this._draw()},sorting:function(n,t,i){var e=this,f=this.element,u=this.options;return r.isValue(n)&&(u.sortClass=n),r.isValue(t)&&["asc","desc"].indexOf(t)>-1&&(u.sortDir=t),r.exec(u.onSortStart,[this.items],f[0]),this.items.sort(function(n,t){var o=e._getItemContent(n),s=e._getItemContent(t),i=0;return o<s&&(i="asc"===u.sortDir?-1:1),o>s&&(i="asc"===u.sortDir?1:-1),0!==i&&r.exec(u.onSortItemSwitch,[n,t,i],f[0]),i}),r.exec(u.onSortStop,[this.items],f[0]),!0===i&&this._draw(),this},filter:function(n){this.filterString=n.trim().toLowerCase();this.currentPage=1;this._draw()},loadData:function(n){var u=this,f=this.element,i=this.options;!0===r.isValue(n)&&(i.source=n,r.exec(i.onDataLoad,[i.source],f[0]),t.get(i.source,function(n){var e;r.exec(i.onDataLoaded,[i.source,n],f[0]);u._createItemsFromJSON(n);f.html("");r.isValue(i.filterString)&&(u.filterString=i.filterString);r.isValue(i.filter)&&(!1===(e=r.isFunc(i.filter))&&(e=r.func(i.filter)),u.filterIndex=u.addFilter(e));r.isValue(i.filters)&&t.each(r.strToArray(i.filters),function(){!1!==(e=r.isFunc(this))&&u.filtersIndexes.push(u.addFilter(e))});u.currentPage=1;u.sorting(i.sortClass,i.sortDir,!0)}).fail(function(n,t,i){console.log(t);console.log(n);console.log(i)}))},next:function(){0!==this.items.length&&(this.currentPage++,this.currentPage>this.pagesCount?this.currentPage=this.pagesCount:this._draw())},prev:function(){0!==this.items.length&&(this.currentPage--,0!==this.currentPage?this._draw():this.currentPage=1)},first:function(){0!==this.items.length&&(this.currentPage=1,this._draw())},last:function(){0!==this.items.length&&(this.currentPage=this.pagesCount,this._draw())},page:function(n){n<=0&&(n=1);n>this.pagesCount&&(n=this.pagesCount);this.currentPage=n;this._draw()},addFilter:function(n,t){var i=r.isFunc(n);if(!1!==i)return this.filters.push(i),!0===t&&(this.currentPage=1,this.draw()),this.filters.length-1},removeFilter:function(n,t){return r.arrayDeleteByKey(this.filters,n),!0===t&&(this.currentPage=1,this.draw()),this},removeFilters:function(n){this.filters=[];!0===n&&(this.currentPage=1,this.draw())},getFilters:function(){return this.filters},getFilterIndex:function(){return this.filterIndex},getFiltersIndexes:function(){return this.filtersIndexes},changeAttribute:function(n){var o,i,u,f=this,e=this.element,t=this.options;switch(n){case"data-sort-dir":u=e.attr("data-sort-dir");r.isValue(u)&&(t.sortDir=u,f.sorting(t.sortClass,t.sortDir,!0));break;case"data-sort-source":i=e.attr("data-sort-source");r.isValue(i)&&(t.sortClass=i,f.sorting(t.sortClass,t.sortDir,!0));break;case"data-filter-string":o=e.attr("data-filter-string");r.isValue(target)&&(t.filterString=o,f.filter(t.filterString))}},destroy:function(){}},i.plugin("list",di),gi={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),this},options:{selectable:!1,effect:"slide",duration:100,view:i.listView.LIST,selectCurrent:!0,structure:{},onNodeInsert:i.noop,onNodeDelete:i.noop,onNodeClean:i.noop,onCollapseNode:i.noop,onExpandNode:i.noop,onGroupNodeClick:i.noop,onNodeClick:i.noop,onListviewCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createView();this._createEvents();r.exec(t.onListviewCreate,[n])},_createIcon:function(n){var i,u;return u=r.isTag(n)?t(n):t("<img>").attr("src",n),(i=t("<span>").addClass("icon")).html(u),i},_createCaption:function(n){return t("<div>").addClass("caption").html(n)},_createContent:function(n){return t("<div>").addClass("content").html(n)},_createToggle:function(){return t("<span>").addClass("node-toggle")},_createNode:function(n){var i,f,u;return this.element,f=this.options,(i=t("<li>"),void 0!==n.caption||void 0!==n.content)&&(u=t("<div>").addClass("data"),i.prepend(u),void 0!==n.caption&&u.append(this._createCaption(n.caption)),void 0!==n.content&&u.append(this._createContent(n.content))),void 0!==n.icon&&i.prepend(this._createIcon(n.icon)),r.objectLength(f.structure>0)&&t.each(f.structure,function(r,u){void 0!==n[r]&&t("<div>").addClass("node-data item-data-"+r).addClass(n[u]).html(n[r]).appendTo(i)}),i},_createView:function(){var n=this,i=this.element,u=this.options,f=i.find("li"),e=r.objectLength(u.structure);i.addClass("listview");i.find("ul").addClass("listview");t.each(f,function(){var i=t(this),r,f;(void 0!==i.data("caption")||void 0!==i.data("content"))&&(r=t("<div>").addClass("data"),i.prepend(r),void 0!==i.data("caption")&&r.append(n._createCaption(i.data("caption"))),void 0!==i.data("content")&&r.append(n._createContent(i.data("content"))));(void 0!==i.data("icon")&&i.prepend(n._createIcon(i.data("icon"))),i.children("ul").length>0?(i.addClass("node-group"),i.append(n._createToggle()),!0!==i.data("collapsed")&&i.addClass("expanded")):i.addClass("node"),i.hasClass("node"))&&(f=t("<input data-role='checkbox'>"),f.data("node",i),i.prepend(f));e>0&&t.each(u.structure,function(n){void 0!==i.data(n)&&t("<div>").addClass("node-data item-data-"+n).addClass(i.data(n)).html(i.data(n)).appendTo(i)})});this.toggleSelectable();this.view(u.view)},_createEvents:function(){var f=this,n=this.element,u=this.options;n.on(i.events.click,".node",function(){var i=t(this);n.find(".node").removeClass("current");i.toggleClass("current");!0===u.selectCurrent&&(n.find(".node").removeClass("current-select"),i.toggleClass("current-select"));r.exec(u.onNodeClick,[i,n])});n.on(i.events.click,".node-toggle",function(){var n=t(this).closest("li");f.toggleNode(n)});n.on(i.events.click,".node-group > .data > .caption",function(){var i=t(this).closest("li");n.find(".node-group").removeClass("current-group");i.addClass("current-group");r.exec(u.onGroupNodeClick,[i,n])});n.on(i.events.dblclick,".node-group > .data > .caption",function(){var n=t(this).closest("li");f.toggleNode(n)})},view:function(n){var r=this.element,u=this.options;if(void 0===n)return u.view;u.view=n;t.each(i.listView,function(n,t){r.removeClass("view-"+t);r.find("ul").removeClass("view-"+t)});r.addClass("view-"+u.view);r.find("ul").addClass("view-"+u.view)},toggleNode:function(n){var i,u=this.element,t=this.options;n.hasClass("node-group")&&(n.toggleClass("expanded"),"slide"===t.effect?(i=!0!==n.hasClass("expanded")?"slideUp":"slideDown",r.exec(t.onCollapseNode,[n,u])):(i=!0!==n.hasClass("expanded")?"fadeOut":"fadeIn",r.exec(t.onExpandNode,[n,u])),n.children("ul")[i](t.duration))},toggleSelectable:function(){var n=this.element,t=!0===this.options.selectable?"addClass":"removeClass";n[t]("selectable");n.find("ul")[t]("selectable")},add:function(n,i){var f,u,o=this.element,s=this.options,e;if(null===n)f=o;else{if(!n.hasClass("node-group"))return;0===(f=n.children("ul")).length&&(f=t("<ul>").addClass("listview").addClass("view-"+s.view).appendTo(n),this._createToggle().appendTo(n),n.addClass("expanded"))}return(u=this._createNode(i)).addClass("node").appendTo(f),e=t("<input>"),e.data("node",u),u.prepend(e),e.checkbox(),r.exec(s.onNodeInsert,[u,o]),u},addGroup:function(n){var i,u=this.element,f=this.options;return delete n.icon,(i=this._createNode(n)).addClass("node-group").appendTo(u),i.append(this._createToggle()),i.addClass("expanded"),i.append(t("<ul>").addClass("listview").addClass("view-"+f.view)),r.exec(f.onNodeInsert,[i,u]),i},insertBefore:function(n,t){var u=this.element,f=this.options,i=this._createNode(t);return i.insertBefore(n),r.exec(f.onNodeInsert,[i,u]),i},insertAfter:function(n,t){var u=this.element,f=this.options,i=this._createNode(t);return i.insertAfter(n),r.exec(f.onNodeInsert,[i,u]),i},del:function(n){var i=this.element,f=this.options,t=n.closest("ul"),u=t.closest("li");n.remove();0!==t.children().length||t.is(i)||(t.remove(),u.removeClass("expanded"),u.children(".node-toggle").remove());r.exec(f.onNodeDelete,[n,i])},clean:function(n){var t=this.element,i=this.options;n.children("ul").remove();n.removeClass("expanded");n.children(".node-toggle").remove();r.exec(i.onNodeClean,[n,t])},changeView:function(){var n=this.element,t=(this.options,"view-"+n.attr("data-view"));this.view(t)},changeSelectable:function(){var n=this.element;this.options.selectable=!0===JSON.parse(n.attr("data-selectable"));this.toggleSelectable()},changeAttribute:function(n){switch(n){case"data-view":this.changeView();break;case"data-selectable":this.changeSelectable()}}},i.plugin("listview",gi),nr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.pages=[],this.currentIndex=0,this.isAnimate=!1,this._setOptionsFromDOM(),this._create(),this},options:{effect:"slide",effectFunc:"linear",duration:METRO_ANIMATION_DURATION,controlPrev:"<span class='default-icon-left-arrow'><\/span>",controlNext:"<span class='default-icon-right-arrow'><\/span>",controlTitle:"Master, page $1 of $2",backgroundImage:"",clsMaster:"",clsControls:"",clsControlPrev:"",clsControlNext:"",clsControlTitle:"",clsPages:"",clsPage:"",onBeforePage:i.noop_true,onBeforeNext:i.noop_true,onBeforePrev:i.noop_true,onMasterCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;n.addClass("master").addClass(t.clsMaster);n.css({backgroundImage:"url("+t.backgroundImage+")"});this._createControls();this._createPages();this._createEvents();r.exec(this.options.onMasterCreate,[this.element])},_createControls:function(){var i,r,u=this.element,n=this.options,f=u.find(".page");r=String(n.controlTitle).replace("$1","1");r=String(r).replace("$2",f.length);t.each(["top","bottom"],function(){i=t("<div>").addClass("controls controls-"+this).addClass(n.clsControls).appendTo(u);t("<span>").addClass("prev").addClass(n.clsControlPrev).html(n.controlPrev).appendTo(i);t("<span>").addClass("next").addClass(n.clsControlNext).html(n.controlNext).appendTo(i);t("<span>").addClass("title").addClass(n.clsControlTitle).html(r).appendTo(i)});this._enableControl("prev",!1)},_enableControl:function(n,t){var i=this.element.find(".controls ."+n);!0===t?i.removeClass("disabled"):i.addClass("disabled")},_setTitle:function(){var t=this.element.find(".controls .title"),n=this.options.controlTitle.replace("$1",this.currentIndex+1);n=n.replace("$2",String(this.pages.length));t.html(n)},_createPages:function(){var u=this,n=this.element,r=this.options,i=n.find(".pages"),f=n.find(".page");0===i.length&&(i=t("<div>").addClass("pages").appendTo(n));i.addClass(r.clsPages);t.each(f,function(){var i=t(this);void 0!==i.data("cover")?n.css({backgroundImage:"url("+i.data("cover")+")"}):n.css({backgroundImage:"url("+r.backgroundImage+")"});i.css({left:"100%"});i.addClass(r.clsPage).hide(0);u.pages.push(i)});f.appendTo(i);this.currentIndex=0;void 0!==this.pages[this.currentIndex]&&(void 0!==this.pages[this.currentIndex].data("cover")&&n.css({backgroundImage:"url("+this.pages[this.currentIndex].data("cover")+")"}),this.pages[this.currentIndex].css("left","0").show(0),setTimeout(function(){i.css({height:u.pages[0].outerHeight(!0)+2})},0))},_createEvents:function(){var n=this,u=this.element,f=this.options;u.on(i.events.click,".controls .prev",function(){!0!==n.isAnimate&&!0===r.exec(f.onBeforePrev,[n.currentIndex,n.pages[n.currentIndex],u])&&!0===r.exec(f.onBeforePage,["prev",n.currentIndex,n.pages[n.currentIndex],u])&&n.prev()});u.on(i.events.click,".controls .next",function(){!0!==n.isAnimate&&!0===r.exec(f.onBeforeNext,[n.currentIndex,n.pages[n.currentIndex],u])&&!0===r.exec(f.onBeforePage,["next",n.currentIndex,n.pages[n.currentIndex],u])&&n.next()});t(window).on(i.events.resize+"-master"+u.attr("id"),function(){u.find(".pages").height(n.pages[n.currentIndex].outerHeight(!0)+2)})},_slideToPage:function(n){var t,i,r;void 0!==this.pages[n]&&this.currentIndex!==n&&(r=n>this.currentIndex?"next":"prev",t=this.pages[this.currentIndex],i=this.pages[n],this.currentIndex=n,this._effect(t,i,r))},_slideTo:function(n){var t,i;if(void 0!==n){if(t=this.pages[this.currentIndex],"next"===n){if(this.currentIndex+1>=this.pages.length)return;this.currentIndex++}else{if(this.currentIndex-1<0)return;this.currentIndex--}i=this.pages[this.currentIndex];this._effect(t,i,n)}},_effect:function(n,t,i){function o(){void 0!==t.data("cover")?u.css({backgroundImage:"url("+t.data("cover")+")"}):u.css({backgroundImage:"url("+r.backgroundImage+")"});e.css("overflow","initial");s.isAnimate=!1}var s=this,u=this.element,r=this.options,f=u.width(),e=u.find(".pages");switch(this._setTitle(),this.currentIndex===this.pages.length-1?this._enableControl("next",!1):this._enableControl("next",!0),0===this.currentIndex?this._enableControl("prev",!1):this._enableControl("prev",!0),this.isAnimate=!0,setTimeout(function(){e.animate({height:t.outerHeight(!0)+2})},0),e.css("overflow","hidden"),r.effect){case"fade":n.fadeOut(r.duration);t.hide(0).css("left",0).fadeIn(r.duration,function(){o()});break;case"switch":n.hide(0);t.hide(0).css("left",0).show(0,function(){o()});break;default:n.stop(!0,!0).animate({left:"next"===i?-f:f},r.duration,r.effectFunc,function(){n.hide(0)});t.stop(!0,!0).css({left:"next"===i?f:-f}).show(0).animate({left:0},r.duration,r.effectFunc,function(){o()})}},toPage:function(n){this._slideToPage(n)},next:function(){this._slideTo("next")},prev:function(){this._slideTo("prev")},changeEffect:function(){this.options.effect=this.element.attr("data-effect")},changeEffectFunc:function(){this.options.effectFunc=this.element.attr("data-effect-func")},changeEffectDuration:function(){this.options.duration=this.element.attr("data-duration")},changeAttribute:function(n){switch(n){case"data-effect":this.changeEffect();break;case"data-effect-func":this.changeEffectFunc();break;case"data-duration":this.changeEffectDuration()}}},i.plugin("master",nr),tr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.pane=null,this.content=null,this.paneToggle=null,this._setOptionsFromDOM(),this._create(),this},options:{compact:"md",expanded:"lg",toggle:null,onNavigationViewCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createView();this._createEvents();r.exec(t.onNavigationViewCreate,[n])},_createView:function(){var i,f,e,r,o=this.element,n=this.options,u;(o.addClass("navview").addClass(!1!==n.compact?"compact-"+n.compact:"").addClass(!1!==n.expanded?"expanded-"+n.expanded:""),i=o.children(".navview-pane"),f=o.children(".navview-content"),e=t(n.toggle),(r=i.find(".navview-menu")).length>0)&&(u=0,t.each(r.prevAll(),function(){u+=t(this).outerHeight(!0)}),t.each(r.nextAll(),function(){u+=t(this).outerHeight(!0)}),r.css({height:"calc(100% - "+(u+20)+"px)"}));this.pane=i.length>0?i:null;this.content=f.length>0?f:null;this.paneToggle=e.length>0?e:null},_createEvents:function(){var r=this,n=this.element,u=this.options,f=this.pane;this.content;n.on(i.events.click,".pull-button, .holder",function(){var i,u=f.width()<280,e=t(this);if(e.hasClass("holder")&&(i=e.parent().find("input"),setTimeout(function(){i.focus()},200)),r.pane.hasClass("open"))r.close();else if((u||n.hasClass("expand"))&&!n.hasClass("compacted"))n.toggleClass("expand");else{if(!n.hasClass("compacted")&&u)return!0;n.toggleClass("compacted")}});null!==this.paneToggle&&this.paneToggle.on(i.events.click,function(){r.pane.toggleClass("open")});t(window).on(i.events.resize,function(){n.removeClass("expand");r.pane.removeClass("open");t(this).width()<=i.media_sizes[String(u.compact).toUpperCase()]&&n.removeClass("compacted")})},open:function(){this.pane.addClass("open")},close:function(){this.pane.removeClass("open")},changeAttribute:function(){}},i.plugin("navview",tr),ir={options:{container:null,width:220,timeout:METRO_TIMEOUT,duration:METRO_ANIMATION_DURATION,distance:"100vh",animation:"swing"},notifies:[],setup:function(n){var i,r=t("body");return this.options=t.extend({},this.options,n),null===this.options.container&&(i=t("<div>").addClass("notify-container"),r.prepend(i),this.options.container=i),this},reset:function(){var n={width:220,timeout:METRO_TIMEOUT,duration:METRO_ANIMATION_DURATION,distance:"100vh",animation:"swing"};this.options=t.extend({},this.options,n)},create:function(n,u,f){var e,s,h=this,o=this.options;if(void 0===n||""===n.trim())return!1;(e=t("<div>").addClass("notify")).css({width:o.width});u&&(s=t("<div>").addClass("notify-title").html(u),e.prepend(s));t("<div>").addClass("notify-message").html(n).appendTo(e);void 0!==f&&(void 0!==f.cls&&e.addClass(f.cls),void 0!==f.width&&e.css({width:f.width}));e.on(i.events.click,function(){h.kill(t(this))});e.hide(function(){e.appendTo(o.container);e.css({marginTop:o.distance}).fadeIn(100,function(){e.animate({marginTop:".25rem"},o.duration,o.animation,function(){void 0!==f&&!0===f.keepOpen||setTimeout(function(){h.kill(e,void 0!==f&&void 0!==f.onClose?f.onClose:void 0)},o.timeout);void 0!==f&&void 0!==f.onShow&&r.callback(f.onShow)})})})},kill:function(n,t){n.fadeOut("slow",function(){n.remove();r.callback(t)})},killAll:function(){var n=this,i=t(".notify");t.each(i,function(){n.kill(t(this))})}},i.notify=ir.setup(),rr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),this},dependencies:["draggable","collapse"],options:{titleCaption:"",titleIcon:"",collapsible:!1,collapsed:!1,collapseDuration:METRO_ANIMATION_DURATION,width:"auto",height:"auto",draggable:!1,clsPanel:"",clsTitle:"",clsTitleCaption:"",clsTitleIcon:"",clsContent:"",clsCollapseToggle:"",onCollapse:i.noop,onExpand:i.noop,onDragStart:i.noop,onDragStop:i.noop,onDragMove:i.noop,onPanelCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var u=this.element,n=this.options,e=u.prev(),s=u.parent(),i=t("<div>").addClass("panel").addClass(n.clsPanel),h=r.uniqueId(),c=u[0].className,f,o;(0===e.length?s.prepend(i):i.insertAfter(e),i.attr("id",h).addClass(c),u[0].className="",u.addClass("panel-content").addClass(n.clsContent).appendTo(i),""!==n.titleCaption||""!==n.titleIcon||!0===n.collapsible)&&(f=t("<div>").addClass("panel-title").addClass(n.clsTitle),(""!==n.titleCaption&&t("<span>").addClass("caption").addClass(n.clsTitleCaption).html(n.titleCaption).appendTo(f),""!==n.titleIcon&&t(n.titleIcon).addClass("icon").addClass(n.clsTitleIcon).appendTo(f),!0===n.collapsible)&&(o=t("<span>").addClass("dropdown-toggle marker-center active-toggle").addClass(n.clsCollapseToggle).appendTo(f),u.collapse({toggleElement:o,duration:n.collapseDuration,onCollapse:n.onCollapse,onExpand:n.onExpand}),!0===n.collapsed&&this.collapse()),f.appendTo(i));!0===n.draggable&&i.draggable({dragElement:f||i,onDragStart:n.onDragStart,onDragStop:n.onDragStop,onDragMove:n.onDragMove});"auto"!==n.width&&parseInt(n.width)>=0&&i.outerWidth(parseInt(n.width));"auto"!==n.height&&parseInt(n.height)>=0&&(i.outerHeight(parseInt(n.height)),u.css({overflow:"auto"}));this.panel=i;r.exec(n.onPanelCreate,[this.element])},collapse:function(){var n=this.element;this.options;!1!==r.isMetroObject(n,"collapse")&&n.data("collapse").collapse()},expand:function(){var n=this.element;this.options;!1!==r.isMetroObject(n,"collapse")&&n.data("collapse").expand()},changeAttribute:function(n){n}},i.plugin("panel",rr),ur={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.popover=null,this.popovered=!1,this.size={width:0,height:0},this._setOptionsFromDOM(),this._create(),this},options:{popoverText:"",popoverHide:3e3,popoverOffset:10,popoverTrigger:i.popoverEvents.HOVER,popoverPosition:i.position.TOP,hideOnLeave:!1,clsPopover:"",onPopoverShow:i.noop,onPopoverHide:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){this.element;this.options;this._createEvents()},_createEvents:function(){var u,n=this,e=this.element,f=this.options;switch(f.popoverTrigger){case i.popoverEvents.CLICK:u=i.events.click;break;case i.popoverEvents.FOCUS:u=i.events.focus;break;default:u=i.events.enter}e.on(u,function(){null===n.popover&&!0!==n.popovered&&(n.createPopover(),f.popoverHide>0&&setTimeout(function(){n.removePopover()},f.popoverHide))});!0!==f.hideOnLeave||r.isTouchDevice()||e.on(i.events.leave,function(){n.removePopover()});t(window).on(i.events.scroll,function(){null!==n.popover&&n.setPosition()})},setPosition:function(){var r=this.popover,f=this.size,u=this.options,n=this.element;u.popoverPosition===i.position.BOTTOM?(r.addClass("bottom"),r.css({top:n.offset().top-t(window).scrollTop()+n.outerHeight()+u.popoverOffset,left:n.offset().left+n.outerWidth()/2-f.width/2-t(window).scrollLeft()})):u.popoverPosition===i.position.RIGHT?(r.addClass("right"),r.css({top:n.offset().top+n.outerHeight()/2-f.height/2-t(window).scrollTop(),left:n.offset().left+n.outerWidth()-t(window).scrollLeft()+u.popoverOffset})):u.popoverPosition===i.position.LEFT?(r.addClass("left"),r.css({top:n.offset().top+n.outerHeight()/2-f.height/2-t(window).scrollTop(),left:n.offset().left-f.width-t(window).scrollLeft()-u.popoverOffset})):(r.addClass("top"),r.css({top:n.offset().top-t(window).scrollTop()-f.height-u.popoverOffset,left:n.offset().left+n.outerWidth()/2-f.width/2-t(window).scrollLeft()}))},createPopover:function(){var u,h=this,s=this.elem,f=this.element,e=this.options,n=t("<div>").addClass("popover neb").addClass(e.clsPopover).html(e.popoverText),c=r.elementId("popover"),o;switch(n.attr("id",c),e.popoverPosition){case i.position.TOP:u="neb-s";break;case i.position.BOTTOM:u="neb-n";break;case i.position.RIGHT:u="neb-w";break;case i.position.LEFT:u="neb-e"}(n.addClass(u),n.on(i.events.click,function(){h.removePopover()}),this.popover=n,this.size=r.hiddenElementSize(n),"TD"===s.tagName||"TH"===s.tagName)&&(o=t("<div/>").css("display","inline-block").html(f.html()),f.html(o),f=o);this.setPosition();n.appendTo(t("body"));this.popovered=!0;r.exec(e.onPopoverShow,[n,f])},removePopover:function(){var t=this,u=this.options.onPopoverHide===i.noop?0:300,n=this.popover;null!==n&&(r.exec(this.options.onPopoverHide,[n,this.element]),setTimeout(function(){n.hide(0,function(){n.remove();t.popover=null;t.popovered=!1})},u))},show:function(){var t=this,n=this.options;!0!==this.popovered&&(this.createPopover(),n.popoverHide>0&&setTimeout(function(){t.removePopover()},n.popoverHide))},hide:function(){this.removePopover()},changeText:function(){this.options.popoverText=this.element.attr("data-popover-text")},changePosition:function(){this.options.popoverPosition=this.element.attr("data-popover-position")},changeAttribute:function(n){switch(n){case"data-popover-text":this.changeText()}}},i.plugin("popover",ur),fr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.value=0,this.buffer=0,this._setOptionsFromDOM(),this._create(),r.exec(this.options.onProgressCreate,[this.element]),this},options:{value:0,buffer:0,type:"bar",small:!1,clsBack:"",clsBar:"",clsBuffer:"",onValueChange:i.noop,onBufferChange:i.noop,onComplete:i.noop,onBuffered:i.noop,onProgressCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,i=this.options;switch(n.html("").addClass("progress"),i.type){case"buffer":t("<div>").addClass("bar").appendTo(n);t("<div>").addClass("buffer").appendTo(n);break;case"load":n.addClass("with-load");t("<div>").addClass("bar").appendTo(n);t("<div>").addClass("buffer").appendTo(n);t("<div>").addClass("load").appendTo(n);break;case"line":n.addClass("line");break;default:t("<div>").addClass("bar").appendTo(n)}!0===i.small&&n.addClass("small");n.addClass(i.clsBack);n.find(".bar").addClass(i.clsBar);n.find(".buffer").addClass(i.clsBuffer);this.val(i.value);this.buff(i.buffer)},val:function(n){var t=this.element,u=this.options,i;if(void 0===n)return this.value;if(i=t.find(".bar"),0===i.length)return!1;this.value=parseInt(n,10);i.css("width",this.value+"%");t.trigger("valuechange",[this.value]);r.exec(u.onValueChange,[this.value,t]);100===this.value&&r.exec(u.onComplete,[this.value,t])},buff:function(n){var t=this.element,u=this.options,i;if(void 0===n)return this.buffer;if(i=t.find(".buffer"),0===i.length)return!1;this.buffer=parseInt(n,10);i.css("width",this.buffer+"%");t.trigger("bufferchange",[this.buffer]);r.exec(u.onBufferChange,[this.buffer,t]);100===this.buffer&&r.exec(u.onBuffered,[this.buffer,t])},changeValue:function(){this.val(this.element.attr("data-value"))},changeBuffer:function(){this.buff(this.element.attr("data-buffer"))},changeAttribute:function(n){switch(n){case"data-value":this.changeValue();break;case"data-buffer":this.changeBuffer()}}},i.plugin("progress",fr),er={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.origin={className:""},this._setOptionsFromDOM(),this._create(),r.exec(this.options.onRadioCreate,[this.element]),this},options:{caption:"",captionPosition:"right",disabled:!1,clsElement:"",clsCheck:"",clsCaption:"",onRadioCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,r=this.options,u=n.prev(),o=n.parent(),i=t("<label>").addClass("radio "+n[0].className),f=t("<span>").addClass("check"),e=t("<span>").addClass("caption").html(r.caption);n.attr("type","radio");0===u.length?o.prepend(i):i.insertAfter(u);n.appendTo(i);f.appendTo(i);e.appendTo(i);"left"===r.captionPosition&&i.addClass("caption-left");this.origin.className=n[0].className;n[0].className="";i.addClass(r.clsElement);e.addClass(r.clsCaption);f.addClass(r.clsCheck);!0===r.disabled&&n.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(n){switch(n){case"disabled":this.toggleState()}},destroy:function(){var n=this.element,t=n.parent();n[0].className=this.origin.className;n.insertBefore(t);t.remove()}},i.plugin("radio",er),or={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.value=0,this.values=[],this.rate=0,this.rating=null,this._setOptionsFromDOM(),this._create(),this},options:{"static":!1,title:null,value:0,values:null,message:"",stars:5,starColor:null,staredColor:null,roundFunc:"round",clsRating:"",clsTitle:"",clsStars:"",clsResult:"",onStarClick:i.noop,onRatingCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t,i=this.element,n=this.options;if(null!==n.values)Array.isArray(n.values)?this.values=n.values:"string"==typeof n.values&&(this.values=r.strToArray(n.values));else for(t=1;t<=n.stars;t++)this.values.push(t);this.value=n.value>0?Math[n.roundFunc](n.value):0;null!==n.starColor&&(r.isColor(n.starColor)||(n.starColor=h.color(n.starColor)));null!==n.staredColor&&(r.isColor(n.staredColor)||(n.staredColor=h.color(n.staredColor)));this._createRating();this._createEvents();r.exec(n.onRatingCreate,[i])},_createRating:function(){var u,s,h,f=this.element,n=this.options,c=f.prev(),v=f.parent(),o=r.elementId("rating"),e=t("<div>").addClass("rating "+String(f[0].className).replace("d-block","d-flex")).addClass(n.clsRating),l=i.sheet,a;for(f.val(this.value),e.attr("id",o),0===c.length?v.prepend(e):e.insertAfter(c),f.appendTo(e),s=t("<ul>").addClass("stars").addClass(n.clsStars).appendTo(e),u=1;u<=n.stars;u++)h=t("<li>").data("value",this.values[u-1]).appendTo(s),u<=this.value&&h.addClass("on");if((t("<span>").addClass("result").addClass(n.clsResult).appendTo(e).html(n.message),null!==n.starColor&&r.addCssRule(l,"#"+o+" .stars:hover li","color: "+n.starColor+";"),null!==n.staredColor&&r.addCssRule(l,"#"+o+" .stars li.on","color: "+n.staredColor+";"),null!==n.title)&&(a=t("<span>").addClass("title").addClass(n.clsTitle).html(n.title),e.prepend(a)),!0===n.static&&e.addClass("static"),f[0].className="",!0===n.copyInlineStyles)for(u=0;u<f[0].style.length;u++)e.css(f[0].style[u],f.css(f[0].style[u]));this.rating=e},_createEvents:function(){var n=this.element,u=this.options;this.rating.on(i.events.click,".stars li",function(){if(!0!==u.static){var i=t(this),f=i.data("value");i.addClass("scale");setTimeout(function(){i.removeClass("scale")},300);n.val(f).trigger("change");i.addClass("on");i.prevAll().addClass("on");i.nextAll().removeClass("on");r.exec(u.onStarClick,[f,i,n])}})},val:function(n){var r=this,u=this.element,f=this.options,e=this.rating,i;return void 0===n?this.value:(this.value=n>0?Math[f.roundFunc](n):0,u.val(this.value).trigger("change"),i=e.find(".stars li").removeClass("on"),t.each(i,function(){var n=t(this);n.data("value")<=r.value&&n.addClass("on")}),this)},msg:function(n){var t=this.rating;if(void 0!==n)return t.find(".result").html(n),this},"static":function(n){var i=this.options,t=this.rating;i.static=n;!0===n?t.addClass("static"):t.removeClass("static")},changeAttributeValue:function(n){var t=this.element,i="value"===n?t.val():t.attr("data-value");this.val(i)},changeAttributeMessage:function(){var n=this.element.attr("data-message");this.msg(n)},changeAttributeStatic:function(){var n=this.element,t=!0===JSON.parse(n.attr("data-static"));this.static(t)},changeAttribute:function(n){switch(n){case"value":case"data-value":this.changeAttributeValue(n);break;case"data-message":this.changeAttributeMessage();break;case"data-static":this.changeAttributeStatic()}}},i.plugin("rating",or),sr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onResizableCreate,[this.element]),this},options:{resizeElement:".resize-element",onResizeStart:i.noop,onResizeStop:i.noop,onResize:i.noop,onResizableCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,u=this.options;""!==u.resizeElement&&0===t(u.resizeElement).length&&t("<span>").addClass("resize-element").appendTo(n);n.on(i.events.start,u.resizeElement,function(f){if(!1!==n.data("canResize")){var e=r.clientXY(f),o=parseInt(n.outerWidth()),s=parseInt(n.outerHeight()),h={width:o,height:s};r.exec(u.onResizeStart,[n,h]);t(document).on(i.events.move,function(t){var i=r.clientXY(t),f={width:o+i.x-e.x,height:s+i.y-e.y};n.css(f);r.exec(u.onResize,[n,f])})}});n.on(i.events.stop,u.resizeElement,function(){t(document).off(i.events.move);var f={width:parseInt(n.outerWidth()),height:parseInt(n.outerHeight())};r.exec(u.onResizeStop,[n,f])})},off:function(){this.element.data("canResize",!1)},on:function(){this.element.data("canResize",!0)},changeAttribute:function(){}},i.plugin("resizable",sr),hr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),this},dependencies:["buttongroup"],options:{onStatic:i.noop,onBeforeTab:i.noop_true,onTab:i.noop,onRibbonMenuCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createStructure();this._createEvents();r.exec(t.onRibbonMenuCreate,[n])},_createStructure:function(){var n=this.element,i,r,u;this.options;n.addClass("ribbon-menu");i=n.find(".tabs-holder li:not(.static)");r=n.find(".tabs-holder li.active");r.length>0?this.open(t(r[0])):i.length>0&&this.open(t(i[0]));u=n.find(".ribbon-toggle-group");t.each(u,function(){var i=t(this),n,r;i.buttongroup({clsActive:"active"});n=0;r=i.find(".ribbon-icon-button");t.each(r,function(){var i=t(this).outerWidth(!0);i>n&&(n=i)});i.css("width",Math.ceil(n*r.length/3)+4)})},_createEvents:function(){var f=this,n=this.element,u=this.options;n.on(i.events.click,".tabs-holder li a",function(e){var s=t(this),o=t(this).parent("li");o.hasClass("static")?u.onStatic===i.noop&&void 0!==s.attr("href")?document.location.href=s.attr("href"):r.exec(u.onStatic,[o,n]):!0===r.exec(u.onBeforeTab,[o,n])&&f.open(o);e.preventDefault()})},open:function(n){var t=this.element,f=this.options,e=t.find(".tabs-holder li"),o=t.find(".content-holder .section"),i=n.children("a").attr("href"),u="#"!==i?t.find(i):null;e.removeClass("active");n.addClass("active");o.removeClass("active");u&&u.addClass("active");r.exec(f.onTab,[n,t])},changeAttribute:function(){}},i.plugin("ribbonmenu",hr),cr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onRippleCreate,[this.element]),this},options:{rippleColor:"#fff",rippleAlpha:.4,rippleTarget:"default",onRippleCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var u=this.element,n=this.options,f="default"===n.rippleTarget?null:n.rippleTarget;u.on(i.events.click,f,function(i){var u=t(this),f,e,o,s;"static"===u.css("position")&&u.css("position","relative");u.css({overflow:"hidden"});t(".ripple").remove();f=Math.max(u.outerWidth(),u.outerHeight());e=t("<span class='ripple'><\/span>").css({width:f,height:f});u.prepend(e);o=i.pageX-u.offset().left-e.width()/2;s=i.pageY-u.offset().top-e.height()/2;e.css({background:r.hex2rgba(n.rippleColor,n.rippleAlpha),width:f,height:f,top:s+"px",left:o+"px"}).addClass("rippleEffect");setTimeout(function(){t(".ripple").remove()},400)})},changeAttribute:function(){}},i.plugin("ripple",cr),lr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onInputCreate,[this.element]),this},options:{clsElement:"",clsInput:"",clsPrepend:"",clsClearButton:"",clsSearchButton:"",size:"default",prepend:"",copyInlineStyles:!0,clearButton:!0,searchButton:!0,searchButtonClick:"submit",clearButtonIcon:"<span class='default-icon-cross'><\/span>",searchButtonIcon:"<span class='default-icon-search'><\/span>",customButtons:[],disabled:!1,onSearchButtonClick:i.noop,onInputCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var s,h,u=this.element,n=this.options,c=u.prev(),a=u.parent(),f=t("<div>").addClass("input "+u[0].className),o=t("<div>").addClass("button-group"),e,l;if((void 0===u.attr("type")&&u.attr("type","text"),0===c.length?a.prepend(f):f.insertAfter(c),u.appendTo(f),o.appendTo(f),!1!==n.clearButton&&((s=t("<button>").addClass("button input-clear-button").addClass(n.clsClearButton).attr("tabindex",-1).attr("type","button").html(n.clearButtonIcon)).on(i.events.click,function(){u.val("").trigger("change").trigger("keyup").focus()}),s.appendTo(o)),!1!==n.searchButton&&((h=t("<button>").addClass("button input-search-button").addClass(n.clsSearchButton).attr("tabindex",-1).attr("type","submit"===n.searchButtonClick?"submit":"button").html(n.searchButtonIcon)).on(i.events.click,function(){"submit"===n.searchButtonClick?r.exec(n.onSearchButtonClick,[u.val(),t(this)],u[0]):this.form.submit()}),h.appendTo(o)),""!==n.prepend)&&(r.isTag(n.prepend)?t(n.prepend):t("<span>"+n.prepend+"<\/span>")).addClass("prepend").addClass(n.clsPrepend).appendTo(f),"string"==typeof n.customButtons&&(n.customButtons=r.isObject(n.customButtons)),"object"==typeof n.customButtons&&r.objectLength(n.customButtons)>0&&t.each(n.customButtons,function(){var n=this,f=t("<button>").addClass("button input-custom-button").addClass(n.cls).attr("tabindex",-1).attr("type","button").html(n.html);f.on(i.events.click,function(){r.exec(n.onclick,[u.val(),f],u[0])});f.appendTo(o)}),"rtl"===u.attr("dir")&&f.addClass("rtl").attr("dir","rtl"),u[0].className="",!0===n.copyInlineStyles)for(e=0,l=u[0].style.length;e<l;e++)f.css(u[0].style[e],u.css(u[0].style[e]));f.addClass(n.clsElement);u.addClass(n.clsInput);"default"!==n.size&&f.css({width:n.size});u.on(i.events.blur,function(){f.removeClass("focused")});u.on(i.events.focus,function(){f.addClass("focused")});!0===n.disabled||u.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(n){switch(n){case"disabled":this.toggleState()}}},i.plugin("search",lr),ar={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.list=null,this._setOptionsFromDOM(),this._create(),r.exec(this.options.onSelectCreate,[this.element]),this},options:{duration:100,clsElement:"",clsSelect:"",clsPrepend:"",clsOption:"",clsOptionGroup:"",prepend:"",placeholder:"",filterPlaceholder:"",filter:!0,copyInlineStyles:!0,dropHeight:200,disabled:!1,onChange:i.noop,onSelectCreate:i.noop,onUp:i.noop,onDrop:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){this._createSelect();this._createEvents()},_addOption:function(n,i){var r,f,e=t(n),u=this.element,o=this.options,s=u.siblings("input");r=t("<li>").addClass(o.clsOption).data("text",n.text).data("value",n.value?n.value:n.text).appendTo(i);f=t("<a>").html(n.text).appendTo(r).addClass(n.className);e.is(":selected")&&(u.val(n.value),s.val(n.text).trigger("change"),u.trigger("change"),r.addClass("active"));f.appendTo(r);r.appendTo(i)},_addOptionGroup:function(n,i){var r=this,u=t(n);t("<li>").html(n.label).addClass("group-title").appendTo(i);t.each(u.children(),function(){r._addOption(this,i)})},_createSelect:function(){var l=this,u=this.element,n=this.options,a=u.prev(),y=u.parent(),e=t("<div>").addClass("select "+u[0].className).addClass(n.clsElement),p=u.prop("multiple"),h=r.elementId("select"),s,v;if(e.attr("id",h).addClass("dropdown-toggle"),0===a.length?y.prepend(e):e.insertAfter(a),u.appendTo(e),u.addClass(n.clsSelect),!1===p){var w=t("<input>").attr("placeholder",n.placeholder).attr("type","text").attr("name","__"+h+"__").prop("readonly",!0),o=t("<div>").addClass("drop-container"),f=t("<ul>").addClass("d-menu").css({"max-height":n.dropHeight}),c=t("<input type='text' data-role='input'>").attr("placeholder",n.filterPlaceholder);e.append(w);e.append(o);o.append(c);!0!==n.filter&&c.hide();o.append(f);t.each(u.children(),function(){"OPTION"===this.tagName?l._addOption(this,f):"OPTGROUP"===this.tagName&&l._addOptionGroup(this,f)});o.dropdown({duration:n.duration,toggleElement:"#"+h,onDrop:function(){var s,e;s=t(".select .drop-container");t.each(s,function(){var n=t(this);n.is(o)||n.data("dropdown").close()});c.val("").trigger(i.events.keyup).focus();void 0!==(e=f.find("li.active").length>0?t(f.find("li.active")[0]):void 0)&&(f.scrollTop(0),setTimeout(function(){f.animate({scrollTop:e.position().top-(f.height()-e.height())/2},100)},200));r.exec(n.onDrop,[f,u],f[0])},onUp:function(){r.exec(n.onUp,[f,u],f[0])}});this.list=f}if(""!==n.prepend&&(r.isTag(n.prepend)?t(n.prepend):t("<span>"+n.prepend+"<\/span>")).addClass("prepend").addClass(n.clsPrepend).appendTo(e),!0===n.copyInlineStyles)for(s=0,v=u[0].style.length;s<v;s++)e.css(u[0].style[s],u.css(u[0].style[s]));"rtl"===u.attr("dir")&&e.addClass("rtl").attr("dir","rtl");!0===n.disabled||u.is(":disabled")?this.disable():this.enable()},_createEvents:function(){var u=this.element,h=this.options,n=u.closest(".select"),f=n.find(".drop-container"),e=u.siblings("input"),o=f.find("input"),s=f.find("ul");n.on(i.events.click,function(n){n.preventDefault();n.stopPropagation()});e.on(i.events.blur,function(){n.removeClass("focused")});e.on(i.events.focus,function(){n.addClass("focused")});o.on(i.events.blur,function(){n.removeClass("focused")});o.on(i.events.focus,function(){n.addClass("focused")});s.on(i.events.click,"li",function(n){if(t(this).hasClass("group-title"))return n.preventDefault(),void n.stopPropagation();var i=t(this),o=i.data("value"),c=i.data("text");s.find("li.active").removeClass("active");i.addClass("active");e.val(c).trigger("change");u.val(o);u.trigger("change");f.data("dropdown").close();r.exec(h.onChange,[o],u[0])});o.on(i.events.keyup,function(){for(var r=this.value.toUpperCase(),i=s.find("li"),n=0;n<i.length;n++)t(i[n]).hasClass("group-title")||(i[n].style.display=i[n].getElementsByTagName("a")[0].innerHTML.toUpperCase().indexOf(r)>-1?"":"none")});f.on(i.events.click,function(n){n.preventDefault();n.stopPropagation()})},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},val:function(n){var i=this.element,e=this.options,o=i.siblings("input"),u=i.find("option"),f=this.list.find("li");if(void 0===n)return i.val();u.removeAttr("selected");t.each(u,function(){""+this.value==""+n&&(this.setAttribute("selected","selected"),o.val(this.text),i.trigger("change"),f.removeClass("active"),t.each(f,function(){var i=t(this);i.hasClass("group-title")||""+i.data("value")==""+n&&i.addClass("active")}),r.exec(e.onChange,[n],i[0]))})},data:function(n){var f,e=this,i=this.element,u=i.parent().find("ul");i.html("");u.html("");"string"==typeof n?i.html(n):r.isObject(n)&&t.each(n,function(n,u){r.isObject(u)?(f=t("<optgroup>").attr("label",n).appendTo(i),t.each(u,function(n,i){t("<option>").attr("value",n).text(i).appendTo(f)})):t("<option>").attr("value",n).text(u).appendTo(i)});t.each(i.children(),function(){"OPTION"===this.tagName?e._addOption(this,u):"OPTGROUP"===this.tagName&&e._addOptionGroup(this,u)})},changeAttribute:function(){},destroy:function(){var r=this.element,n=r.closest(".select"),t=n.find(".drop-container"),f=r.siblings("input"),u=t.find("input"),e=t.find("ul");n.off(i.events.click);f.off(i.events.blur);f.off(i.events.focus);u.off(i.events.blur);u.off(i.events.focus);e.off(i.events.click,"li");u.off(i.events.keyup);t.off(i.events.click);i.destroyPlugin(t,"dropdown");r.insertBefore(n);n.remove()}},t(document).on(i.events.click,function(){var n=t(".select .drop-container");t.each(n,function(){t(this).data("dropdown").close()})}),i.plugin("select",ar),vr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.toggle_element=null,this._setOptionsFromDOM(),this._create(),this},options:{shift:null,staticShift:null,toggle:null,duration:METRO_ANIMATION_DURATION,"static":null,menuItemClick:!0,onOpen:i.noop,onClose:i.noop,onToggle:i.noop,onStaticSet:i.noop,onStaticLoss:i.noop,onSidebarCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,i=this.options;this._createStructure();this._createEvents();t(window).resize();this._checkStatic();r.exec(i.onSidebarCreate,[n],n[0])},_createStructure:function(){var u=this.element,n=this.options,f=u.find(".sidebar-header"),e=i.sheet;void 0===u.attr("id")&&u.attr("id",r.elementId("sidebar"));u.addClass("sidebar");null!==n.toggle&&t(n.toggle).length>0&&(this.toggle_element=t(n.toggle));f.length>0&&void 0!==f.data("image")&&f.css({backgroundImage:"url("+f.data("image")+")"});null!==n.static&&null!==n.staticShift&&r.addCssRule(e,"@media screen and "+i.media_queries[n.static.toUpperCase()],n.staticShift+"{margin-left: 280px; width: calc(100% - 280px);}")},_createEvents:function(){var n=this,u=this.element,r=this.options,f=this.toggle_element;null!==f&&f.on(i.events.click,function(){n.toggle()});null!==r.static&&["fs","sm","md","lg","xl","xxl"].indexOf(r.static)&&t(window).on(i.events.resize+"_"+u.attr("id"),function(){n._checkStatic()});!0===r.menuItemClick&&u.on(i.events.click,".sidebar-menu li > a",function(){n.close()})},_checkStatic:function(){var n=this.element,i=this.options;r.mediaExist(i.static)&&!n.hasClass("static")&&(n.addClass("static"),n.data("opened",!1).removeClass("open"),null!==i.shift&&t.each(i.shift.split(","),function(){t(this).css({left:0},i.duration)}),r.exec(i.onStaticSet,[n],n[0]));r.mediaExist(i.static)||(n.removeClass("static"),r.exec(i.onStaticLoss,[n],n[0]))},isOpen:function(){return!0===this.element.data("opened")},open:function(){var n=this.element,i=this.options;n.hasClass("static")||(n.data("opened",!0).addClass("open"),null!==i.shift&&t.each(i.shift.split(","),function(){t(this).animate({left:n.outerWidth()},i.duration)}),r.exec(i.onOpen,[n],n[0]))},close:function(){var n=this.element,i=this.options;n.hasClass("static")||(n.data("opened",!1).removeClass("open"),null!==i.shift&&t.each(i.shift.split(","),function(){t(this).animate({left:0},i.duration)}),r.exec(i.onClose,[n],n[0]))},toggle:function(){this.isOpen()?this.close():this.open();r.exec(this.options.onToggle,[this.element],this.element[0])},changeAttribute:function(){},destroy:function(){}},i.plugin("sidebar",vr),i.sidebar={isSidebar:function(n){return r.isMetroObject(n,"sidebar")},open:function(n){this.isSidebar(n)&&t(n).data("sidebar").open()},close:function(n){this.isSidebar(n)&&t(n).data("sidebar").close()},toggle:function(n){this.isSidebar(n)&&t(n).data("sidebar").toggle()}},yr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.slider=null,this.value=0,this.percent=0,this.pixel=0,this.buffer=0,this.keyInterval=!1,this._setOptionsFromDOM(),this._create(),this},options:{min:0,max:100,accuracy:0,showMinMax:!1,minMaxPosition:i.position.TOP,value:0,buffer:0,hint:!1,hintAlways:!1,hintPosition:i.position.TOP,hintMask:"$1",vertical:!1,target:null,returnType:"value",size:0,clsSlider:"",clsBackside:"",clsComplete:"",clsBuffer:"",clsMarker:"",clsHint:"",clsMinMax:"",clsMin:"",clsMax:"",onStart:i.noop,onStop:i.noop,onMove:i.noop,onClick:i.noop,onChangeValue:i.noop,onChangeBuffer:i.noop,onFocus:i.noop,onBlur:i.noop,onSliderCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t=this.element,n=this.options;this._createSlider();this._createEvents();this.buff(n.buffer);this.val(n.value);r.exec(n.onSliderCreate,[t])},_createSlider:function(){var e,f=this.element,n=this.options,s=f.prev(),l=f.parent(),u=t("<div>").addClass("slider "+f[0].className).addClass(n.clsSlider),a=t("<div>").addClass("backside").addClass(n.clsBackside),v=t("<div>").addClass("complete").addClass(n.clsComplete),y=t("<div>").addClass("buffer").addClass(n.clsBuffer),h=t("<button>").attr("type","button").addClass("marker").addClass(n.clsMarker),c=t("<div>").addClass("hint").addClass(n.hintPosition+"-side").addClass(n.clsHint),p=r.uniqueId(),o;if((u.attr("id",p),n.size>0&&(!0===n.vertical?u.outerHeight(n.size):u.outerWidth(n.size)),!0===n.vertical&&u.addClass("vertical-slider"),0===s.length?l.prepend(u):u.insertAfter(s),!0===n.hintAlways&&c.css({display:"block"}).addClass("permanent-hint"),f.appendTo(u),a.appendTo(u),v.appendTo(u),y.appendTo(u),h.appendTo(u),c.appendTo(h),!0===n.showMinMax)&&(o=t("<div>").addClass("slider-min-max clear").addClass(n.clsMinMax),t("<span>").addClass("place-left").addClass(n.clsMin).html(n.min).appendTo(o),t("<span>").addClass("place-right").addClass(n.clsMax).html(n.max).appendTo(o),n.minMaxPosition===i.position.TOP?o.insertBefore(u):o.insertAfter(u)),f[0].className="",!0===n.copyInlineStyles)for(e=0;e<f[0].style.length;e++)u.css(f[0].style[e],f.css(f[0].style[e]));this.slider=u},_createEvents:function(){var n=this,f=this.slider,u=this.options,e=f.find(".marker"),o=f.find(".hint");e.on(i.events.start,function(){t(document).on(i.events.move,function(t){!0===u.hint&&!0!==u.hintAlways&&o.fadeIn();n._move(t);r.exec(u.onMove,[n.value,n.percent,f])});t(document).on(i.events.stop,function(){t(document).off(i.events.move);t(document).off(i.events.stop);!0!==u.hintAlways&&o.fadeOut();r.exec(u.onStop,[n.value,n.percent,f])});r.exec(u.onStart,[n.value,n.percent,f])});e.on(i.events.focus,function(){r.exec(u.onFocus,[n.value,n.percent,f])});e.on(i.events.blur,function(){r.exec(u.onBlur,[n.value,n.percent,f])});e.on(i.events.keydown,function(t){var r=t.keyCode?t.keyCode:t.which,i;-1!==[37,38,39,40].indexOf(r)&&(i=0===u.accuracy?1:u.accuracy,n.keyInterval||(n.keyInterval=setInterval(function(){var r=n.value;37!==t.keyCode&&40!==t.keyCode||(r-i<u.min?r=u.min:r-=i);38!==t.keyCode&&39!==t.keyCode||(r+i>u.max?r=u.max:r+=i);n.value=n._correct(r);n.percent=n._convert(n.value,"val2prc");n.pixel=n._convert(n.percent,"prc2pix");n._redraw()},100),t.preventDefault()))});e.on(i.events.keyup,function(){clearInterval(n.keyInterval);n.keyInterval=!1});f.on(i.events.click,function(t){n._move(t);r.exec(u.onClick,[n.value,n.percent,f]);r.exec(u.onStop,[n.value,n.percent,f])});t(window).resize(function(){n.val(n.value);n.buff(n.buffer)})},_convert:function(n,t){var r=this.slider,i=this.options,u=(!0===i.vertical?r.outerHeight():r.outerWidth())-r.find(".marker").outerWidth();switch(t){case"pix2prc":return Math.round(100*n/u);case"pix2val":return Math.round(this._convert(n,"pix2prc")*((i.max-i.min)/100)+i.min);case"val2prc":return Math.round((n-i.min)/((i.max-i.min)/100));case"prc2pix":return Math.round(n/(100/u));case"val2pix":return Math.round(this._convert(this._convert(n,"val2prc"),"prc2pix"))}return 0},_correct:function(n){var t=this.options.accuracy,i=this.options.min,r=this.options.max;return 0===t||isNaN(t)?n:((n=Math.floor(n/t)*t+Math.round(n%t/t)*t)<i&&(n=i),n>r&&(n=r),n)},_move:function(n){var i,u,t=this.slider,f=this.options,o=t.offset(),e=t.find(".marker").outerWidth(),s=!0===f.vertical?t.outerHeight():t.outerWidth(),h=s-e;i=!0===f.vertical?r.pageXY(n).y-o.top:r.pageXY(n).x-o.left;(u=!0===f.vertical?s-i-e/2:i-e/2)<0||u>h||(this.value=this._correct(this._convert(u,"pix2val")),this.percent=this._convert(this.value,"val2prc"),this.pixel=this._convert(this.percent,"prc2pix"),this._redraw())},_hint:function(){var n,t=this.options,i=this.slider.find(".hint");n=t.hintMask.replace("$1",this.value).replace("$2",this.percent);i.text(n)},_value:function(){var u=this.element,n=this.options,e=this.slider,i="value"===n.returnType?this.value:this.percent,f;("INPUT"===u[0].tagName&&u.val(i),u.trigger("change"),null!==n.target)&&(f=t(n.target),0!==f.length&&t.each(f,function(){var n=t(this);"INPUT"===this.tagName?n.val(i):n.text(i)}));r.exec(n.onChangeValue,[i,this.percent,e])},_marker:function(){var t=this.slider,u=this.options,n=t.find(".marker"),f=t.find(".complete"),o=!0===u.vertical?t.outerHeight():t.outerWidth(),e=parseInt(r.getStyleOne(n,"width")),i=r.isVisible(t);i&&n.css({"margin-top":0,"margin-left":0});!0===u.vertical?(i?n.css("top",o-this.pixel):(n.css("top",this.percent+"%"),n.css("margin-top",0===this.percent?0:e/-2)),f.css("height",this.percent+"%")):(i?n.css("left",this.pixel):(n.css("left",this.percent+"%"),n.css("margin-left",0===this.percent?0:e/-2)),f.css("width",this.percent+"%"))},_redraw:function(){this._marker();this._value();this._hint()},_buffer:function(){var n=this.options,t=this.slider.find(".buffer");!0===n.vertical?t.css("height",this.buffer+"%"):t.css("width",this.buffer+"%");r.exec(n.onChangeBuffer,[this.buffer,this.slider])},val:function(n){var t=this.options;if(void 0===n||isNaN(n))return this.value;n<t.min&&(n=t.min);n>t.max&&(n=t.max);this.value=this._correct(n);this.percent=this._convert(this.value,"val2prc");this.pixel=this._convert(this.percent,"prc2pix");this._redraw()},buff:function(n){var t=this.slider.find(".buffer");return void 0===n||isNaN(n)?this.buffer:0!==t.length&&((n=parseInt(n))>100&&(n=100),n<0&&(n=0),this.buffer=n,void this._buffer())},changeValue:function(){var i=this.element,t=this.options,n=i.attr("data-value");n<t.min&&(n=t.min);n>t.max&&(n=t.max);this.val(n)},changeBuffer:function(){var t=this.element,n=parseInt(t.attr("data-buffer"));n<0&&(n=0);n>100&&(n=100);this.buff(n)},changeAttribute:function(n){switch(n){case"data-value":this.changeValue();break;case"data-buffer":this.changeBuffer()}}},i.plugin("slider",yr),pr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.initial=[],this._setOptionsFromDOM(),this._create(),this},options:{thousandSeparator:",",decimalSeparator:",",sortTarget:null,sortSource:null,sortDir:"asc",sortStart:!0,saveInitial:!0,onSortStart:i.noop,onSortStop:i.noop,onSortItemSwitch:i.noop,onSorterCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createStructure();r.exec(t.onSorterCreate,[n])},_createStructure:function(){var t=this.element,n=this.options;null===n.sortTarget&&(n.sortTarget=t.children()[0].tagName);this.initial=t.find(n.sortTarget).get();!0===n.sortStart&&this.sort(n.sortDir)},_getItemContent:function(n){var t,f,e,u,i=this.options;if(r.isValue(i.sortSource)){if(t="",(f=n.getElementsByClassName(i.sortSource)).length>0)for(e=0;e<f.length;e++)t+=f[e].textContent;u=f[0].dataset.format}else t=n.textContent,u=n.dataset.format;if(t=(""+t).toLowerCase().replace(/[\n\r]+|[\s]{2,}/g," ").trim(),r.isValue(u))switch(-1===["number","int","float","money"].indexOf(u)||","===i.thousandSeparator&&"."===i.decimalSeparator||(t=r.parseNumber(t,i.thousandSeparator,i.decimalSeparator)),u){case"date":t=r.isDate(t)?new Date(t):"";break;case"number":t=Number(t);break;case"int":t=parseInt(t);break;case"float":t=parseFloat(t);break;case"money":t=Number(parseFloat(t.replace(/[^0-9-.]/g,"")))}return t},sort:function(n){var f,e,o=this,i=this.element,u=this.options,s=r.uniqueId();void 0!==n&&(u.sortDir=n);0!==(f=i.find(u.sortTarget).get()).length&&(e=t("<div>").attr("id",s).insertBefore(t(i.find(u.sortTarget)[0])),r.exec(u.onSortStart,[i],i[0]),f.sort(function(n,t){var f=o._getItemContent(n),e=o._getItemContent(t),s=0;return f<e?-1:f>e?1:(0!==s&&r.exec(u.onSortItemSwitch,[n,t],i[0]),s)}),"desc"===u.sortDir&&f.reverse(),i.find(u.sortTarget).remove(),t.each(f,function(){var n=t(this);n.insertAfter(e);e=n}),t("#"+s).remove(),r.exec(u.onSortStop,[i],i[0]))},reset:function(){var i,n,u=this.element,f=this.options,e=r.uniqueId();0!==(i=this.initial).length&&(n=t("<div>").attr("id",e).insertBefore(t(u.find(f.sortTarget)[0])),u.find(f.sortTarget).remove(),t.each(i,function(){var i=t(this);i.insertAfter(n);n=i}),t("#"+e).remove())},changeAttribute:function(n){var t,i,r=this,u=this.element,f=this.options;switch(n){case"data-sort-dir":""!==(i=u.attr("data-sort-dir").trim())&&(f.sortDir=i,r.sort());break;case"data-sort-content":""!==(t=u.attr("data-sort-content").trim())&&(f.sortContent=t,r.sort())}},destroy:function(){}},i.plugin("sorter",pr),i.sorter={create:function(n,i){return t(n).sorter(i)},isSorter:function(n){return r.isMetroObject(n,"sorter")},sort:function(n,i){if(!this.isSorter(n))return!1;void 0===i&&(i="asc");t(n).data("sorter").sort(i)},reset:function(n){if(!this.isSorter(n))return!1;t(n).data("sorter").reset()}},wr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.current=0,this._setOptionsFromDOM(),this._create(),this},options:{view:i.stepperView.SQUARE,steps:3,step:1,stepClick:!1,clsStepper:"",clsStep:"",clsComplete:"",clsCurrent:"",onStep:i.noop,onStepClick:i.noop,onStepperCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t=this.element,n=this.options;n.step<=0&&(n.step=1);this._createStepper();this._createEvents();r.exec(n.onStepperCreate,[t])},_createStepper:function(){var n,r=this.element,i=this.options;for(r.addClass("stepper").addClass(i.view).addClass(i.clsStepper),n=1;n<=i.steps;n++)t("<span>").addClass("step").addClass(i.clsStep).data("step",n).html("<span>"+n+"<\/span>").appendTo(r);this.current=1;this.toStep(i.step)},_createEvents:function(){var f=this,n=this.element,u=this.options;n.on(i.events.click,".step",function(){var i=t(this).data("step");!0===u.stepClick&&(f.toStep(i),r.exec(u.onStepClick,[i,n]))})},next:function(){var n=this.element,t=(this.options,n.find(".step"));this.current+1>t.length||(this.current++,this.toStep(this.current))},prev:function(){this.element;this.options;this.current-1!=0&&(this.current--,this.toStep(this.current))},last:function(){var n=this.element;this.options;this.toStep(n.find(".step").length)},first:function(){this.toStep(1)},toStep:function(n){var u=this.element,i=this.options,f=t(u.find(".step").get(n-1));0!==f.length&&(this.current=n,u.find(".step").removeClass("complete current").removeClass(i.clsCurrent).removeClass(i.clsComplete),f.addClass("current").addClass(i.clsCurrent),f.prevAll().addClass("complete").addClass(i.clsComplete),r.exec(i.onStep,[this.current,u]))},changeAttribute:function(){}},i.plugin("stepper",wr),br={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.data=null,this._setOptionsFromDOM(),this._create(),this},options:{duration:METRO_ANIMATION_DURATION,defaultClosedIcon:"",defaultOpenIcon:"",changeUri:!0,encodeLink:!0,closed:!1,chromeNotice:!1,startFrom:null,slideToStart:!0,startSlideSleep:1e3,source:null,data:null,eventClick:"select",selectGlobal:!0,streamSelect:!1,excludeSelectElement:null,excludeClickElement:null,excludeElement:null,excludeSelectClass:"",excludeClickClass:"",excludeClass:"",onStreamClick:i.noop,onStreamSelect:i.noop,onEventClick:i.noop,onEventSelect:i.noop,onStreamerCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var u=this,n=this.element,i=this.options;if(n.addClass("streamer"),void 0===n.attr("id")&&n.attr("id",r.elementId("streamer")),null===i.source&&null===i.data)return!1;t("<div>").addClass("streams").appendTo(n);t("<div>").addClass("events-area").appendTo(n);null!==i.source?t.get(i.source,function(n){u.data=n;u.build()}):(this.data=i.data,this.build());this._createEvents();!0===i.chromeNotice&&!0===r.detectChrome()&&!1===r.isTouchDevice()&&t("<p>").addClass("text-small text-muted").html("*) In Chrome browser please press and hold Shift and turn the mouse wheel.").insertAfter(n)},build:function(){var it=this,e=this.element,u=this.options,n=this.data,l=e.find(".streams").html(""),p=e.find(".events-area").html(""),o=t("<ul>").addClass("streamer-timeline").html("").appendTo(p),w=t("<div>").addClass("streamer-events").appendTo(p),rt=t("<div>").addClass("event-group").appendTo(w),f=r.getURIParameter(null,"StreamerIDS"),b,k,d,c;null!==f&&!0===u.encodeLink&&(f=atob(f));b=f?f.split("|")[0]:null;k=f?f.split("|")[1].split(","):[];void 0!==n.actions&&(d=t("<div>").addClass("streamer-actions").appendTo(l),t.each(n.actions,function(){var n=this,u=t("<button>").addClass("streamer-action").addClass(n.cls).html(n.html);void 0!==n.onclick&&u.on(i.events.click,function(){r.exec(n.onclick,[e])});u.appendTo(d)}));o.html("");void 0===n.timeline&&(n.timeline={start:"09:00",stop:"18:00",step:20});var s=new Date,h=new Date,g=n.timeline.start?n.timeline.start.split(":"):[9,0],nt=n.timeline.stop?n.timeline.stop.split(":"):[18,0],ut=n.timeline.step?60*parseInt(n.timeline.step):1200;for(s.setHours(g[0]),s.setMinutes(g[1]),s.setSeconds(0),h.setHours(nt[0]),h.setMinutes(nt[1]),h.setSeconds(0),c=s.getTime()/1e3;c<=h.getTime()/1e3;c+=ut){var tt=new Date(1e3*c),a=tt.getHours(),v=tt.getMinutes(),y=(a<10?"0"+a:a)+":"+(v<10?"0"+v:v);t("<li>").data("time",y).addClass("js-time-point-"+y.replace(":","-")).html("<em>"+y+"<\/em>").appendTo(o)}void 0!==n.streams&&t.each(n.streams,function(n){var i=this,f=t("<div>").addClass("stream").addClass(this.cls).appendTo(l),s;f.addClass(i.cls).data("one",!1).data("data",i.data);t("<div>").addClass("stream-title").html(i.title).appendTo(f);t("<div>").addClass("stream-secondary").html(i.secondary).appendTo(f);t(i.icon).addClass("stream-icon").appendTo(f);var c=r.computedRgbToHex(r.getStyleOne(f,"background-color")),a=r.computedRgbToHex(r.getStyleOne(f,"color")),h=t("<div>").addClass("stream-events").data("background-color",c).data("text-color",a).appendTo(rt);void 0!==i.events&&(t.each(i.events,function(i){var v,s=this,d=n+":"+i,g=void 0!==s.custom?s.custom:"",nt=void 0!==s.custom_open?s.custom_open:"",tt=void 0!==s.custom_close?s.custom_close:"",l=t("<div>").data("origin",s).data("sid",d).data("data",s.data).data("time",s.time).data("target",s.target).addClass("stream-event").addClass("size-"+s.size+"x").addClass(s.cls).appendTo(h),it=o.find(".js-time-point-"+this.time.replace(":","-"))[0].offsetLeft-f.outerWidth();l.css({position:"absolute",left:it});var y=t("<div>").addClass("stream-event-slide").appendTo(l),p=t("<div>").addClass("slide-logo").appendTo(y),w=t("<div>").addClass("slide-data").appendTo(y);void 0!==s.icon&&(r.isTag(s.icon)?t(s.icon).addClass("icon").appendTo(p):t("<img>").addClass("icon").attr("src",s.icon).appendTo(p));t("<span>").addClass("time").css({backgroundColor:c,color:a}).html(s.time).appendTo(p);t("<div>").addClass("title").html(s.title).appendTo(w);t("<div>").addClass("subtitle").html(s.subtitle).appendTo(w);t("<div>").addClass("desc").html(s.desc).appendTo(w);(!1===u.closed&&e.attr("id")===b&&-1!==k.indexOf(d)||!0===s.selected||1===parseInt(s.selected))&&l.addClass("selected");!0===u.closed||!0===s.closed||1===parseInt(s.closed)?(v=void 0!==s.closedIcon?r.isTag(s.closedIcon)?s.closedIcon:"<span>"+s.closedIcon+"<\/span>":r.isTag(u.defaultClosedIcon)?u.defaultClosedIcon:"<span>"+u.defaultClosedIcon+"<\/span>",t(v).addClass("state-icon").addClass(s.clsClosedIcon).appendTo(y),l.data("closed",!0).data("target",s.target),l.append(nt)):(v=void 0!==s.openIcon?r.isTag(s.openIcon)?s.openIcon:"<span>"+s.openIcon+"<\/span>":r.isTag(u.defaultOpenIcon)?u.defaultOpenIcon:"<span>"+u.defaultOpenIcon+"<\/span>",t(v).addClass("state-icon").addClass(s.clsOpenIcon).appendTo(y),l.data("closed",!1),l.append(tt));l.append(g)}),s=h.find(".stream-event:last-child"),s.length>0&&h.outerWidth(s[0].offsetLeft+s.outerWidth()))});void 0!==n.global&&t.each(["before","after"],function(){void 0!==n.global[this]&&t.each(n.global[this],function(){var n=this,u=t("<div>").addClass("event-group").addClass("size-"+n.size+"x"),e=t("<div>").addClass("stream-events global-stream").appendTo(u),i=t("<div>").addClass("stream-event").appendTo(e),f,r;i.addClass("global-event").addClass(n.cls).data("time",n.time).data("origin",n).data("data",n.data);t("<div>").addClass("event-title").html(n.title).appendTo(i);t("<div>").addClass("event-subtitle").html(n.subtitle).appendTo(i);t("<div>").addClass("event-html").html(n.html).appendTo(i);r=o.find(".js-time-point-"+this.time.replace(":","-"));r.length>0&&(f=r[0].offsetLeft-l.find(".stream").outerWidth());u.css({position:"absolute",left:f,height:"100%"}).appendTo(w)})});e.data("stream",-1);null!==u.startFrom&&!0===u.slideToStart&&setTimeout(function(){it.slideTo(u.startFrom)},u.startSlideSleep);r.exec(u.onStreamerCreate,[e])},_createEvents:function(){var f=this,u=this.element,n=this.options;u.on(i.events.click,".stream-event",function(i){var u=t(this),e;""!==n.excludeClass&&u.hasClass(n.excludeClass)||null!==n.excludeElement&&t(i.target).is(n.excludeElement)||(!1===n.closed&&!0!==u.data("closed")&&"select"===n.eventClick?""!==n.excludeSelectClass&&u.hasClass(n.excludeSelectClass)||null!==n.excludeSelectElement&&t(i.target).is(n.excludeSelectElement)||(u.hasClass("global-event")?!0===n.selectGlobal&&u.toggleClass("selected"):u.toggleClass("selected"),!0===n.changeUri&&f._changeURI(),r.exec(n.onEventSelect,[u,u.hasClass("selected")])):""!==n.excludeClickClass&&u.hasClass(n.excludeClickClass)||null!==n.excludeClickElement&&t(i.target).is(n.excludeClickElement)||(r.exec(n.onEventClick,[u]),!0===n.closed||!0===u.data("closed"))&&(e=u.data("target"),e&&(window.location.href=e)))});u.on(i.events.click,".stream",function(){var i=t(this),e=i.index();!1!==n.streamSelect&&(u.data("stream")===e?(u.find(".stream-event").removeClass("disabled"),u.data("stream",-1)):(u.data("stream",e),u.find(".stream-event").addClass("disabled"),f.enableStream(i),r.exec(n.onStreamSelect,[i])),r.exec(n.onStreamClick,[i]))});!0!==r.isTouchDevice()&&u.on(i.events.mousewheel,".events-area",function(n){var i=t(this),r;void 0!==n.deltaY&&void 0!==n.deltaFactor&&n.deltaFactor>1&&(r=i.scrollLeft()-30*n.deltaY,i.scrollLeft(r),n.preventDefault())});!0===r.isTouchDevice()&&u.on(i.events.click,".stream",function(){var n=t(this);n.toggleClass("focused");t.each(u.find(".stream"),function(){t(this).is(n)||t(this).removeClass("focused")})})},_changeURI:function(){this.element;this.options;this.data;var n=this.getLink();history.pushState({},document.title,n)},slideTo:function(n){var r,i=this.element,u=this.options;this.data;r=t(void 0===n?i.find(".streamer-timeline li")[0]:i.find(".streamer-timeline .js-time-point-"+n.replace(":","-"))[0]);i.find(".events-area").animate({scrollLeft:r[0].offsetLeft-i.find(".streams .stream").outerWidth()},u.duration)},enableStream:function(n){var t=this.element,i=(this.options,this.data,n.index());n.removeClass("disabled").data("streamDisabled",!1);t.find(".stream-events").eq(i).find(".stream-event").removeClass("disabled")},disableStream:function(n){var t=this.element,i=(this.options,this.data,n.index());n.addClass("disabled").data("streamDisabled",!0);t.find(".stream-events").eq(i).find(".stream-event").addClass("disabled")},toggleStream:function(n){!0===n.data("streamDisabled")?this.enableStream(n):this.disableStream(n)},getLink:function(){var n,i=this.element,f=this.options,e=(this.data,i.find(".stream-event")),u=[],o=window.location.href;return t.each(e,function(){var n=t(this);void 0!==n.data("sid")&&n.hasClass("selected")&&u.push(n.data("sid"))}),n=i.attr("id")+"|"+u.join(","),!0===f.encodeLink&&(n=btoa(n)),r.updateURIParameter(o,"StreamerIDS",n)},getTimes:function(){var i=this.element,r=(this.options,this.data,i.find(".streamer-timeline > li")),n=[];return t.each(r,function(){n.push(t(this).data("time"))}),n},getEvents:function(n,i){var r,u=this.element,f=(this.options,this.data,[]);switch(n){case"selected":r=u.find(".stream-event.selected");break;case"non-selected":r=u.find(".stream-event:not(.selected)");break;default:r=u.find(".stream-event")}return t.each(r,function(){var n,r=t(this);!0!==i&&r.parent().hasClass("global-stream")||(n=r.data("origin"),f.push(n))}),f},source:function(n){if(void 0===n)return this.options.source;this.options.source=n;this.changeSource()},data:function(n){if(void 0===n)return this.options.source;this.options.data=n;this.changeData()},getStreamerData:function(){return this.data},toggleEvent:function(n){this.element;var i=this.options;this.data;(n=t(n)).hasClass("global-event")&&!0!==i.selectGlobal||(n.hasClass("selected")?this.selectEvent(n,!1):this.selectEvent(n,!0))},selectEvent:function(n,i){this.element;var u=this.options;this.data;void 0===i&&(i=!0);(n=t(n)).hasClass("global-event")&&!0!==u.selectGlobal||(!0===i?n.addClass("selected"):n.removeClass("selected"),!0===u.changeUri&&this._changeURI(),r.exec(u.onEventSelect,[n,i]))},changeSource:function(){var n=this,i=this.element,r=this.options,u=(this.data,i.attr("data-source"));""!==String(u).trim()&&(r.source=u,t.get(r.source,function(t){n.data=t;n.build()}),i.trigger("sourcechanged"))},changeData:function(){var n=this.element,t=this.options,i=(this.data,n.attr("data-data"));""!==String(i).trim()&&(t.data=i,this.data=JSON.parse(t.data),this.build(),n.trigger("datachanged"))},changeStreamSelectOption:function(){var n=this.element,t=this.options;this.data;t.streamSelect="true"===n.attr("data-stream-select").toLowerCase()},changeAttribute:function(n){switch(n){case"data-source":this.changeSource();break;case"data-data":this.changeData();break;case"data-stream-select":this.changeStreamSelectOption()}}},i.plugin("streamer",br),kr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onSwitchCreate,[this.element]),this},options:{caption:"",captionPosition:"right",disabled:!1,clsElement:"",clsCheck:"",clsCaption:"",onSwitchCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,r=this.options,u=n.prev(),o=n.parent(),i=t("<label>").addClass("switch "+n[0].className),f=t("<span>").addClass("check"),e=t("<span>").addClass("caption").html(r.caption);n.attr("type","checkbox");0===u.length?o.prepend(i):i.insertAfter(u);n.appendTo(i);f.appendTo(i);e.appendTo(i);"left"===r.captionPosition&&i.addClass("caption-left");n[0].className="";i.addClass(r.clsElement);e.addClass(r.clsCaption);f.addClass(r.clsCheck);!0===r.disabled&&n.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(n){switch(n){case"disabled":this.toggleState()}}},i.plugin("switch",kr),dr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.currentPage=1,this.pagesCount=1,this.filterString="",this.data=null,this.activity=null,this.busy=!1,this.filters=[],this.wrapperInfo=null,this.wrapperSearch=null,this.wrapperRows=null,this.wrapperPagination=null,this.filterIndex=null,this.filtersIndexes=null,this.sort={dir:"asc",colIndex:0},this.heads=[],this.items=[],this.foots=[],this._setOptionsFromDOM(),this._create(),this},options:{filter:null,filters:null,source:null,showRowsSteps:!0,showSearch:!0,showTableInfo:!0,showPagination:!0,showAllPages:!1,showActivity:!0,muteTable:!0,rows:10,rowsSteps:"10,25,50,100",sortDir:"asc",decimalSeparator:".",thousandSeparator:",",tableRowsCountTitle:"Show entries:",tableSearchTitle:"Search:",tableInfoTitle:"Showing $1 to $2 of $3 entries",paginationPrevTitle:"Prev",paginationNextTitle:"Next",activityType:"cycle",activityStyle:"color",activityTimeout:100,searchWrapper:null,rowsWrapper:null,infoWrapper:null,paginationWrapper:null,clsComponent:"",clsTable:"",clsHead:"",clsHeadRow:"",clsHeadCell:"",clsBody:"",clsBodyRow:"",clsBodyCell:"",clsFooter:"",clsFooterRow:"",clsFooterCell:"",clsTableTop:"",clsRowsCount:"",clsSearch:"",clsTableBottom:"",clsTableInfo:"",clsTablePagination:"",clsPagination:"",onDraw:i.noop,onDrawRow:i.noop,onSortStart:i.noop,onSortStop:i.noop,onSortItemSwitch:i.noop,onSearch:i.noop,onRowsCountChange:i.noop,onDataLoad:i.noop,onDataLoaded:i.noop,onFilterRowAccepted:i.noop,onFilterRowDeclined:i.noop,onTableCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var i=this,u=this.element,n=this.options;null!==n.source?(r.exec(n.onDataLoad,[n.source],u[0]),t.get(n.source,function(t){i._build(t);r.exec(n.onDataLoaded,[n.source,t],u[0])}).fail(function(n,t,i){console.log(t);console.log(n);console.log(i)})):i._build()},_build:function(n){var t=this.element,i=this.options;r.isValue(n)?this._createItemsFromJSON(n):this._createItemsFromHTML();this._createStructure();this._createEvents();r.exec(i.onTableCreate,[t],t[0])},_createItemsFromHTML:function(){var n=this,i=this.element,u=i.find("tbody"),f=i.find("thead"),e=i.find("tfoot");this.items=[];this.heads=[];this.foots=[];u.length>0&&t.each(u.find("tr"),function(){var r=t(this),i=[];t.each(r.children("td"),function(){var n=t(this);i.push(n.html())});n.items.push(i)});f.length>0&&t.each(f.find("tr > *"),function(){var f,e,u,i=t(this);f=i.hasClass("sort-asc")?"asc":i.hasClass("sort-desc")?"desc":void 0;u=(u=(u=i[0].className.replace("sortable-column","")).replace("sort-asc","")).replace("sort-desc","");e={title:i.html(),format:r.isValue(i.data("format"))?i.data("format"):void 0,name:r.isValue(i.data("name"))?i.data("name"):void 0,sortable:i.hasClass("sortable-column"),sortDir:f,clsColumn:r.isValue(i.data("cls-column"))?i.data("cls-column"):"",cls:u,colspan:i.attr("colspan")};n.heads.push(e)});e.length>0&&t.each(e.find("tr > *"),function(){var u,i=t(this);u={title:i.html(),name:!!r.isValue(i.data("name"))&&i.data("name"),cls:i[0].className,colspan:i.attr("colspan")};n.foots.push(u)})},_createItemsFromJSON:function(n){var i=this;this.items=[];this.heads=[];this.foots=[];void 0!==n.header&&(i.heads=n.header);void 0!==n.data&&t.each(n.data,function(){var n=[];t.each(this,function(){n.push(this)});i.items.push(n)});void 0!==n.footer&&(this.foots=n.footer)},_createTableHeader:function(){var f,n,u=this.options,i=t("<thead>");return i.addClass(u.clsHead),0===this.heads.length?i:(f=t("<tr>").addClass(u.clsHeadRow).appendTo(i),t.each(this.heads,function(){var i=this;n=t("<th>").appendTo(f);!0===i.sortable&&(n.addClass("sortable-column"),void 0!==i.sortDir&&n.addClass("sort-"+i.sortDir));void 0!==i.title&&n.html(i.title);void 0!==i.format&&n.attr("data-format",i.format);void 0!==i.name&&n.addClass("column-name-"+i.name);void 0!==i.size&&n.css({width:i.size});void 0!==i.cls&&n.addClass(i.cls);r.isValue(i.colspan)&&n.attr("colspan",i.colspan);n.addClass(u.clsHeadCell)}),i)},_createTableBody:function(){return t("<tbody>").addClass(this.options.clsBody)},_createTableFooter:function(){var i,n,f=this.options,u=t("<tfoot>").addClass(f.clsFooter);return 0===this.foots.length?u:(i=t("<tr>").addClass(f.clsHeadRow).appendTo(u),t.each(this.foots,function(){var u=this;n=t("<th>").appendTo(i);void 0!==u.title&&n.html(u.title);void 0!==u.name&&n.addClass("foot-column-name-"+u.name);void 0!==u.cls&&n.addClass(u.cls);r.isValue(u.colspan)&&n.attr("colspan",u.colspan);n.appendTo(i)}),u)},_createTopBlock:function(){var i,u,f,o=this,s=this.element,n=this.options,e=t("<div>").addClass("table-top").addClass(n.clsTableTop).insertBefore(s);return i=r.isValue(this.wrapperSearch)?this.wrapperSearch:t("<div>").addClass("table-search-block").addClass(n.clsSearch).appendTo(e),t("<input>").attr("type","text").appendTo(i).input({prepend:n.tableSearchTitle}),!0!==n.showSearch&&i.hide(),u=r.isValue(this.wrapperRows)?this.wrapperRows:t("<div>").addClass("table-rows-block").addClass(n.clsRowsCount).appendTo(e),f=t("<select>").appendTo(u),t.each(r.strToArray(n.rowsSteps),function(){var i=t("<option>").attr("value",this).text(this).appendTo(f);parseInt(this)===parseInt(n.rows)&&i.attr("selected","selected")}),f.select({filter:!1,prepend:n.tableRowsCountTitle,onChange:function(t){parseInt(t)!==parseInt(n.rows)&&(n.rows=t,o.currentPage=1,o._draw(),r.exec(n.onRowsCountChange,[t],s[0]))}}),!0!==n.showRowsSteps&&u.hide(),e},_createBottomBlock:function(){var r,u,f=this.element,n=this.options,i=t("<div>").addClass("table-bottom").addClass(n.clsTableBottom).insertAfter(f);return r=t("<div>").addClass("table-info").addClass(n.clsTableInfo).appendTo(i),!0!==n.showTableInfo&&r.hide(),u=t("<div>").addClass("table-pagination").addClass(n.clsTablePagination).appendTo(i),!0!==n.showPagination&&u.hide(),i},_createStructure:function(){var f,s,u=this,i=this.element,n=this.options,h=t(n.searchWrapper),c=t(n.infoWrapper),l=t(n.rowsWrapper),a=t(n.paginationWrapper),e,o;h.length>0&&(this.wrapperSearch=h);c.length>0&&(this.wrapperInfo=c);l.length>0&&(this.wrapperRows=l);a.length>0&&(this.wrapperPagination=a);i.parent().hasClass("table-component")?f=i.parent():(f=t("<div>").addClass("table-component").insertBefore(i),i.appendTo(f));f.addClass(n.clsComponent);this.activity=t("<div>").addClass("table-progress").appendTo(f);t("<div>").activity({type:n.activityType,style:n.activityStyle}).appendTo(this.activity);!0!==n.showActivity&&this.activity.css({visibility:"hidden"});i.html("").addClass(n.clsTable);i.append(this._createTableHeader());i.append(this._createTableBody());i.append(this._createTableFooter());this._createTopBlock();this._createBottomBlock();o=!1;this.heads.length>0&&t.each(this.heads,function(n){!o&&["asc","desc"].indexOf(this.sortDir)>-1&&(o=!0,u.sort.colIndex=n,u.sort.dir=this.sortDir)});o&&(s=i.find(".sortable-column"),this._resetSortClass(s),t(s.get(this.sort.colIndex)).addClass("sort-"+this.sort.dir),this.sorting());r.isValue(n.filter)&&(!1===(e=r.isFunc(n.filter))&&(e=r.func(n.filter)),u.filterIndex=u.addFilter(e));r.isValue(n.filters)&&t.each(r.strToArray(n.filters),function(){!1!==(e=r.isFunc(this))&&u.filtersIndexes.push(u.addFilter(e))});this.currentPage=1;this._draw()},_resetSortClass:function(n){t(n).removeClass("sort-asc sort-desc")},_createEvents:function(){function s(i){var r=t(i),u=r.parent();u.hasClass("active")||(u.hasClass("service")?"prev"===r.data("page")?(n.currentPage--,0===n.currentPage&&(n.currentPage=1)):(n.currentPage++,n.currentPage>n.pagesCount&&(n.currentPage=n.pagesCount)):n.currentPage=r.data("page"),n._draw())}var e,n=this,u=this.element,f=this.options,o=u.parent(),h=o.find(".table-search-block input");u.on(i.events.click,".sortable-column",function(){if(!0===f.muteTable&&u.addClass("disabled"),n.busy)return!1;n.busy=!0;var i=t(this);n.activity.show(f.activityTimeout,function(){n.currentPage=1;n.sort.colIndex=i.index();n.sort.dir=i.has("sort-asc")||i.hasClass("sort-desc")?i.hasClass("sort-asc")?"desc":"asc":f.sortDir;n._resetSortClass(u.find(".sortable-column"));i.addClass("sort-"+n.sort.dir);n.sorting();n._draw(function(){n.busy=!1;!0===f.muteTable&&u.removeClass("disabled")})})});h.on(i.events.inputchange,function(){n.filterString=this.value.trim().toLowerCase();":"!==n.filterString[n.filterString.length-1]&&(n.currentPage=1,n._draw())});r.isValue(this.wrapperSearch)&&(e=this.wrapperSearch.find("input")).length>0&&e.on(i.events.inputchange,function(){n.filterString=this.value.trim().toLowerCase();":"!==n.filterString[n.filterString.length-1]&&(n.currentPage=1,n._draw())});o.on(i.events.click,".pagination .page-link",function(){s(this)});r.isValue(this.wrapperPagination)&&this.wrapperPagination.on(i.events.click,".pagination .page-link",function(){s(this)})},_info:function(n,t,i){var u,e=this.element,o=this.options,s=e.parent(),f=r.isValue(this.wrapperInfo)?this.wrapperInfo:s.find(".table-info");0!==f.length&&(t>i&&(t=i),0===this.items.length&&(n=t=i=0),u=(u=(u=(u=o.tableInfoTitle).replace("$1",n)).replace("$2",t)).replace("$3",i),f.html(u))},_paging:function(n){var u,s,h,f,i=this,l=this.element,o=this.options,a=l.parent(),c=r.isValue(this.wrapperPagination)?this.wrapperPagination:a.find(".table-pagination"),e;if(c.html(""),f=t("<ul>").addClass("pagination").addClass(o.clsPagination).appendTo(c),0!==this.items.length){if(this.pagesCount=Math.ceil(n/o.rows),e=function(n,i,r){var u,f;return u=t("<li>").addClass("page-item").addClass(i),(f=t("<a>").addClass("page-link").html(n)).data("page",r),f.appendTo(u),u},s=e(o.paginationPrevTitle,"service prev-page","prev"),f.append(s),f.append(e(1,1===i.currentPage?"active":"",1)),!0===o.showAllPages||this.pagesCount<=7)for(u=2;u<this.pagesCount;u++)f.append(e(u,u===i.currentPage?"active":"",u));else if(i.currentPage<5){for(u=2;u<=5;u++)f.append(e(u,u===i.currentPage?"active":"",u));this.pagesCount>5&&f.append(e("...","no-link",null))}else if(i.currentPage<=i.pagesCount&&i.currentPage>i.pagesCount-4)for(this.pagesCount>5&&f.append(e("...","no-link",null)),u=i.pagesCount-4;u<i.pagesCount;u++)f.append(e(u,u===i.currentPage?"active":"",u));else f.append(e("...","no-link",null)),f.append(e(i.currentPage-1,"",i.currentPage-1)),f.append(e(i.currentPage,"active",i.currentPage)),f.append(e(i.currentPage+1,"",i.currentPage+1)),f.append(e("...","no-link",null));(i.pagesCount>1||i.currentPage<i.pagesCount)&&f.append(e(i.pagesCount,i.currentPage===i.pagesCount?"active":"",i.pagesCount));h=e(o.paginationNextTitle,"service next-page","next");f.append(h);1===this.currentPage&&s.addClass("disabled");this.currentPage===this.pagesCount&&h.addClass("disabled")}},_draw:function(n){var u,o,s,e=this,f=this.element,i=this.options,a=f.find("tbody"),c=-1===i.rows?0:i.rows*(this.currentPage-1),v=-1===i.rows?this.items.length-1:c+i.rows-1,l=-1,h;for(a.html(""),r.isValue(this.filterString)||this.filters.length>0?((s=this.filterString.split(":")).length>1&&t.each(e.heads,function(n,t){s[0]===t.title.toLowerCase()&&(l=n)}),o=this.items.filter(function(n){var o=(""+(s.length>1&&l>-1?n[l]:n.join())).replace(/[\n\r]+|[\s]{2,}/g," ").trim().toLowerCase(),t=!r.isValue(e.filterString)||o.indexOf(s.length>1?s[1]:s[0])>-1;if(!0===t&&e.filters.length>0)for(u=0;u<e.filters.length;u++)if(!0!==r.exec(e.filters[u],[n])){t=!1;break}return t?r.exec(i.onFilterRowAccepted,[n],f[0]):r.exec(i.onFilterRowDeclined,[n],f[0]),t}),r.exec(i.onSearch,[e.filterString,o],f[0])):o=this.items,u=c;u<=v;u++)h=t("<tr>").addClass(i.clsBodyRow),void 0!==o[u]&&t.each(o[u],function(n){var r=t("<td>").html(this);r.addClass(i.clsBodyCell);void 0!==e.heads[n].clsColumn&&r.addClass(e.heads[n].clsColumn);r.appendTo(h)}),h.appendTo(a),r.exec(i.onDrawRow,[h],f[0]);this._info(c+1,v+1,o.length);this._paging(o.length);this.activity.hide();r.exec(i.onDraw,[f],f[0]);void 0!==n&&r.exec(n,[f],f[0])},_getItemContent:function(n){var t,f=n[this.sort.colIndex],u=this.heads[this.sort.colIndex].format,i=this.options;if(t=(""+f).toLowerCase().replace(/[\n\r]+|[\s]{2,}/g," ").trim(),r.isValue(u))switch(-1===["number","int","float","money"].indexOf(u)||","===i.thousandSeparator&&"."===i.decimalSeparator||(t=r.parseNumber(t,i.thousandSeparator,i.decimalSeparator)),u){case"date":t=r.isDate(t)?new Date(t):"";break;case"number":t=Number(t);break;case"int":t=parseInt(t);break;case"float":t=parseFloat(t);break;case"money":t=r.parseMoney(t)}return t},draw:function(){return this._draw()},sorting:function(n){var t=this,i=this.element,u=this.options;null!=n&&(this.sort.dir=n);r.exec(u.onSortStart,[this.items],i[0]);this.items.sort(function(n,f){var o=t._getItemContent(n),s=t._getItemContent(f),e=0;return o<s&&(e="asc"===t.sort.dir?-1:1),o>s&&(e="asc"===t.sort.dir?1:-1),0!==e&&r.exec(u.onSortItemSwitch,[n,f,e],i[0]),e});r.exec(u.onSortStop,[this.items],i[0])},filter:function(n){this.filterString=n.trim().toLowerCase();this.currentPage=1;this._draw()},loadData:function(n){var i=this,u=this.element,f=this.options;!0===r.isValue(n)&&(f.source=n,r.exec(f.onDataLoad,[f.source],u[0]),t.get(f.source,function(n){var e,o=!1;i._createItemsFromJSON(n);u.html("");u.append(i._createTableHeader());u.append(i._createTableBody());u.append(i._createTableFooter());i.heads.length>0&&t.each(i.heads,function(n){!o&&["asc","desc"].indexOf(this.sortDir)>-1&&(o=!0,i.sort.colIndex=n,i.sort.dir=this.sortDir)});o&&(e=u.find(".sortable-column"),i._resetSortClass(e),t(e.get(i.sort.colIndex)).addClass("sort-"+i.sort.dir),i.sorting());i.currentPage=1;i._draw();r.exec(f.onDataLoaded,[f.source,n],u[0])}).fail(function(n,t,i){console.log(t);console.log(n);console.log(i)}))},next:function(){0!==this.items.length&&(this.currentPage++,this.currentPage>this.pagesCount?this.currentPage=this.pagesCount:this._draw())},prev:function(){0!==this.items.length&&(this.currentPage--,0!==this.currentPage?this._draw():this.currentPage=1)},first:function(){0!==this.items.length&&(this.currentPage=1,this._draw())},last:function(){0!==this.items.length&&(this.currentPage=this.pagesCount,this._draw())},page:function(n){n<=0&&(n=1);n>this.pagesCount&&(n=this.pagesCount);this.currentPage=n;this._draw()},addFilter:function(n,t){var i=r.isFunc(n);if(!1!==i)return this.filters.push(i),!0===t&&(this.currentPage=1,this.draw()),this.filters.length-1},removeFilter:function(n,t){return r.arrayDeleteByKey(this.filters,n),!0===t&&(this.currentPage=1,this.draw()),this},removeFilters:function(n){this.filters=[];!0===n&&(this.currentPage=1,this.draw())},getFilters:function(){return this.filters},getFilterIndex:function(){return this.filterIndex},getFiltersIndexes:function(){return this.filtersIndexes},changeAttribute:function(){},destroy:function(){}},i.plugin("table",dr),gr={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._targets=[],this._setOptionsFromDOM(),this._create(),r.exec(this.options.onTabsCreate,[this.element],this.elem),this},options:{onTab:i.noop,onBeforeTab:i.noop_true,onTabsCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,i=(this.options,n.find(".active").length>0?t(n.find(".active")[0]):void 0);this._createStructure();this._createEvents();this._open(i)},_createStructure:function(){var e,u,i=this.element,o=(this.options,i.prev()),s=i.parent(),n=t("<div>").addClass("tabs tabs-wrapper "+i[0].className),f;if(i[0].className="",0===o.length?s.prepend(n):n.insertAfter(o),i.appendTo(n),i.data("expanded",!1),e=t("<div>").addClass("expand-title"),n.prepend(e),0===(u=n.find(".hamburger")).length){for(u=t("<button>").attr("type","button").addClass("hamburger menu-down").appendTo(n),f=0;f<3;f++)t("<span>").addClass("line").appendTo(u);!0===h.isLight(r.computedRgbToHex(r.getStyleOne(n,"background-color")))&&u.addClass("dark")}},_createEvents:function(){var f=this,n=this.element,e=this.options,u=n.parent();u.on(i.events.click,".hamburger, .expand-title",function(){!1===n.data("expanded")?(n.addClass("expand"),n.data("expanded",!0),u.find(".hamburger").addClass("active")):(n.removeClass("expand"),n.data("expanded",!1),u.find(".hamburger").removeClass("active"))});n.on(i.events.click,"a",function(i){var s=t(this),h=s.attr("href"),o=s.parent("li");if(!0===n.data("expanded")&&(n.removeClass("expand"),n.data("expanded",!1),u.find(".hamburger").removeClass("active")),!0!==r.exec(e.onBeforeTab,[o,n],o[0]))return!1;r.isUrl(h)||(f._open(o),i.preventDefault())})},_collectTargets:function(){var n=this,i=this.element.find("li");t.each(i,function(){var i=t(this).find("a").attr("href").trim();i.length>1&&"#"===i[0]&&n._targets.push(i)})},_open:function(n){var u=this.element,e=this.options,f=u.find("li"),o=u.siblings(".expand-title"),i;0!==f.length&&(this._collectTargets(),void 0===n&&(n=t(f[0])),i=n.find("a").attr("href"),void 0!==i&&(f.removeClass("active"),n.parent().hasClass("d-menu")?n.parent().parent().addClass("active"):n.addClass("active"),t.each(this._targets,function(){var n=t(this);n.length>0&&n.hide()}),"#"!==i&&t(i).show(),o.html(n.find("a").html()),r.exec(e.onTab,[n,u])))},changeAttribute:function(){}},i.plugin("tabs",gr),nu={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),r.exec(this.options.onTextareaCreate,[this.element]),this},options:{prepend:"",copyInlineStyles:!0,clearButton:!0,clearButtonIcon:"<span class='default-icon-cross'><\/span>",autoSize:!1,disabled:!1,onTextareaCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var s,n=this.element,u=this.options,h=n.prev(),l=n.parent(),f=t("<div>").addClass("textarea "+n[0].className),e,o,c;if(0===h.length?l.prepend(f):f.insertAfter(h),!1!==u.clearButton&&((s=t("<button>").addClass("button input-clear-button").attr("tabindex",-1).attr("type","button").html(u.clearButtonIcon)).on(i.events.click,function(){n.val("").trigger("change").trigger("keyup").focus()}),s.appendTo(f)),n.appendTo(f),e=function(){n[0].style.cssText="height:auto;";n[0].style.cssText="height:"+n[0].scrollHeight+"px"},(u.autoSize&&(f.addClass("autosize"),setTimeout(function(){e()},0),n.on(i.events.keyup,e),n.on(i.events.keydown,e),n.on(i.events.change,e),n.on(i.events.focus,e),n.on(i.events.cut,e),n.on(i.events.paste,e),n.on(i.events.drop,e)),"rtl"===n.attr("dir")&&f.addClass("rtl").attr("dir","rtl"),""!==u.prepend)&&(r.isTag(u.prepend)?t(u.prepend):t("<span>"+u.prepend+"<\/span>")).addClass("prepend").addClass(u.clsPrepend).appendTo(f),n[0].className="",!0===u.copyInlineStyles)for(o=0,c=n[0].style.length;o<c;o++)f.css(n[0].style[o],n.css(n[0].style[o]));n.on(i.events.blur,function(){f.removeClass("focused")});n.on(i.events.focus,function(){f.addClass("focused")});!0===u.disabled||n.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0);this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1);this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(n){switch(n){case"disabled":this.toggleState()}}},i.plugin("textarea",nu),tu={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.effectInterval=!1,this.images=[],this.slides=[],this.currentSlide=-1,this.unload=!1,this._setOptionsFromDOM(),this._create(),this},options:{size:"medium",cover:"",effect:"",effectInterval:3e3,effectDuration:500,target:null,canTransform:!0,onClick:i.noop,onTileCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createTile();this._createEvents();r.exec(t.onTileCreate,[n])},_createTile:function(){function e(n,t){setTimeout(function(){n.fadeOut(500,function(){n.css("background-image","url("+t+")");n.fadeIn()})},r.random(0,1e3))}var u=this,n=this.element,i=this.options,f=n.find(".slide"),o=n.find(".slide-front, .slide-back");n.addClass("tile-"+i.size);i.effect.indexOf("hover-")>-1&&(n.addClass("effect-"+i.effect),t.each(o,function(){var n=t(this);void 0!==n.data("cover")&&u._setCover(n,n.data("cover"))}));i.effect.indexOf("animate-")>-1&&f.length>1&&(t.each(f,function(n){var r=t(this);u.slides.push(this);void 0!==r.data("cover")&&u._setCover(r,r.data("cover"));n>0&&(["animate-slide-up","animate-slide-down"].indexOf(i.effect)>-1&&r.css("top","100%"),["animate-slide-left","animate-slide-right"].indexOf(i.effect)>-1&&r.css("left","100%"),["animate-fade"].indexOf(i.effect)>-1&&r.css("opacity",0))}),this.currentSlide=0,this._runEffects());""!==i.cover&&this._setCover(n,i.cover);"image-set"===i.effect&&(n.addClass("image-set"),t.each(n.children("img"),function(){var i=t(this),f=this.src,r=t("<div>").addClass("img");i.hasClass("icon")||(u.images.push(this),r.css("background-image","url("+f+")"),n.prepend(r),i.remove())}),setInterval(function(){for(var o,i=u.images.slice(),f=0;f<n.find(".img").length;f++)o=r.random(0,i.length-1),e(t(n.find(".img").get(f)),i[o].src),i.splice(o,1)},3e3))},_runEffects:function(){var i=this,n=this.options;!1===this.effectInterval&&(this.effectInterval=setInterval(function(){var r,u;r=t(i.slides[i.currentSlide]);i.currentSlide++;i.currentSlide===i.slides.length&&(i.currentSlide=0);u=i.slides[i.currentSlide];"animate-slide-up"===n.effect&&c.slideUp(t(r),t(u),n.effectDuration);"animate-slide-down"===n.effect&&c.slideDown(t(r),t(u),n.effectDuration);"animate-slide-left"===n.effect&&c.slideLeft(t(r),t(u),n.effectDuration);"animate-slide-right"===n.effect&&c.slideRight(t(r),t(u),n.effectDuration);"animate-fade"===n.effect&&c.fade(t(r),t(u),n.effectDuration)},n.effectInterval))},_stopEffects:function(){clearInterval(this.effectInterval);this.effectInterval=!1},_setCover:function(n,t){n.css({backgroundImage:"url("+t+")",backgroundSize:"cover",backgroundRepeat:"no-repeat"})},_createEvents:function(){var f=this,n=this.element,u=this.options;n.on(i.events.start,function(i){var c,o=t(this),s=n.width(),f=n.height(),h=r.pageXY(i).x-o.offset().left,e=r.pageXY(i).y-o.offset().top;!1===r.isRightMouse(i)&&(c=h<s/3&&(e<f/2||e>f/2)?"left":h>2*s/3&&(e<f/2||e>f/2)?"right":h>s/3&&h<2*s/3&&e>f/2?"bottom":"top",!0===u.canTransform&&o.addClass("transform-"+c),null!==u.target&&setTimeout(function(){document.location.href=u.target},100),r.exec(u.onClick,[o]))});n.on([i.events.stop,i.events.leave].join(" "),function(){t(this).removeClass("transform-left").removeClass("transform-right").removeClass("transform-top").removeClass("transform-bottom")});t(window).on(i.events.blur,function(){f._stopEffects()});t(window).on(i.events.focus,function(){f._runEffects()})},changeAttribute:function(){}},i.plugin("tile",tu),iu={init:function(n,r){return this.options=t.extend({},this.options,n),this.elem=r,this.element=t(r),this.picker=null,this.isOpen=!1,this.value=[],this.locale=i.locales[METRO_LOCALE].calendar,this._setOptionsFromDOM(),this._create(),this},options:{value:null,locale:METRO_LOCALE,distance:3,hours:!0,minutes:!0,seconds:!0,showLabels:!0,scrollSpeed:5,copyInlineStyles:!0,clsPicker:"",clsPart:"",clsHours:"",clsMinutes:"",clsSeconds:"",okButtonIcon:"<span class='default-icon-check'><\/span>",cancelButtonIcon:"<span class='default-icon-cross'><\/span>",onSet:i.noop,onOpen:i.noop,onClose:i.noop,onScroll:i.noop,onTimePickerCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t,u=this.element,n=this.options,f=this.picker;for(n.distance<1&&(n.distance=1),""!==u.val()||null!==n.value&&""!==String(n.value).trim()||(n.value=(new Date).format("%H:%M:%S")),this.value=r.strToArray(""!==u.val()?u.val():String(n.value),":"),t=0;t<3;t++)this.value[t]=void 0===this.value[t]||null===this.value[t]?0:parseInt(this.value[t]);void 0===i.locales[n.locale]&&(n.locale=METRO_LOCALE);this.locale=i.locales[n.locale].calendar;this._createStructure();this._createEvents();this._set();r.exec(n.onTimePickerCreate,[u,f])},_createStructure:function(){var u,e,o,s,n,c,l,h,a,f=this.element,i=this.options,v=f.prev(),y=f.parent(),p=r.elementId("time-picker");if(u=t("<div>").attr("id",p).addClass("wheel-picker time-picker "+f[0].className).addClass(i.clsPicker),0===v.length?y.prepend(u):u.insertAfter(v),f.attr("readonly",!0).appendTo(u),c=t("<div>").addClass("time-wrapper").appendTo(u),!0===i.hours&&(e=t("<div>").attr("data-title",this.locale.time.hours).addClass("hours").addClass(i.clsPart).addClass(i.clsHours).appendTo(c)),!0===i.minutes&&(o=t("<div>").attr("data-title",this.locale.time.minutes).addClass("minutes").addClass(i.clsPart).addClass(i.clsMinutes).appendTo(c)),!0===i.seconds&&(s=t("<div>").attr("data-title",this.locale.time.seconds).addClass("seconds").addClass(i.clsPart).addClass(i.clsSeconds).appendTo(c)),l=t("<div>").addClass("select-wrapper").appendTo(u),h=t("<div>").addClass("select-block").appendTo(l),!0===i.hours){for(e=t("<ul>").addClass("sel-hours").appendTo(h),n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(e);for(n=0;n<24;n++)t("<li>").addClass("js-hours-"+n).html(n<10?"0"+n:n).data("value",n).appendTo(e);for(n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(e)}if(!0===i.minutes){for(o=t("<ul>").addClass("sel-minutes").appendTo(h),n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(o);for(n=0;n<60;n++)t("<li>").addClass("js-minutes-"+n).html(n<10?"0"+n:n).data("value",n).appendTo(o);for(n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(o)}if(!0===i.seconds){for(s=t("<ul>").addClass("sel-seconds").appendTo(h),n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(s);for(n=0;n<60;n++)t("<li>").addClass("js-seconds-"+n).html(n<10?"0"+n:n).data("value",n).appendTo(s);for(n=0;n<i.distance;n++)t("<li>").html("&nbsp;").data("value",-1).appendTo(s)}if(h.height(40*(2*i.distance+1)),a=t("<div>").addClass("action-block").appendTo(l),t("<button>").attr("type","button").addClass("button action-ok").html(i.okButtonIcon).appendTo(a),t("<button>").attr("type","button").addClass("button action-cancel").html(i.cancelButtonIcon).appendTo(a),f[0].className="",!0===i.copyInlineStyles)for(n=0;n<f[0].style.length;n++)u.css(f[0].style[n],f.css(f[0].style[n]));!0===i.showLabels&&u.addClass("show-labels");this.picker=u},_createEvents:function(){var u=this,f=(this.element,this.options),n=this.picker;n.on(i.events.start,".select-block ul",function(n){if(!n.changedTouches){var e=this,u=r.pageXY(n).y;t(document).on(i.events.move+"-picker",function(n){e.scrollTop-=f.scrollSpeed*(u>r.pageXY(n).y?-1:1);u=r.pageXY(n).y});t(document).on(i.events.stop+"-picker",function(){t(document).off(i.events.move+"-picker");t(document).off(i.events.stop+"-picker")})}});n.on(i.events.click,function(n){!1===u.isOpen&&u.open();n.stopPropagation()});n.on(i.events.click,".action-ok",function(t){var i,r,f,e=n.find(".sel-hours li.active"),o=n.find(".sel-minutes li.active"),s=n.find(".sel-seconds li.active");i=0===e.length?0:e.data("value");r=0===o.length?0:o.data("value");f=0===s.length?0:s.data("value");u.value=[i,r,f];u._set();u.close();t.stopPropagation()});n.on(i.events.click,".action-cancel",function(n){u.close();n.stopPropagation()});this._addScrollEvents()},_addScrollEvents:function(){var n=this.picker,u=this.options;t.each(["hours","minutes","seconds"],function(){var f=this,t=n.find(".sel-"+f);0!==t.length&&(t.on(i.events.scrollStart,function(){t.find(".active").removeClass("active")}),t.on(i.events.scrollStop,{latency:50},function(){var e=Math.round(Math.ceil(t.scrollTop()+40)/40)-1,i=t.find(".js-"+f+"-"+e),o=i.position().top-40*u.distance+t.scrollTop();t.animate({scrollTop:o},100,function(){i.addClass("active");r.exec(u.onScroll,[i,t,n])})}))})},_removeScrollEvents:function(){var n=this.picker;t.each(["hours","minutes","seconds"],function(){n.find(".sel-"+this).off("scrollstart scrollstop")})},_set:function(){var e=this.element,u=this.options,f=this.picker,n="00",t="00",i="00";!0===u.hours&&((n=this.value[0])<10&&(n="0"+n),f.find(".hours").html(n));!0===u.minutes&&((t=this.value[1])<10&&(t="0"+t),f.find(".minutes").html(t));!0===u.seconds&&((i=this.value[2])<10&&(i="0"+i),f.find(".seconds").html(i));e.val([n,t,i].join(":")).trigger("change");r.exec(u.onSet,[this.value,e.val(),e,f])},open:function(){var i,u,f,e,o,s,h=this.element,t=this.options,n=this.picker,c=n.find(".select-wrapper"),l=n.find("li");c.show();l.removeClass("active");!0===t.hours&&(i=this.value[0],(e=n.find(".sel-hours")).scrollTop(0).animate({scrollTop:e.find("li").eq(i).addClass("active").position().top},100));!0===t.minutes&&(u=this.value[1],(o=n.find(".sel-minutes")).scrollTop(0).animate({scrollTop:o.find("li").eq(u).addClass("active").position().top},100));!0===t.seconds&&(f=this.value[2],(s=n.find(".sel-seconds")).scrollTop(0).animate({scrollTop:s.find("li").eq(f).addClass("active").position().top},100));this.isOpen=!0;r.exec(t.onOpen,[this.value,h,n])},close:function(){var n=this.picker,t=this.options,i=this.element;n.find(".select-wrapper").hide();this.isOpen=!1;r.exec(t.onClose,[this.value,i,n])},_convert:function(n){return Array.isArray(n)?n:"function"==typeof n.getMonth?[n.getHours(),n.getMinutes(),n.getSeconds()]:r.isObject(n)?[n.h,n.m,n.s]:r.strToArray(n,":")},val:function(n){if(void 0===n)return element.val();this.value=this._convert(n);this._set()},time:function(n){if(void 0===n)return{h:this.value[0],m:this.value[1],s:this.value[2]};this.value=this._convert(n);this._set()},date:function(n){if(void 0===n||"function"!=typeof n.getMonth){var t=new Date;return t.setHours(this.value[0]),t.setMinutes(this.value[1]),t.setSeconds(this.value[2]),t.setMilliseconds(0),t}this.value=this._convert(n);this._set()},changeValueAttribute:function(){this.val(this.element.attr("data-value"))},changeAttribute:function(n){switch(n){case"data-value":this.changeValueAttribute()}}},i.plugin("timepicker",iu),t(document).on(i.events.click,function(){t.each(t(".time-picker"),function(){t(this).find("input").data("timepicker").close()})}),ru={create:function(n,i,u,f){var e=t("<div>").addClass("toast").html(n).appendTo(t("body")).hide(),o=e.outerWidth();u=u||METRO_TIMEOUT;e.css({left:"50%","margin-left":-o/2}).addClass(f).fadeIn(METRO_ANIMATION_DURATION);setTimeout(function(){e.fadeOut(METRO_ANIMATION_DURATION,function(){e.remove();r.callback(i)})},u)}},i.toast=ru,uu={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),this},options:{effect:"slide",duration:100,onNodeClick:i.noop,onNodeDblClick:i.noop,onNodeDelete:i.noop,onNodeInsert:i.noop,onNodeClean:i.noop,onCheckClick:i.noop,onRadioClick:i.noop,onExpandNode:i.noop,onCollapseNode:i.noop,onTreeviewCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createTree();this._createEvents();r.exec(t.onTreeviewCreate,[n])},_createIcon:function(n){var i,u;return u=r.isTag(n)?t(n):t("<img>").attr("src",n),(i=t("<span>").addClass("icon")).html(u),i},_createCaption:function(n){return t("<span>").addClass("caption").html(n)},_createToggle:function(){return t("<span>").addClass("node-toggle")},_createNode:function(n){var i;return i=t("<li>"),void 0!==n.caption&&i.prepend(this._createCaption(n.caption)),void 0!==n.icon&&i.prepend(this._createIcon(n.icon)),void 0!==n.html&&i.append(n.html),i},_createTree:function(){var n=this,i=this.element,r=(this.options,i.find("li"));i.addClass("treeview");t.each(r,function(){var i=t(this);void 0!==i.data("caption")&&i.prepend(n._createCaption(i.data("caption")));void 0!==i.data("icon")&&i.prepend(n._createIcon(i.data("icon")));i.children("ul").length>0&&(i.append(n._createToggle()),!0!==i.data("collapsed")?i.addClass("expanded"):i.children("ul").hide())})},_createEvents:function(){var u=this,n=this.element,f=this.options;n.on(i.events.click,".node-toggle",function(n){var i=t(this).parent();u.toggleNode(i);n.preventDefault()});n.on(i.events.click,"li > .caption",function(i){var e=t(this).parent();u.current(e);r.exec(f.onNodeClick,[e,n]);i.preventDefault()});n.on(i.events.dblclick,"li > .caption",function(i){var e=t(this).closest("li"),o=e.children(".node-toggle"),s=e.children("ul");(o.length>0||s.length>0)&&u.toggleNode(e);r.exec(f.onNodeDblClick,[e,n]);i.preventDefault()});n.on(i.events.click,"input[type=radio]",function(){var i=t(this),o=i.is(":checked"),e=i.closest("li");u.current(e);r.exec(f.onRadioClick,[o,i,e,n])});n.on(i.events.click,"input[type=checkbox]",function(){var i,e=t(this),o=e.is(":checked"),s=e.closest("li");u.current(s);(i=e.closest("li").find("ul input[type=checkbox]")).attr("data-indeterminate",!1);i.prop("checked",o);i=[];t.each(n.find("input[type=checkbox]"),function(){i.push(this)});t.each(i.reverse(),function(){var n=t(this),r=n.closest("li").children("ul").find("input[type=checkbox]").length,i=n.closest("li").children("ul").find("input[type=checkbox]:checked").length;r>0&&0===i&&(n.attr("data-indeterminate",!1),n.prop("checked",!1));0===i?n.attr("data-indeterminate",!1):i>0&&r>i?n.attr("data-indeterminate",!0):r===i&&(n.attr("data-indeterminate",!1),n.prop("checked",!0))});r.exec(f.onCheckClick,[o,e,s,n],this)})},current:function(n){var t=this.element;if(this.options,void 0===n)return t.find("li.current");t.find("li").removeClass("current");n.addClass("current")},toggleNode:function(n){var i,u=this.element,t=this.options;n.toggleClass("expanded");"slide"===t.effect?(i=!0!==n.hasClass("expanded")?"slideUp":"slideDown",r.exec(t.onCollapseNode,[n,u])):(i=!0!==n.hasClass("expanded")?"fadeOut":"fadeIn",r.exec(t.onExpandNode,[n,u]));n.children("ul")[i](t.duration)},addTo:function(n,i){var u,f,e=this.element,o=this.options;return null===n?u=e:0===(u=n.children("ul")).length&&(u=t("<ul>").appendTo(n),this._createToggle().appendTo(n),n.addClass("expanded")),(f=this._createNode(i)).appendTo(u),r.exec(o.onNodeInsert,[f,e]),f},insertBefore:function(n,t){var u=this.element,f=this.options,i=this._createNode(t);return i.insertBefore(n),r.exec(f.onNodeInsert,[i,u]),i},insertAfter:function(n,t){var u=this.element,f=this.options,i=this._createNode(t);return i.insertAfter(n),r.exec(f.onNodeInsert,[i,u]),i},del:function(n){var i=this.element,f=this.options,t=n.closest("ul"),u=t.closest("li");n.remove();0!==t.children().length||t.is(i)||(t.remove(),u.removeClass("expanded"),u.children(".node-toggle").remove());r.exec(f.onNodeDelete,[n,i])},clean:function(n){var t=this.element,i=this.options;n.children("ul").remove();n.removeClass("expanded");n.children(".node-toggle").remove();r.exec(i.onNodeClean,[n,t])},changeAttribute:function(){}},i.plugin("treeview",uu),s={required:function(n){return""!==n.trim()},length:function(n,t){return!(void 0===t||isNaN(t)||t<=0)&&n.trim().length===parseInt(t)},minlength:function(n,t){return!(void 0===t||isNaN(t)||t<=0)&&n.trim().length>=parseInt(t)},maxlength:function(n,t){return!(void 0===t||isNaN(t)||t<=0)&&n.trim().length<=parseInt(t)},min:function(n,t){return void 0!==t&&!isNaN(t)&&!!this.number(n)&&!isNaN(n)&&Number(n)>=Number(t)},max:function(n,t){return void 0!==t&&!isNaN(t)&&!!this.number(n)&&!isNaN(n)&&Number(n)<=Number(t)},email:function(n){return/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i.test(n)},domain:function(n){return/^((xn--)?[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/.test(n)},url:function(n){return/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(n)},date:function(n){return"Invalid Date"!==new Date(n)&&!isNaN(new Date(n))},number:function(n){return!isNaN(n)},integer:function(n){return r.isInt(n)},float:function(n){return r.isFloat(n)},digits:function(n){return/^\d+$/.test(n)},hexcolor:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},color:function(n){return!1!==h.color(n,h.PALETTES.STANDARD)},pattern:function(n,t){return void 0!==t&&new RegExp(t).test(n)},compare:function(n,t){return n===t},not:function(n,t){return n!==t},custom:function(n,t){return!1!==r.isFunc(t)&&r.exec(t,[n])},is_control:function(n){return n.parent().hasClass("input")||n.parent().hasClass("select")||n.parent().hasClass("textarea")||n.parent().hasClass("checkbox")||n.parent().hasClass("switch")||n.parent().hasClass("radio")},reset_state:function(n){var i=!1===r.isJQueryObject(n)?t(n):n;s.is_control(i)?i.parent().removeClass("invalid valid"):i.removeClass("invalid valid")},set_valid_state:function(n){!1===r.isJQueryObject(n)&&(n=t(n));s.is_control(n)?n.parent().addClass("valid"):n.addClass("valid")},set_invalid_state:function(n){!1===r.isJQueryObject(n)&&(n=t(n));s.is_control(n)?n.parent().addClass("invalid"):n.addClass("invalid")},reset:function(n){var i=this;return t.each(t(n).find("[data-validate]"),function(){i.reset_state(this)}),this},validate:function(n,i,u,f,e){var h=!0,o=t(n),c=(s.is_control(o),void 0!==o.data("validate")?String(o.data("validate")).split(" ").map(function(n){return n.trim()}):[]),l=[],a;return(c.indexOf("required"),0===c.length)?!0:((this.reset_state(o),o.attr("type")&&"checkbox"===o.attr("type").toLowerCase())?(!1===(h=-1===c.indexOf("required")||o.is(":checked"))&&l.push("required"),void 0!==i&&(i.val+=h?0:1)):o.attr("type")&&"radio"===o.attr("type").toLowerCase()?(void 0===o.attr("name")&&(h=!0),a="input[name="+o.attr("name")+"]:checked",h=t(a).length>0,void 0!==i&&(i.val+=h?0:1)):t.each(c,function(){if(!1!==h){var n,t,u=this.split("=");n=u[0];u.shift();t=u.join("=");"compare"===n&&(t=o[0].form.elements[t].value);!1===(h=!1===r.isFunc(s[n])||(!0===e||"required"===n?s[n](o.val(),t):""===o.val().trim()||s[n](o.val(),t)))&&l.push(n);void 0!==i&&(i.val+=h?0:1)}}),!1===h?(this.set_invalid_state(o),void 0!==i&&i.log.push({input:o[0],name:o.attr("name"),value:o.val(),funcs:c,errors:l}),void 0!==f&&r.exec(f,[o,o.val()],o[0])):(this.set_valid_state(o),void 0!==u&&r.exec(u,[o,o.val()],o[0])),h)}},i.validator=s,fu={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._onsubmit=null,this._onreset=null,this._action=null,this.result=[],this._setOptionsFromDOM(),this._create(),this},dependencies:["utils","colors"],options:{submitTimeout:200,interactiveCheck:!1,clearInvalid:0,requiredMode:!0,onBeforeSubmit:i.noop_true,onSubmit:i.noop,onError:i.noop,onValidate:i.noop,onErrorForm:i.noop,onValidateForm:i.noop,onValidatorCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var u=this,n=this.element,f=this.options,e=n.find("[data-validate]");this._action=n[0].action;n.attr("novalidate","novalidate").attr("action","javascript:");t.each(e,function(){var n=t(this);n.data("validate").indexOf("required")>-1&&(s.is_control(n)?n.parent().addClass("required"):n.addClass("required"));!0===f.interactiveCheck&&n.on(i.events.inputchange,function(){s.validate(this,void 0,void 0,void 0,f.requiredMode)})});this._onsubmit=null;this._onreset=null;null!==n[0].onsubmit&&(this._onsubmit=n[0].onsubmit,n[0].onsubmit=null);null!==n[0].onreset&&(this._onreset=n[0].onreset,n[0].onreset=null);n[0].onsubmit=function(){return u._submit()};n[0].onreset=function(){return u._reset()};r.exec(this.options.onValidatorCreate,[n],this.elem)},_reset:function(){s.reset(this.element);null!==this._onsubmit&&r.exec(this._onsubmit,null,this.element[0])},_submit:function(){var e=this,i=this.element,n=this.options,f=this.elem,o=i.find("[data-validate]"),h=i.find(":submit").attr("disabled","disabled").addClass("disabled"),u={val:0,log:[]};return t.each(o,function(){s.validate(this,u,n.onValidate,n.onError,n.requiredMode)}),h.removeAttr("disabled").removeClass("disabled"),i[0].action=this._action,u.val+=!1===r.exec(n.onBeforeSubmit,[i],this.elem)?1:0,0===u.val?(r.exec(n.onValidateForm,[i],f),setTimeout(function(){r.exec(n.onSubmit,[i],f);null!==e._onsubmit&&r.exec(e._onsubmit,null,f)},n.submitTimeout)):(r.exec(n.onErrorForm,[u.log,i],f),n.clearInvalid>0&&setTimeout(function(){t.each(o,function(){var n=t(this);s.is_control(n)?n.parent().removeClass("invalid"):n.removeClass("invalid")})},n.clearInvalid)),0===u.val},changeAttribute:function(n){n}},i.plugin("validator",fu),eu={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.fullscreen=!1,this.preloader=null,this.player=null,this.video=i,this.stream=null,this.volume=null,this.volumeBackup=0,this.muted=!1,this.fullScreenInterval=!1,this._setOptionsFromDOM(),this._create(),this},options:{src:null,poster:"",logo:"",logoHeight:32,logoWidth:"auto",logoTarget:"",volume:.5,loop:!1,autoplay:!1,fullScreenMode:i.fullScreenMode.DESKTOP,aspectRatio:i.aspectRatio.HD,controlsHide:3e3,showLoop:!0,showPlay:!0,showStop:!0,showMute:!0,showFull:!0,showStream:!0,showVolume:!0,showInfo:!0,loopIcon:"<span class='default-icon-loop'><\/span>",stopIcon:"<span class='default-icon-stop'><\/span>",playIcon:"<span class='default-icon-play'><\/span>",pauseIcon:"<span class='default-icon-pause'><\/span>",muteIcon:"<span class='default-icon-mute'><\/span>",volumeLowIcon:"<span class='default-icon-low-volume'><\/span>",volumeMediumIcon:"<span class='default-icon-medium-volume'><\/span>",volumeHighIcon:"<span class='default-icon-high-volume'><\/span>",screenMoreIcon:"<span class='default-icon-enlarge'><\/span>",screenLessIcon:"<span class='default-icon-shrink'><\/span>",onPlay:i.noop,onPause:i.noop,onStop:i.noop,onEnd:i.noop,onMetadata:i.noop,onTime:i.noop,onVideoCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t=this.element,n=this.options;this.video;!1===i.fullScreenEnabled&&(n.fullScreenMode=i.fullScreenMode.WINDOW);this._createPlayer();this._createControls();this._createEvents();this._setAspectRatio();!0===n.autoplay&&this.play();r.exec(n.onVideoCreate,[t,this.player])},_createPlayer:function(){var i=this.element,n=this.options,e=this.video,f=i.prev(),o=i.parent(),r=t("<div>").addClass("media-player video-player "+i[0].className),u=t("<div>").addClass("preloader").appendTo(r),s=t("<a>").attr("href",n.logoTarget).addClass("logo").appendTo(r);0===f.length?o.prepend(r):r.insertAfter(f);i.appendTo(r);t.each(["muted","autoplay","controls","height","width","loop","poster","preload"],function(){i.removeAttr(this)});i.attr("preload","auto");""!==n.poster&&i.attr("poster",n.poster);e.volume=n.volume;u.activity({type:"cycle",style:"color"});u.hide(0);this.preloader=u;""!==n.logo&&t("<img>").css({height:n.logoHeight,width:n.logoWidth}).attr("src",n.logo).appendTo(s);null!==n.src&&this._setSource(n.src);i[0].className="";this.player=r},_setSource:function(n){var i=this.element;i.find("source").remove();i.removeAttr("src");Array.isArray(n)?t.each(n,function(){void 0!==this.src&&t("<source>").attr("src",this.src).attr("type",void 0!==this.type?this.type:"").appendTo(i)}):i.attr("src",n)},_createControls:function(){var f,u=this,e=this.element,n=this.options,i=this.elem,r=(this.player,t("<div>").addClass("controls").addClass(n.clsControls).insertAfter(e)),o=t("<div>").addClass("stream").appendTo(r),s=t("<input>").addClass("stream-slider ultra-thin cycle-marker").appendTo(o),h=t("<div>").addClass("volume").appendTo(r),c=t("<input>").addClass("volume-slider ultra-thin cycle-marker").appendTo(h),l=t("<div>").addClass("info-box").appendTo(r);!0!==n.showInfo&&l.hide();s.slider({clsMarker:"bg-red",clsHint:"bg-cyan fg-white",clsComplete:"bg-cyan",hint:!0,onStart:function(){i.paused||i.pause()},onStop:function(n){i.seekable.length>0&&(i.currentTime=(u.duration*n/100).toFixed(0));i.paused&&i.currentTime>0&&i.play()}});this.stream=s;!0!==n.showStream&&o.hide();c.slider({clsMarker:"bg-red",clsHint:"bg-cyan fg-white",hint:!0,value:100*n.volume,onChangeValue:function(n){i.volume=n/100}});this.volume=c;!0!==n.showVolume&&h.hide();!0===n.showLoop&&(f=t("<button>").attr("type","button").addClass("button square loop").html(n.loopIcon).appendTo(r));!0===n.showPlay&&t("<button>").attr("type","button").addClass("button square play").html(n.playIcon).appendTo(r);!0===n.showStop&&t("<button>").attr("type","button").addClass("button square stop").html(n.stopIcon).appendTo(r);!0===n.showMute&&t("<button>").attr("type","button").addClass("button square mute").html(n.muteIcon).appendTo(r);!0===n.showFull&&t("<button>").attr("type","button").addClass("button square full").html(n.screenMoreIcon).appendTo(r);!0===n.loop&&(f.addClass("active"),e.attr("loop","loop"));this._setVolume();n.muted&&(u.volumeBackup=i.volume,u.volume.data("slider").val(0),i.volume=0);l.html("00:00 / 00:00")},_createEvents:function(){var n=this,f=this.element,e=this.options,o=this.elem,u=this.player;f.on("loadstart",function(){n.preloader.fadeIn()});f.on("loadedmetadata",function(){n.duration=o.duration.toFixed(0);n._setInfo(0,n.duration);r.exec(e.onMetadata,[o,u])});f.on("canplay",function(){n._setBuffer();n.preloader.fadeOut()});f.on("progress",function(){n._setBuffer()});f.on("timeupdate",function(){var t=Math.round(100*o.currentTime/n.duration);n._setInfo(o.currentTime,n.duration);n.stream.data("slider").val(t);r.exec(e.onTime,[o.currentTime,n.duration,o,u])});f.on("waiting",function(){n.preloader.fadeIn()});f.on("loadeddata",function(){});f.on("play",function(){u.find(".play").html(e.pauseIcon);r.exec(e.onPlay,[o,u]);n._onMouse()});f.on("pause",function(){u.find(".play").html(e.playIcon);r.exec(e.onPause,[o,u]);n._offMouse()});f.on("stop",function(){n.stream.data("slider").val(0);r.exec(e.onStop,[o,u]);n._offMouse()});f.on("ended",function(){n.stream.data("slider").val(0);r.exec(e.onEnd,[o,u]);n._offMouse()});f.on("volumechange",function(){n._setVolume()});u.on(i.events.click,".play",function(){o.paused?n.play():n.pause()});u.on(i.events.click,".stop",function(){n.stop()});u.on(i.events.click,".mute",function(){n._toggleMute()});u.on(i.events.click,".loop",function(){n._toggleLoop()});u.on(i.events.click,".full",function(){n.fullscreen=!n.fullscreen;u.find(".full").html(!0===n.fullscreen?e.screenLessIcon:e.screenMoreIcon);e.fullScreenMode===i.fullScreenMode.WINDOW?!0===n.fullscreen?u.addClass("full-screen"):u.removeClass("full-screen"):!0===n.fullscreen?(i.requestFullScreen(o),!1===n.fullScreenInterval&&(n.fullScreenInterval=setInterval(function(){!1===i.inFullScreen()&&(n.fullscreen=!1,clearInterval(n.fullScreenInterval),n.fullScreenInterval=!1,u.find(".full").html(e.screenMoreIcon))},1e3))):i.exitFullScreen();!0===n.fullscreen?t(document).on(i.events.keyup+"_video",function(n){27===n.keyCode&&u.find(".full").click()}):t(document).off(i.events.keyup+"_video")});t(window).resize(function(){n._setAspectRatio()})},_onMouse:function(){var n=this.player,t=this.options;t.controlsHide>0&&(n.on(i.events.enter,function(){n.find(".controls").fadeIn()}),n.on(i.events.leave,function(){setTimeout(function(){n.find(".controls").fadeOut()},t.controlsHide)}))},_offMouse:function(){this.player.off(i.events.enter);this.player.off(i.events.leave);this.player.find(".controls").fadeIn()},_toggleLoop:function(){var n=this.player.find(".loop");0!==n.length&&(n.toggleClass("active"),n.hasClass("active")?this.element.attr("loop","loop"):this.element.removeAttr("loop"))},_toggleMute:function(){this.muted=!this.muted;!1===this.muted?(this.video.volume=this.volumeBackup,this.volume.data("slider").val(100*this.volumeBackup)):(this.volumeBackup=this.video.volume,this.volume.data("slider").val(0),this.video.volume=0)},_setInfo:function(n,t){this.player.find(".info-box").html(r.secondsToFormattedString(Math.round(n))+" / "+r.secondsToFormattedString(Math.round(t)))},_setBuffer:function(){var n=this.video.buffered.length?Math.round(Math.floor(this.video.buffered.end(0))/Math.floor(this.video.duration)*100):0;this.stream.data("slider").buff(n)},_setVolume:function(){var r=this.video,u=this.player,t=this.options,i=u.find(".mute"),n=100*r.volume;n>1&&n<30?i.html(t.volumeLowIcon):n>=30&&n<60?i.html(t.volumeMediumIcon):n>=60&&n<=100?i.html(t.volumeHighIcon):i.html(t.muteIcon)},_setAspectRatio:function(){var n,u=this.player,f=this.options,t=u.outerWidth();switch(f.aspectRatio){case i.aspectRatio.SD:n=r.aspectRatioH(t,"4/3");break;case i.aspectRatio.CINEMA:n=r.aspectRatioH(t,"21/9");break;default:n=r.aspectRatioH(t,"16/9")}u.outerHeight(n)},aspectRatio:function(n){this.options.aspectRatio=n;this._setAspectRatio()},play:function(n){void 0!==n&&this._setSource(n);void 0===this.element.attr("src")&&0===this.element.find("source").length||this.video.play()},pause:function(){this.video.pause()},resume:function(){this.video.paused&&this.play()},stop:function(){this.video.pause();this.video.currentTime=0;this.stream.data("slider").val(0);this._offMouse()},volume:function(n){if(void 0===n)return this.video.volume;n>1&&(n/=100);this.video.volume=n;this.volume.data("slider").val(100*n)},loop:function(){this._toggleLoop()},mute:function(){this._toggleMute()},changeAspectRatio:function(){this.options.aspectRatio=this.element.attr("data-aspect-ratio");this._setAspectRatio()},changeSource:function(){var n=JSON.parse(this.element.attr("data-src"));this.play(n)},changeVolume:function(){var n=this.element.attr("data-volume");this.volume(n)},changeAttribute:function(n){switch(n){case"data-aspect-ratio":this.changeAspectRatio();break;case"data-src":this.changeSource();break;case"data-volume":this.changeVolume()}}},i.plugin("video",eu),ou={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this.win=null,this.overlay=null,this._setOptionsFromDOM(),this._create(),r.exec(this.options.onWindowCreate,[this.win,this.element]),this},dependencies:["draggable","resizeable"],options:{width:"auto",height:"auto",btnClose:!0,btnMin:!0,btnMax:!0,clsCaption:"",clsContent:"",clsWindow:"",draggable:!0,dragElement:".window-caption",dragArea:"parent",shadow:!1,icon:"",title:"Window",content:"default",resizable:!0,overlay:!1,overlayColor:"transparent",overlayAlpha:.5,modal:!1,position:"absolute",checkEmbed:!0,top:"auto",left:"auto",place:"auto",closeAction:i.actions.REMOVE,onDragStart:i.noop,onDragStop:i.noop,onDragMove:i.noop,onCaptionDblClick:i.noop,onCloseClick:i.noop,onMaxClick:i.noop,onMinClick:i.noop,onResizeStart:i.noop,onResizeStop:i.noop,onResize:i.noop,onWindowCreate:i.noop,onShow:i.noop,onWindowDestroy:i.noop,onCanClose:i.noop_true,onClose:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var t,u,i=this.element,n=this.options,f=i.prev(),e=i.parent();!0===n.modal&&(n.btnMax=!1,n.btnMin=!1,n.resizable=!1);"default"===n.content&&(n.content=i);t=this._window(n);0===f.length?e.prepend(t):t.insertAfter(f);!0===n.overlay&&((u=this._overlay()).appendTo(t.parent()),this.overlay=u);r.exec(n.onShow,[t]);this.win=t},_window:function(n){var u,f,e,o,h,s=this;return(u=t("<div>").addClass("window")).css({width:n.width,height:n.height,position:n.position,top:n.top,left:n.left}),!0===n.modal&&u.addClass("modal"),f=t("<div>").addClass("window-caption"),e=t("<div>").addClass("window-content"),u.append(f),u.append(e),!0===n.status&&(h=t("<div>").addClass("window-status"),u.append(h)),!0===n.shadow&&u.addClass("win-shadow"),void 0!==n.icon&&t("<span>").addClass("icon").html(n.icon).appendTo(f),void 0!==n.title&&t("<span>").addClass("title").html(n.title).appendTo(f),void 0!==n.content&&"original"!==n.content&&(r.isUrl(n.content)&&r.isVideoUrl(n.content)&&(n.content=r.embedUrl(n.content)),!r.isJQueryObject(n.content)&&r.isFunc(n.content)&&(n.content=r.exec(n.content)),r.isJQueryObject(n.content)?n.content.appendTo(e):e.html(n.content)),!0!==n.btnClose&&!0!==n.btnMin&&!0!==n.btnMax||((o=t("<div>").addClass("buttons")).appendTo(f),!0===n.btnMax&&t("<span>").addClass("btn-max").appendTo(o),!0===n.btnMin&&t("<span>").addClass("btn-min").appendTo(o),!0===n.btnClose&&t("<span>").addClass("btn-close").appendTo(o)),u.attr("id",void 0===n.id?r.elementId("window"):n.id),!0===n.resizable&&(t("<span>").addClass("resize-element").appendTo(u),u.addClass("resizable")),u.on(i.events.dblclick,".window-caption",function(n){s.maximized(n)}),u.on(i.events.click,".btn-max",function(n){s.maximized(n)}),u.on(i.events.click,".btn-min",function(n){s.minimized(n)}),u.on(i.events.click,".btn-close",function(n){s.close(n)}),!0===n.resizable&&u.resizable({resizeElement:".resize-element",onResizeStart:n.onResizeStart,onResizeStop:n.onResizeStop,onResize:n.onResize}),!0===n.draggable&&u.draggable({dragElement:n.dragElement,dragArea:n.dragArea,onDragStart:n.onDragStart,onDragStop:n.onDragStop,onDragMove:n.onDragMove}),"auto"!==n.place&&u.addClass("pos-"+n.place),u.addClass(n.clsWindow),f.addClass(n.clsCaption),e.addClass(n.clsContent),u},_overlay:function(){this.win;this.element;var i=this.options,n=t("<div>");return n.addClass("overlay"),"transparent"===i.overlayColor?n.addClass("transparent"):n.css({background:r.hex2rgba(i.overlayColor,i.overlayAlpha)}),n},maximized:function(n){var i=this.win,u=(this.element,this.options),f=t(n.currentTarget);i.toggleClass("maximized");f.hasClass("window-caption")?r.exec(u.onCaptionDblClick,[i]):r.exec(u.onMaxClick,[i])},minimized:function(){var n=this.win,t=this.element,i=this.options;n.toggleClass("minimized");r.exec(i.onMinClick,[n],t[0])},close:function(){var e=this,t=this.win,u=this.element,n=this.options,f;if(!1===r.exec(n.onCanClose,[t]))return!1;f=0;n.onClose!==i.noop&&(f=500);r.exec(n.onClose,[t],u[0]);setTimeout(function(){!0===n.modal&&t.siblings(".overlay").remove();r.exec(n.onCloseClick(),[t],u[0]);r.exec(n.onWindowDestroy,[t],u[0]);n.closeAction===i.actions.REMOVE?t.remove():e.hide()},f)},hide:function(){this.win.addClass("no-visible")},show:function(){this.win.removeClass("no-visible")},toggle:function(){this.win.hasClass("no-visible")?this.show():this.hide()},isOpen:function(){return this.win.hasClass("no-visible")},min:function(n){n?this.win.addClass("minimized"):this.win.removeClass("minimized")},max:function(n){n?this.win.addClass("maximized"):this.win.removeClass("maximized")},toggleButtons:function(n){this.element;var t=this.win,i=(this.options,t.find(".btn-close")),r=t.find(".btn-min"),u=t.find(".btn-max");"data-btn-close"===n&&i.toggle();"data-btn-min"===n&&r.toggle();"data-btn-max"===n&&u.toggle()},changeSize:function(n){var t=this.element,i=this.win;this.options;"data-width"===n&&i.css("width",t.data("width"));"data-height"===n&&i.css("height",t.data("height"))},changeClass:function(n){var t=this.element,i=this.win,r=this.options;"data-cls-window"===n&&(i[0].className="window "+(r.resizable?" resizeable ":" ")+t.attr("data-cls-window"));"data-cls-caption"===n&&(i.find(".window-caption")[0].className="window-caption "+t.attr("data-cls-caption"));"data-cls-content"===n&&(i.find(".window-content")[0].className="window-content "+t.attr("data-cls-content"))},toggleShadow:function(){var t=this.element,n=this.win;this.options;!0===JSON.parse(t.attr("data-shadow"))?n.addClass("win-shadow"):n.removeClass("win-shadow")},setContent:function(){var t,i=this.element,u=this.win,n=(this.options,i.attr("data-content"));t=!r.isJQueryObject(n)&&r.isFunc(n)?r.exec(n):r.isJQueryObject(n)?n.html():n;u.find(".window-content").html(t)},setTitle:function(){var n=this.element,t=this.win,i=(this.options,n.attr("data-title"));t.find(".window-caption .title").html(i)},setIcon:function(){var n=this.element,t=this.win,i=(this.options,n.attr("data-icon"));t.find(".window-caption .icon").html(i)},getIcon:function(){this.element;var n=this.win;return this.options,n.find(".window-caption .icon").html()},getTitle:function(){this.element;var n=this.win;return this.options,n.find(".window-caption .title").html()},toggleDraggable:function(){var t=this.element,i=this.win,r=(this.options,JSON.parse(t.attr("data-draggable"))),n=i.data("draggable");!0===r?n.on():n.off()},toggleResizable:function(){var i=this.element,n=this.win,r=(this.options,JSON.parse(i.attr("data-resizable"))),t=n.data("resizable");!0===r?(t.on(),n.find(".resize-element").removeClass("resize-element-disabled")):(t.off(),n.find(".resize-element").addClass("resize-element-disabled"))},changeTopLeft:function(n){var t,i=this.element,r=this.win;if(this.options,"data-top"===n){if(t=parseInt(i.attr("data-top")),!isNaN(t))return;r.css("top",t)}if("data-left"===n){if(t=parseInt(i.attr("data-left")),!isNaN(t))return;r.css("left",t)}},changePlace:function(){var n=this.element,t=this.win,i=(this.options,n.attr("data-place"));t.addClass(i)},changeAttribute:function(n){switch(n){case"data-btn-close":case"data-btn-min":case"data-btn-max":this.toggleButtons(n);break;case"data-width":case"data-height":this.changeSize(n);break;case"data-cls-window":case"data-cls-caption":case"data-cls-content":this.changeClass(n);break;case"data-shadow":this.toggleShadow();break;case"data-icon":this.setIcon();break;case"data-title":this.setTitle();break;case"data-content":this.setContent();break;case"data-draggable":this.toggleDraggable();break;case"data-resizable":this.toggleResizable();break;case"data-top":case"data-left":this.changeTopLeft(n);break;case"data-place":this.changePlace()}}},i.plugin("window",ou),i.window={isWindow:function(n){return r.isMetroObject(n,"window")},min:function(n,i){if(!this.isWindow(n))return!1;t(n).data("window").min(i)},max:function(n,i){if(!this.isWindow(n))return!1;t(n).data("window").max(i)},show:function(n){if(!this.isWindow(n))return!1;t(n).data("window").show()},hide:function(n){if(!this.isWindow(n))return!1;t(n).data("window").hide()},toggle:function(n){if(!this.isWindow(n))return!1;t(n).data("window").toggle()},isOpen:function(n){return!!this.isWindow(n)&&t(n).data("window").isOpen()},close:function(n){if(!this.isWindow(n))return!1;t(n).data("window").close()},create:function(n){var i,r;return i=t("<div>").appendTo(t("body")),r=t.extend({},{},void 0!==n?n:{}),i.window(r)}},su={init:function(n,i){return this.options=t.extend({},this.options,n),this.elem=i,this.element=t(i),this._setOptionsFromDOM(),this._create(),this},options:{start:1,finish:0,iconHelp:"<span class='default-icon-help'><\/span>",iconPrev:"<span class='default-icon-left-arrow'><\/span>",iconNext:"<span class='default-icon-right-arrow'><\/span>",iconFinish:"<span class='default-icon-check'><\/span>",buttonMode:"cycle",buttonOutline:!0,clsWizard:"",clsActions:"",clsHelp:"",clsPrev:"",clsNext:"",clsFinish:"",onPage:i.noop,onHelpClick:i.noop,onPrevClick:i.noop,onNextClick:i.noop,onFinishClick:i.noop,onBeforePrev:i.noop_true,onBeforeNext:i.noop_true,onWizardCreate:i.noop},_setOptionsFromDOM:function(){var i=this.element,n=this.options;t.each(i.data(),function(t,i){if(t in n)try{n[t]=JSON.parse(i)}catch(r){n[t]=i}})},_create:function(){var n=this.element,t=this.options;this._createWizard();this._createEvents();r.exec(t.onWizardCreate,[n])},_createWizard:function(){var u,f=this.element,n=this.options,i;f.addClass("wizard").addClass(n.view).addClass(n.clsWizard);u=t("<div>").addClass("action-bar").addClass(n.clsActions).appendTo(f);i="button"===n.buttonMode?"":n.buttonMode;!0===n.buttonOutline&&(i+=" outline");!1!==n.iconHelp&&t("<button>").attr("type","button").addClass("button wizard-btn-help").addClass(i).addClass(n.clsHelp).html(r.isTag(n.iconHelp)?n.iconHelp:t("<img>").attr("src",n.iconHelp)).appendTo(u);!1!==n.iconPrev&&t("<button>").attr("type","button").addClass("button wizard-btn-prev").addClass(i).addClass(n.clsPrev).html(r.isTag(n.iconPrev)?n.iconPrev:t("<img>").attr("src",n.iconPrev)).appendTo(u);!1!==n.iconNext&&t("<button>").attr("type","button").addClass("button wizard-btn-next").addClass(i).addClass(n.clsNext).html(r.isTag(n.iconNext)?n.iconNext:t("<img>").attr("src",n.iconNext)).appendTo(u);!1!==n.iconFinish&&t("<button>").attr("type","button").addClass("button wizard-btn-finish").addClass(i).addClass(n.clsFinish).html(r.isTag(n.iconFinish)?n.iconFinish:t("<img>").attr("src",n.iconFinish)).appendTo(u);this.toPage(n.start);this._setHeight()},_setHeight:function(){var i=this.element,r=(this.options,i.children("section")),n=0;r.children(".page-content").css("max-height","none");t.each(r,function(){var i=t(this).height();n<parseInt(i)&&(n=i)});i.height(n)},_createEvents:function(){var u=this,n=this.element,f=this.options;n.on(i.events.click,".wizard-btn-help",function(){var t=n.children("section").get(u.current-1);r.exec(f.onHelpClick,[u.current,t,n])});n.on(i.events.click,".wizard-btn-prev",function(){u.prev();r.exec(f.onPrevClick,[u.current,n])});n.on(i.events.click,".wizard-btn-next",function(){u.next();r.exec(f.onNextClick,[u.current,n])});n.on(i.events.click,".wizard-btn-finish",function(){r.exec(f.onFinishClick,[u.current,n])});n.on(i.events.click,".complete",function(){var n=t(this).index()+1;u.toPage(n)});t(window).on(i.events.resize,function(){u._setHeight()})},next:function(){var n=this.element,i=this.options,u=n.children("section"),f=t(n.children("section").get(this.current-1));this.current+1>u.length||!1===r.exec(i.onBeforeNext,[this.current,f,n])||(this.current++,this.toPage(this.current))},prev:function(){var n=this.element,i=this.options,u=t(n.children("section").get(this.current-1));this.current-1!=0&&!1!==r.exec(i.onBeforePrev,[this.current,u,n])&&(this.current--,this.toPage(this.current))},last:function(){var n=this.element;this.options;this.toPage(n.children("section").length)},first:function(){this.toPage(1)},toPage:function(n){var i=this.element,u=this.options,f=t(i.children("section").get(n-1)),e=i.children("section"),s=i.find(".action-bar"),o;if(0!==f.length){var h=i.find(".wizard-btn-finish").addClass("disabled"),c=i.find(".wizard-btn-next").addClass("disabled"),l=i.find(".wizard-btn-prev").addClass("disabled");this.current=n;i.children("section").removeClass("complete current").removeClass(u.clsCurrent).removeClass(u.clsComplete);f.addClass("current").addClass(u.clsCurrent);f.prevAll().addClass("complete").addClass(u.clsComplete);o=0===i.children("section.complete").length?0:parseInt(r.getStyleOne(i.children("section.complete")[0],"border-left-width"));s.animate({left:i.children("section.complete").length*o+41});(this.current===e.length||u.finish>0&&this.current>=u.finish)&&h.removeClass("disabled");this.current<e.length&&c.removeClass("disabled");this.current>1&&l.removeClass("disabled");i.trigger("onpage",[this.current,f,i]);r.exec(u.onPage,[this.current,f,i])}},changeAttribute:function(){}},i.plugin("wizard",su),!0===METRO_INIT?i.init():i});